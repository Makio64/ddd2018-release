webpackJsonp([1],Array(54).concat([function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(0),n=a.n(o),r=a(5),i=a(79),s=a(145),l=a(19),d=a(44),u=a(29),p=a(30),c=a(115),m=a(233),f=a(236);t["default"]=function e(){n()(this,e),i.a.initPostprocess();var t=new s.a;u.a.isProduction?(t.hide(),u.a.showGui=!1):u.a.showGui=!0,c.a.to(new f.a)}},,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";t.__esModule=!0;var o=a(92),n=(function(e){return e&&e.__esModule?e:{default:e}})(o);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"===("undefined"==typeof t?"undefined":(0,n.default)(t))||"function"==typeof t)?t:e}},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=a(136),r=o(n),i=a(140),s=o(i),l=a(92),d=o(l);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,d.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(r.default?(0,r.default)(e,t):e.__proto__=t)}},function(e,t,a){"use strict";t.__esModule=!0;var o=a(119),n=(function(e){return e&&e.__esModule?e:{default:e}})(o);t.default=(function(){function e(e,t){for(var a=0,o;a<t.length;a++)o=t[a],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),(0,n.default)(e,o.key,o)}return function(t,a,o){return a&&e(t.prototype,a),o&&e(t,o),t}})()},function(e,t,a){"use strict";var o=Math.round,n=a(17),r=a.n(n),i=a(0),s=a.n(i),l=a(77),d=a.n(l),u=a(81),p=a(179),c=a(104),m=a(111),f=a(82),v=a(112),g=a(177),h=(function(){function e(){var t=this,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"node";s()(this,e),this.render=function(){if(t.isDirty){t.inputsEl.innerHTML="",t.outputsEl.innerHTML="";for(var e=t.inputs,a=Array.isArray(e),o=0,e=a?e:r()(e);;){var n;if(a){if(o>=e.length)break;n=e[o++]}else{if(o=e.next(),o.done)break;n=o.value}var i=n;t.inputsEl.appendChild(i.dom)}for(var s=t.outputs,l=Array.isArray(s),d=0,s=l?s:r()(s);;){var u;if(l){if(d>=s.length)break;u=s[d++]}else{if(d=s.next(),d.done)break;u=d.value}var p=u;t.outputsEl.appendChild(p.dom)}t.pluginsEl=t.dom.querySelectorAll(".input, .output");for(var c=t.pluginsEl,m=Array.isArray(c),v=0,c=m?c:r()(c);;){var g;if(m){if(v>=c.length)break;g=c[v++]}else{if(v=c.next(),v.done)break;g=v.value}var h=g;f.a.has(h,"down",t.onPlugDown)||f.a.on(h,"down",t.onPlugDown)}t.isDirty=!1}},this.onPlugChange=function(){t.isPlugDirty=!0},this.onDragStart=function(){t.dragndrop.containerEl=t.dom.parentNode,t.nodePanel.selectNode(t)},this.onDragEnd=function(){t._x=t.dragndrop.targetX,t._y=t.dragndrop.targetY},this.onDragMove=function(){t.nodePanel.redraw()},this.onPlugDown=function(a){t.nodePanel.onInputDown(a.origin,t)},this.dispose=function(){for(var e=t.inputs,a=Array.isArray(e),n=0,e=a?e:r()(e);;){var s;if(a){if(n>=e.length)break;s=e[n++]}else{if(n=e.next(),n.done)break;s=n.value}var l=s;l.dispose()}for(var i=t.outputs,d=Array.isArray(i),u=0,i=d?i:r()(i);;){var p;if(d){if(u>=i.length)break;p=i[u++]}else{if(u=i.next(),u.done)break;p=u.value}var c=p;c.dispose()}t.inputs=null,t.outputs=null,t.inputsEl=null,t.outputsEl=null,t.contentEl=null,t.dom.innerHTML="",t.dom=null,t.parent=null,t.nodePanel=null,t.dragndrop.dispose()},this.dom=Object(u.b)(a(180).default),this.inputsEl=this.dom.querySelector(".inputs"),this.outputsEl=this.dom.querySelector(".outputs"),this.contentEl=this.dom.querySelector(".content"),this.inputs=[],this.outputs=[],this.value=null,this.name=o,this.isDirty=!0,this.isPlugDirty=!0,this.nodePanel=null,this.id=Object(v.b)(16),this._x=0,this._y=0,this.render(),this.dragndrop=new m.a(this.dom,null,null,0),this.dragndrop.onMove.add(this.onDragMove),this.dragndrop.onStart.add(this.onDragStart),this.dragndrop.onEnd.add(this.onDragEnd)}return e.prototype.updateDom=function(){this.dom.style.transform="translate("+this._x+"px,"+this._y+"px)"},e.prototype.update=function(){this.isAllInputConnected()&&(this.value=this.inputs[0].value,this.contentEl.innerHTML=this.name+": "+this.value)},e.prototype.contains=function(e,t){for(var a=t?this.inputs:this.outputs,o=a,n=Array.isArray(o),i=0,o=n?o:r()(o);;){var s;if(n){if(i>=o.length)break;s=o[i++]}else{if(i=o.next(),i.done)break;s=i.value}var l=s;if(e==l.dom)return l}return null},e.prototype.isAllInputConnected=function(){if(0==this.inputs.length+this.outputs.length)return!1;for(var e=this.inputs,t=Array.isArray(e),a=0,e=t?e:r()(e);;){var o;if(t){if(a>=e.length)break;o=e[a++]}else{if(a=e.next(),a.done)break;o=a.value}var n=o;if(!n.link)return!1}return!0},e.prototype.getParentNodes=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];if(-1==e.indexOf(this)){e.push(this);for(var t=this.inputs,a=Array.isArray(t),o=0,t=a?t:r()(t);;){var n;if(a){if(o>=t.length)break;n=t[o++]}else{if(o=t.next(),o.done)break;n=o.value}var i=n;i.link&&i.link.out&&i.link.out.node.getParentNodes(e)}return e}},e.prototype.getLinks=function(){for(var e=[],t=this.inputs,a=Array.isArray(t),o=0,t=a?t:r()(t);;){var n;if(a){if(o>=t.length)break;n=t[o++]}else{if(o=t.next(),o.done)break;n=o.value}var i=n;i.link&&e.push(i.link)}return e},e.prototype.createInput=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"any";this.isDirty=!0;var a=new p.a(e,this,!0,t);a.slot=this.inputs.length,a.onChange.add(this.onPlugChange),this.inputs.push(a),this.render()},e.prototype.createOutput=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"any";this.isDirty=!0;var a=new p.a(e,this,!1,t);a.slot=this.outputs.length,a.onChange.add(this.onPlugChange),this.outputs.push(a),this.render()},e.prototype.serialize=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"basic",t={name:this.name,value:this.value,type:e,x:o(this.x),y:o(this.y),id:this.id};return t},e.deserialize=function(t){var a=new e(t.name);return a.baseDeserialize(t),a},e.prototype.baseDeserialize=function(e){this.x=parseFloat(e.x),this.y=parseFloat(e.y),this.id=e.id,this.value=parseFloat(e.value),this.updateDom()},d()(e,[{key:"name",set:function(e){this._name=e,this.contentEl.innerHTML=e},get:function(){return this._name}},{key:"x",set:function(e){this._x=o(e),this.dragndrop.targetX=e,this.updateDom()},get:function(){return this._x}},{key:"y",set:function(e){this._y=o(e),this.dragndrop.targetY=e,this.updateDom()},get:function(){return this._y}},{key:"color",set:function(e){this.dom.style.backgroundColor=e}}]),e})();t.a=h},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(1),l=a(5),d=a(122),u=(function(){function t(){var a=this;n()(this,t),this.initPostprocess=function(){a.composer=new d.a(a.renderer,{}),a.composer.setSize(a.renderer.domElement.width,a.renderer.domElement.height),a.postprocess=!0},this.add=function(e){a.group.add(e)},this.remove=function(e){a.group.remove(e)},this.getObjectByName=function(e){return a.scene.getObjectByName(e)},this.addPass=function(e){a.passes.push(e)},this.clearPass=function(){a.passes=[]},this.activate=function(){a.renderer.domElement.style.display=""},this.deactivate=function(){a.renderer.domElement.style.display="none"},this.render=function(e){if(a.enabled){if(a.control&&a.control.update(e),a.onBeforeRenderer.dispatch(),a.postprocess){a.composer.render(a.scene,a.camera);for(var t=0,o=a.passes.length-1;t<o;t++)a.composer.pass(a.passes[t]);a.composer.toScreen(0<a.passes.length?a.passes[a.passes.length-1]:null)}else a.renderer.render(a.scene,a.camera);a.onAfterRenderer.dispatch()}},this.resize=function(){a.camera.aspect=l.a.width/l.a.height,a.camera.updateProjectionMatrix(),a.renderer.setSize(l.a.width,l.a.height),a.renderer.setPixelRatio(l.a.pixelRatio),a.resolution=new e.Vector2(1,l.a.height/l.a.width),a.render(0),a.composer&&a.composer.setSize(a.renderer.domElement.width,a.renderer.domElement.height)},this.models={},this.textures={},this.camera=null,this.scene=null,this.clearAuto=!0,this.renderer=null,this.postprocess=!1,this.passes=[],this.clearAlpha=1,this.enabled=!0,this.onBeforeRenderer=new s.a,this.onAfterRenderer=new s.a;var o=l.a.width,r=l.a.height;this.camera=new e.PerspectiveCamera(50,o/r,.1,2500),this.scene=new e.Scene;this.resolution=new e.Vector2(1,r/o),this.renderer=new e.WebGLRenderer({alpha:!1,antialias:!1,preserveDrawingBuffer:!1}),this.renderer.setPixelRatio(l.a.pixelRatio),this.renderer.domElement.className="three",this.renderer.setSize(o,r),this.renderer.setClearColor(16711680,0),this.floatSupported=!!this.renderer.extensions.get("OES_texture_float"),this.halfFloatSupported=!!this.renderer.extensions.get("OES_texture_half_float");var i=new e.MeshBasicMaterial({side:e.DoubleSide,color:255,transparent:!0,opacity:this.clearAlpha});this.buffer={scene:new e.Scene,camera:new e.OrthographicCamera(-.5,.5,.5,-.5,0,1),material:i,mesh:new e.Mesh(new e.PlaneBufferGeometry(1,1),i)},this.buffer.scene.add(this.buffer.mesh),this.group=new e.Group,this.scene.add(this.group),l.a.onUpdate.add(this.render),l.a.onResize.add(this.resize),document.body.appendChild(this.renderer.domElement),this.render(0)}return i()(t,[{key:"backgroundColor",set:function(e){this.renderer.setClearColor(e,this.clearAlpha),this.buffer.mesh.material.color.setHex(e)}}]),t})(),p=new u;t.a=p}).call(t,a(28))},function(e,t,a){"use strict";(function(e){var o=a(143),n=a.n(o),r=a(0),i=a.n(r);t.a=function t(a,o){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};i()(this,t),this.name=a,this.enabled=!0,this.canCompute=!0,this.fragmentShader=o,this.vertexShader="\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main() {\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t}\t\n\t\t",this.uniforms=n()({resolution:{type:"v2",value:new e.Vector2(1,1)},time:{type:"f",value:Date.now()},tInput:{type:"t",value:null}},r),this.material=new e.ShaderMaterial({vertexShader:this.vertexShader,fragmentShader:this.fragmentShader,uniforms:this.uniforms,flatShading:!0,depthWrite:!1,depthTest:!1,transparent:!1})}}).call(t,a(28))},function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"c",(function(){return r})),a.d(t,"a",(function(){return i}));var o=a(17),n=a.n(o),r=(function(){var e=document.createElement("div");if(null==e.style.transform){var t=["Webkit","Moz","ms"];for(var a in t)if(e.style[t[a]+"Transform"]!==void 0)return t[a]+"Transform"}return"transform"})(),i=function(e){var t=1<arguments.length&&arguments[1]!==void 0?arguments[1]:e.parentNode,a=e.getBoundingClientRect(),o={left:a.left,top:a.top};if(t){var n=t.getBoundingClientRect();o.left-=n.left,o.top-=n.top}return o},s=document.createElement("div"),l=function(e){return s.innerHTML=e,s.firstChild},d=/^data\-(.+)$/},function(e,t,a){"use strict";function o(e){var t="";return D?window.navigator.msPointerEnabled?"down"===e?t="MSPointerDown":"move"===e?t="MSPointerMove":"up"===e?t="MSPointerUp":"click"===e?t="MSPointerUp":void 0:"down"===e?t="touchstart":"move"===e?t="touchmove":"up"===e?t="touchend":"click"===e?t="touchstart":void 0:"down"===e?t="mousedown":"move"===e?t="mousemove":"up"===e?t="mouseup":"click"===e?t="click":"over"===e?t="safari"==h.name?"mouseover":"mouseenter":"out"===e?t="safari"==h.name?"mouseout":"mouseleave":void 0,t}function r(e){return"down"===e?y:"move"===e?b:"up"===e?_:"click"===e?w:"over"===e?S:"out"===e?M:void 0}function n(e,t){for(var a=null,o=0,r=t.length;o<r;o++)if(a=t[o],a.cb==e)return{data:a,idx:o};return null}function i(t){var e=A.x,a=A.y;return A.x=t.x,A.y=t.y,T.x=A.x-e,T.y=A.y-a,A.moveX=T.x,A.moveY=T.y,A.normalizedX=A.x/v.a.width,A.normalizedY=A.y/v.a.height,A.unitX=2*(A.normalizedX-.5),A.unitY=2*(A.normalizedY-.5),A}function s(){z.x=A.x,z.y=A.y}function l(){F.dispatch(),I.mouseIsDown=!1}var d=a(17),u=a.n(d),p=a(105),c=a.n(p),m=a(52),f=a.n(m),v=a(5),g=a(1),h=a(109).detect(),y=new c.a,b=new c.a,_=new c.a,w=new c.a,S=new c.a,M=new c.a,C=[y,b,_,w],D=f.a.any,k=function(e,t,a){function n(t){if(t={x:0,y:0,origin:t},!D)t.x=t.origin.clientX,t.y=t.origin.clientY;else if(window.navigator.msPointerEnabled)t.x=t.origin.clientX,t.y=t.origin.clientY;else{var o=t.origin.touches[0];o&&(t.x=o.clientX,t.y=o.clientY)}a.call(this,t)}var i=o(t);if(""!=i){var s=r(t);s.get(e)||s.set(e,[]),s.get(e).push({cb:a,proxy:n}),e.addEventListener(i,n,!1)}},P={preventDefaultTouch:!0},I={isMouseDown:!1},A={x:.5*v.a.width,y:.5*v.a.height,normalizedX:.5,normalizedY:.5,unitX:0,unitY:0,moveX:0,moveY:0,e:null},z={x:.5*v.a.width,y:.5*v.a.height},T={x:.5*v.a.width,y:.5*v.a.height},U=new g.a,O=new g.a,E=new g.a,L=new g.a,F=new g.a;k(window,"down",(function(t){I.isMouseDown=!0,U.dispatch(i(t))})),k(window,"move",(function(t){s(),P.preventDefaultTouch&&t.origin.preventDefault(),E.dispatch(i(t))})),k(window,"up",(function(t){I.isMouseDown=!1,O.dispatch(i(t))})),k(window,"click",(function(t){L.dispatch(i(t))})),window.addEventListener("blur",(function(){l()})),window.addEventListener("mouseleave",(function(){l()}));t.a={config:P,infos:I,on:k,off:function(e,t,a){var s=o(t);if(""!=s){var l=r(t),d=l.get(e);if(d)if(a){var u=n(a,d);if(!u)return;e.removeEventListener(s,u.data.proxy,!1),d.splice(u.idx,1)}else{for(var p=null,c=0,i=d.length;c<i;c++)p=d[c],e.removeEventListener(s,p.proxy,!1);l.delete(e)}}},has:function(e,t,n){var i=o(t);if(""!=i){var s=r(t),l=s.get(e);if(!l)return!1;for(var d=l,p=Array.isArray(d),c=0,d=p?d:u()(d);;){var m;if(p){if(c>=d.length)break;m=d[c++]}else{if(c=d.next(),c.done)break;m=c.value}var f=m;if(f.cb==n)return!0}return!1}},unbind:function(e){for(var t=0,a=C.length;t<a;t++)C[t][e]=null,delete C[t][e]},mouse:A,prevMouse:z,move:T,onDown:U,onUp:O,onMove:E,onClick:L,onLeave:F}},function(e){function t(e,t){var o=e[1]||"",n=e[3];if(!n)return o;if(t&&"function"==typeof btoa){var r=a(n),i=n.sources.map((function(e){return"/*# sourceURL="+n.sourceRoot+e+" */"}));return[o].concat(i).concat([r]).join("\n")}return[o].join("\n")}function a(e){var t=btoa(unescape(encodeURIComponent(JSON.stringify(e))));return"/*# "+("sourceMappingURL=data:application/json;charset=utf-8;base64,"+t)+" */"}e.exports=function(e){var a=[];return a.toString=function(){return this.map((function(a){var o=t(a,e);return a[2]?"@media "+a[2]+"{"+o+"}":o})).join("")},a.i=function(e,t){"string"==typeof e&&(e=[[null,e,""]]);for(var o={},n=0,r;n<this.length;n++)r=this[n][0],"number"==typeof r&&(o[r]=!0);for(n=0;n<e.length;n++){var i=e[n];"number"==typeof i[0]&&o[i[0]]||(t&&!i[2]?i[2]=t:t&&(i[2]="("+i[2]+") and ("+t+")"),a.push(i))}},a}},function(e,t,a){function o(e,t){for(var a=0;a<e.length;a++){var o=e[a],n=f[o.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](o.parts[r]);for(;r<o.parts.length;r++)n.parts.push(u(o.parts[r],t))}else{for(var i=[],r=0;r<o.parts.length;r++)i.push(u(o.parts[r],t));f[o.id]={id:o.id,refs:1,parts:i}}}}function n(e,t){for(var a=[],o={},n=0;n<e.length;n++){var r=e[n],i=t.base?r[0]+t.base:r[0],s=r[1],l=r[2],d=r[3],u={css:s,media:l,sourceMap:d};o[i]?o[i].parts.push(u):a.push(o[i]={id:i,parts:[u]})}return a}function r(e,t){var a=h(e.insertInto);if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=_[_.length-1];if("top"===e.insertAt)o?o.nextSibling?a.insertBefore(t,o.nextSibling):a.appendChild(t):a.insertBefore(t,a.firstChild),_.push(t);else if("bottom"===e.insertAt)a.appendChild(t);else if("object"==typeof e.insertAt&&e.insertAt.before){var n=h(e.insertInto+" "+e.insertAt.before);a.insertBefore(t,n)}else throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n")}function i(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=_.indexOf(e);0<=t&&_.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",d(t,e.attrs),r(e,t),t}function l(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",d(t,e.attrs),r(e,t),t}function d(e,t){Object.keys(t).forEach((function(a){e.setAttribute(a,t[a])}))}function u(e,t){var a,o,n,r;if(t.transform&&e.css)if(r=t.transform(e.css),r)e.css=r;else return function(){};if(t.singleton){var d=b++;a=y||(y=s(t)),o=p.bind(null,a,d,!1),n=p.bind(null,a,d,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(a=l(t),o=m.bind(null,a,t),n=function(){i(a),a.href&&URL.revokeObjectURL(a.href)}):(a=s(t),o=c.bind(null,a),n=function(){i(a)});return o(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;o(e=t)}else n()}}function p(e,t,a,o){var n=a?"":o.css;if(e.styleSheet)e.styleSheet.cssText=S(t,n);else{var r=document.createTextNode(n),i=e.childNodes;i[t]&&e.removeChild(i[t]),i.length?e.insertBefore(r,i[t]):e.appendChild(r)}}function c(e,t){var a=t.css,o=t.media;if(o&&e.setAttribute("media",o),e.styleSheet)e.styleSheet.cssText=a;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(a))}}function m(e,t,a){var o=a.css,n=a.sourceMap,r=t.convertToAbsoluteUrls===void 0&&n;(t.convertToAbsoluteUrls||r)&&(o=w(o)),n&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var i=new Blob([o],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(i),s&&URL.revokeObjectURL(s)}var f={},v=(function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}})((function(){return window&&document&&document.all&&!window.atob})),g=function(e){return document.querySelector(e)},h=(function(){var e={};return function(t){if("function"==typeof t)return t();if("undefined"==typeof e[t]){var a=g.call(this,t);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(t){a=null}e[t]=a}return e[t]}})(),y=null,b=0,_=[],w=a(174);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=v()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var a=n(e,t);return o(a,t),function(e){for(var r=[],s=0;s<a.length;s++){var i=a[s],l=f[i.id];l.refs--,r.push(l)}if(e){var d=n(e,t);o(d,t)}for(var s=0,l;s<r.length;s++)if(l=r[s],0===l.refs){for(var u=0;u<l.parts.length;u++)l.parts[u]();delete f[l.id]}}};var S=(function(){var e=[];return function(t,a){return e[t]=a,e.filter(Boolean).join("\n")}})()},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=a(114),p=(function(e){function t(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"SliderNode",o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"number";n()(this,t);var r=i()(this,e.call(this,a));return r.min=0,r.max=1,r.value=.5,r.createOutput("value",o),r.type="number",r.contentEl.innerHTML="",r.progressBar=new u.a(100,13,!0),r.progressBar.percent=r.value,r.progressBar.dom.style.position="absolute",r.progressBar.dom.style.top="0px",r.progressBar.dom.style.left="0px",r.progressBar.dom.style.zIndex="10",r.contentEl.appendChild(r.progressBar.dom),r.progressBar.dom.style.display="inline-block",r.contentEl.style.top="8px",r.contentEl.style.left="15px",r.contentEl.style.transform="initial",r.label=document.createElement("div"),r.label.innerHTML=a,r.label.className="label",r.contentEl.appendChild(r.label),r}return l()(t,e),t.prototype.update=function(){this.value=this.progressBar.percent},t.prototype.serialize=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"slider";return e.prototype.serialize.call(this,t)},t.deserialize=function(e){var a=new t;return a.baseDeserialize(e),a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(113),i=a(29),s=a(241),l=a(256);new s.a;var d=(function(){function e(){var t=this,a=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];n()(this,e),this.onMouseDown=function(t){t.stopPropagation()},this.onUpdateListenerTicker=function(){t.folderRoot.updater.update()},this.dom=document.createElement("div"),this.dom.classList.add("mnf-gui"),a&&(this.dom.classList.add("mnf-gui--main"),document.body.appendChild(this.dom)),this.folderRoot=new l.a("root",this.dom),this.dom.appendChild(this.folderRoot.dom),this.dom.style.display="none",this.dom.addEventListener("mousedown",this.onMouseDown,!1),this.listenerTicker=new r.a(24,this.onUpdateListenerTicker)}return e.prototype.add=function(){var e;return i.a.showGUI&&(this.dom.style.display="block"),(e=this.folderRoot).add.apply(e,arguments)},e.prototype.addColor=function(){var e;return i.a.showGUI&&(this.dom.style.display="block"),(e=this.folderRoot).addColor.apply(e,arguments)},e.prototype.addFolder=function(e){return i.a.showGUI&&(this.dom.style.display="block"),this.folderRoot.addFolder(e)},e})();t.a=new d(!0)},function(e,t,a){e.exports={default:a(123),__esModule:!0}},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(81),l=a(1),d=(function(){function e(t,a,o){n()(this,e),this.dom=Object(s.b)(t),this.target=a,this.param=o,this.cbOnChange=null,this.isAutoUpdating=!0,this.onUpdateStatusChange=new l.a}return e.prototype.onChange=function(e){return this.cbOnChange=e,this},e.prototype.listen=function(){return this.autoUpdate(!0),this},e.prototype.autoUpdate=function(e){if(this.isAutoUpdating!=e)return this.isAutoUpdating=e,this.onUpdateStatusChange.dispatch(this),this},e.prototype.update=function(){},e.prototype.name=function(e){return this.label=e,this},e.prototype.dipose=function(){this.target=null,this.cbOnChange=null},i()(e,[{key:"label",set:function(e){this.domLabel&&(this.domLabel.innerHTML=e),this._label=e},get:function(){return this.domLabel?this.domLabel.innerHTML:this._label}}]),e})();t.a=d},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,a){var o=a(33),n=a(149),r=a(150),i=a(7),s=a(42),l=a(50),d={},u={},t=e.exports=function(e,t,a,p,c){var m=c?function(){return e}:l(e),v=o(a,p,t?2:1),f=0,g,h,y,b;if("function"!=typeof m)throw TypeError(e+" is not iterable!");if(r(m)){for(g=s(e.length);g>f;f++)if(b=t?v(i(h=e[f])[0],h[1]):v(e[f]),b===d||b===u)return b;}else for(y=m.call(e);!(h=y.next()).done;)if(b=n(y,v,h.value,t),b===d||b===u)return b};t.BREAK=d,t.RETURN=u},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,a){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=a(127),r=o(n),i=a(129),s=o(i),l="function"==typeof s.default&&"symbol"==typeof r.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===l(r.default)?function(e){return"undefined"==typeof e?"undefined":l(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"==typeof e?"undefined":l(e)}},function(e,t,a){t.f=a(2)},function(e,t,a){var o=a(21)("meta"),n=a(12),r=a(8),i=a(11).f,s=0,l=Object.isExtensible||function(){return!0},d=!a(18)((function(){return l(Object.preventExtensions({}))})),u=function(e){i(e,o,{value:{i:"O"+ ++s,w:{}}})},p=e.exports={KEY:o,NEED:!1,fastKey:function(e,t){if(!n(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!r(e,o)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[o].i},getWeak:function(e,t){if(!r(e,o)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[o].w},onFreeze:function(e){return d&&p.NEED&&l(e)&&!r(e,o)&&u(e),e}}},function(e,t,a){var o=a(3),n=a(10),r=a(40),i=a(93),s=a(11).f;e.exports=function(e){var t=n.Symbol||(n.Symbol=r?{}:o.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:i.f(e)})}},function(e,t,a){e.exports={default:a(166),__esModule:!0}},function(e,t,a){e.exports={default:a(220),__esModule:!0}},function(e,t,a){"use strict";var o=a(1),n={metaKey:!1,shiftKey:!1,altKey:!1,ctrlKey:!1},r=new o.a,i=new o.a;window.addEventListener("keydown",(function(t){n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey,r.dispatch(t.which,t)})),window.addEventListener("keyup",(function(t){n.metaKey=t.metaKey,n.shiftKey=t.shiftKey,n.altKey=t.altKey,n.ctrlKey=t.ctrlKey,i.dispatch(t.which,t)}));t.a={special:n,up:i,down:r,onUp:i,onDown:r,touches:{enter:13,space:32,q:81,w:87,e:69,r:82,t:84,y:89,u:85,i:73,o:79,p:80,a:65,s:83,d:68,f:70,g:71,h:72,j:74,k:75,l:76,z:90,x:88,c:67,v:86,b:66,n:78,m:77,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,0:48,"[":219,"]":221,"\\":220,";":186,"'":222,",":188,".":190,"/":191,down:40,up:38,left:37,right:39,esc:27}}},function(e){e.exports="varying vec2 vUv;\nvoid main() {\n\tvUv = uv;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"},function(e,t,a){var o=a(23);e.exports=Array.isArray||function(e){return"Array"==o(e)}},function(e,t,a){var o=a(49),n=a(26).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return o(e,n)}},function(e,t,a){var o=a(89),n=a(20),r=a(13),i=a(41),s=a(8),l=a(47),d=Object.getOwnPropertyDescriptor;t.f=a(6)?d:function(e,t){if(e=r(e),t=i(t,!0),l)try{return d(e,t)}catch(t){}return s(e,t)?n(!o.f.call(e,t),e[t]):void 0}},function(){},function(e,t,a){"use strict";var o=a(17),n=a.n(o),r=a(0),i=a.n(r),s=a(81),l=a(82),d=a(5),u=a(110),p=a(165),c=a(111),m=a(167),f=a(172),v=(function(){function e(){var t=this,o=!(0<arguments.length&&void 0!==arguments[0])||arguments[0];i()(this,e),this.resize=function(){t.bb=t.dom.getBoundingClientRect(),t.canvas.width=t.bb.width,t.canvas.height=t.bb.height,t.isDirty=!0},this.onInputDown=function(a){a.stopPropagation(),t.currentPlug=a.target.parentNode,t.currentPlugIsIn=t.currentPlug.classList.contains("input"),t.currentPlugPosition=Object(s.a)(t.currentPlug,t.dom);var e=t.findPlugOfEl(t.currentPlug);e.disconnect(),t.selectNode(e.node),t.currentMouse={x:t.currentPlugPosition.left,y:t.currentPlugPosition.top},t.inputsEl=t.dom.querySelectorAll(".input,.output");for(var o=t.inputsEl,r=Array.isArray(o),i=0,o=r?o:n()(o);;){var d;if(r){if(i>=o.length)break;d=o[i++]}else{if(i=o.next(),i.done)break;d=i.value}var u=d;null==e.node.contains(u,!t.currentPlugIsIn)&&t.currentPlugIsIn!=u.classList.contains("input")&&("any"==t.currentPlug.dataset.type||"any"==u.dataset.type||u.dataset.type==t.currentPlug.dataset.type)&&(u.addEventListener("mouseover",t.onInputOver),u.addEventListener("mouseout",t.onInputOut),u.classList.add("highlight"))}l.a.onMove.add(t.onMove),l.a.onUp.add(t.onUp)},this.onMove=function(a){t.currentMouse.x+=a.moveX,t.currentMouse.y+=a.moveY,t.isDirty=!0},this.onUp=function(){var e=t.findPlugOfEl(t.currentPlug);l.a.onMove.remove(t.onMove),l.a.onUp.remove(t.onUp);for(var a=t.inputsEl,o=Array.isArray(a),r=0,a=o?a:n()(a);;){var i;if(o){if(r>=a.length)break;i=a[r++]}else{if(r=a.next(),r.done)break;i=r.value}var s=i;null==e.node.contains(s,!t.currentPlugIsIn)&&(t.currentPlugIsIn!=s.classList.contains("input")&&s.classList.remove("highlight"),s.removeEventListener("mouseover",t.onInputOver),s.removeEventListener("mouseout",t.onInputOut))}if(t.currentTarget){var d=t.findPlugOfEl(t.currentTarget),c=t.findPlugOfEl(t.currentPlug);if(d.link){var m=d.link[d.isPlugin?"out":"in"],f=c.node[d.isPlugin?"inputs":"outputs"];0<f.length&&null==f[0].link&&new u.a(f[0],m)}new u.a(c,d)}t.currentPlug=null,t.currentPlugPosition=null,t.currentTarget=null,t.currentTargetPosition=null,t.currentMouse=null,t.isDirty=!0},this.onInputOver=function(a){a.target.parentNode.classList.contains("input")==t.currentPlugIsIn||(t.currentTarget=a.target.parentNode,t.currentTargetPosition=Object(s.a)(a.target.parentNode,t.dom))},this.onInputOut=function(){t.currentTarget=null,t.currentTargetPosition=null},this.update=function(e){for(var a=t.nodes,o=Array.isArray(a),r=0,a=o?a:n()(a);;){var i;if(o){if(r>=a.length)break;i=a[r++]}else{if(r=a.next(),r.done)break;i=r.value}var s=i;s.update(e)}t.selectedNode&&(t.infoName.innerHTML=t.selectedNode.name,t.infoValue.innerHTML=t.selectedNode.value),t.isDirty&&(t.isDirty=!1,t.redraw())},this.onCreateNode=function(a){var e=t.factory.nodes.get(a.origin.target.dataset.node);if(e){var o=e();t.add(o)}else console.warn("the node factory doesnt have function for:",a.origin.target.dataset.node)},this.deleteCurrent=function(){if(t.selectedNode){var e=t.selectedNode;t.unselectNode(),t.remove(e),t.isDirty=!0}},this.clearCB=function(){t.clear(),t.afterClear()},this.clear=function(){for(;0<t.nodes.length;){var e=t.nodes.pop();t.dom.removeChild(e.dom),e.dispose()}t.unselectNode(),t.isDirty=!0},this.addNodeButton=function(e,a){var o=Object(s.b)("<div class='btn' data-node='"+a+"'>"+e+"</div>");t.dom.querySelector(".buttons").appendChild(o),l.a.on(o,"down",t.onCreateNode)},this.addButton=function(e,a){var o=Object(s.b)("<div class='btn'>"+e+"</div>");t.dom.querySelector(".buttons").appendChild(o),l.a.on(o,"down",a)},this.save=function(){t._saver.save(t.inputSave.value,t.serialize())},this.load=function(){t._saver.load(t.inputSave.value,(function(e){null!=e&&t.deserialize(e)}))},this.redraw=function(){if(t.context.clearRect(0,0,t.canvas.width,t.canvas.height),t.context.fillStyle="#212121",t.context.strokeStyle="#fff",t.context.fillRect(0,0,t.canvas.width,t.canvas.height),t.currentPlug){t.context.beginPath();var e=t.currentPlugPosition.left+5,a=t.currentPlugPosition.top+5;if(t.context.moveTo(e,a),t.currentTargetPosition){var o=t.currentTargetPosition.left+5,r=t.currentTargetPosition.top+5;t.context.bezierCurveTo(e,(a+r)/2,o,(a+r)/2,o,r)}else{var i=t.currentMouse.x,l=t.currentMouse.y;t.context.bezierCurveTo(e,(a+l)/2,i,(a+l)/2,i,l)}t.context.stroke()}for(var d=0,u=t.nodes,p=Array.isArray(u),c=0,u=p?u:n()(u);;){var m;if(p){if(c>=u.length)break;m=u[c++]}else{if(c=u.next(),c.done)break;m=c.value}for(var f=m,v=f.outputs,g=Array.isArray(v),h=0,v=g?v:n()(v);;){var y;if(g){if(h>=v.length)break;y=v[h++]}else{if(h=v.next(),h.done)break;y=h.value}var b=y;if(b.link){d++;var _=Object(s.a)(b.dom,t.dom),w=Object(s.a)(b.link.in.dom,t.dom),S=_.left+5,M=_.top+5,C=w.left+5,D=w.top+5;t.context.beginPath(),t.context.moveTo(S,M),t.context.bezierCurveTo(S,(M+D)/2,C,(M+D)/2,C,D),t.context.stroke()}}}},this.show=function(){t.dom.classList.contains("hide")&&t.dom.classList.remove("hide")},this.hide=function(){t.dom.classList.contains("hide")||t.dom.classList.add("hide")},this.minimizeToogle=function(){var e=!t.dom.classList.contains("minimize");e?t.dom.classList.add("minimize"):t.dom.classList.remove("minimize"),localStorage.setItem("postfx-minimized",e+"")},this.nodes=[],this.currentTarget=null,this.currentPlug=null,this.currentPlugIsIn=!1,this.dom=Object(s.b)(a(175).default),this.infosEl=this.dom.querySelector(".infos"),this.infoName=this.infosEl.querySelector(".name"),this.infoValue=this.infosEl.querySelector(".value"),this.infosEl.querySelector(".delete").addEventListener("click",this.deleteCurrent),this.dom.querySelector(".minimize").addEventListener("click",this.minimizeToogle),this.inputSave=this.dom.querySelector(".save-input"),this.dom.querySelector(".load").addEventListener("click",this.load),this.dom.querySelector(".save").addEventListener("click",this.save),this.dom.querySelector(".clear").addEventListener("click",this.clearCB),document.body.appendChild(this.dom),this.canvas=this.dom.querySelector("canvas"),this.resize(),this.context=this.canvas.getContext("2d"),this.factory=new p.a,this.isDirty=!0,"true"==localStorage.getItem("postfx-minimized")&&this.dom.classList.add("minimize"),this._saver=new m.a(!0,!0),this.load(),o&&d.a.onUpdate.add(this.update),d.a.onResize.add(this.resize)}return e.prototype.add=function(e){e.parent=this,e.nodePanel=this,0==e.x&&0==e.y&&(e.x=300*Math.random(),e.y=Math.max(10,Math.random()*this.canvas.height-120)),this.dom.appendChild(e.dom),this.nodes.push(e)},e.prototype.remove=function(e){var t=this.nodes.indexOf(e);-1!=t&&(this.dom.removeChild(e.dom),e.dispose(),this.nodes.splice(t,1),this.unselectNode())},e.prototype.selectNode=function(e){this.unselectNode(),this.selectedNode=e,e.dom.classList.add("selected"),this.infosEl.classList.contains("hide")&&this.infosEl.classList.remove("hide")},e.prototype.unselectNode=function(){this.selectedNode&&(this.selectedNode.dom&&this.selectedNode.dom.classList.remove("selected"),this.selectedNode=null,this.infosEl.classList.add("hide"))},e.prototype.afterClear=function(){},e.prototype.buttonJump=function(){this.dom.querySelector(".buttons").appendChild(Object(s.b)("<br/>"))},e.prototype.findPlugOfEl=function(e){for(var t=e.classList.contains("input"),a=null,o=this.nodes,r=Array.isArray(o),i=0,o=r?o:n()(o);;){var s;if(r){if(i>=o.length)break;s=o[i++]}else{if(i=o.next(),i.done)break;s=i.value}var l=s;if(a=l.contains(e,t))break}return a},e.prototype.getNodeById=function(e){for(var t=this.nodes,a=Array.isArray(t),o=0,t=a?t:n()(t);;){var r;if(a){if(o>=t.length)break;r=t[o++]}else{if(o=t.next(),o.done)break;r=o.value}var i=r;if(i.id==e)return i}return null},e})();t.a=v},function(e,t,a){e.exports={default:a(146),__esModule:!0}},function(e,t,a){var o=a(4);e.exports=function(e,t,a){for(var n in t)a&&e[n]?e[n]=t[n]:o(e,n,t[n]);return e}},function(e){e.exports=function(e,t,a,o){if(!(e instanceof t)||o!==void 0&&o in e)throw TypeError(a+": incorrect invocation!");return e}},function(e,t,a){var o=a(12);e.exports=function(e,t){if(!o(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,a){(function(t){function o(e){var t=s(),a=t.filter((function(t){return t.rule&&t.rule.test(e)}))[0];return a?a.name:null}function n(){var e="undefined"==typeof navigator&&"undefined"!=typeof t;return e?{name:"node",version:t.version.slice(1),os:a(164).type().toLowerCase()}:null}function r(e){var t=i();if(!e)return null;var a=t.map((function(t){var a=t.rule.exec(e),o=a&&a[1].split(/[._]/).slice(0,3);return o&&3>o.length&&(o=o.concat(1==o.length?[0,0]:[0])),a&&{name:t.name,version:o.join(".")}})).filter(Boolean)[0]||null;return a&&(a.os=o(e)),a}function i(){return l([["edge",/Edge\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["vivaldi",/Vivaldi\/([0-9\.]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)$/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/]])}function s(){return l([["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/],["Search Bot",/(nuhk)|(Googlebot)|(Yammybot)|(Openbot)|(Slurp)|(MSNBot)|(Ask Jeeves\/Teoma)|(ia_archiver)/]])}function l(e){return e.map((function(e){return{name:e[0],rule:e[1]}}))}e.exports={detect:function(){var e=n();if(e)return e;return"undefined"==typeof navigator?null:r(navigator.userAgent)},detectOS:o,getNodeVersion:n,parseUserAgent:r}}).call(t,a(163))},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=(function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;n()(this,e),this.in=null,this.out=null,t&&t.attachLink(this),a&&a.attachLink(this)}return e.prototype.disconnect=function(){this.in&&this.in.detach(this),this.out&&this.out.detach(this)},e.prototype.serialize=function(){return{inID:this.in.node.id,inSlot:this.in.slot,outID:this.out.node.id,outSlot:this.out.slot}},i()(e,[{key:"value",get:function(){return this.out.value}}]),e})();t.a=s},function(e,t,a){"use strict";var o=Math.abs,n=Math.min,r=Math.max,i=Math.round,s=a(96),l=a.n(s),d=a(0),u=a.n(d),p=a(1),c=a(82),m=a(81),f=a(5);t.a=function e(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,v=this,g=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,h=!(4<arguments.length&&void 0!==arguments[4])||arguments[4];if(u()(this,e),this._onDown=function(t){t.origin.stopPropagation(),v.onStart.dispatch();var e=v.el.getBoundingClientRect();v.containerBB=v.containerEl.getBoundingClientRect(),v.bounding=Object(m.a)(v.el),v.bounding.w=e.width,v.bounding.h=e.height,v.x=v.bounding.left,v.y=v.bounding.top,v.targetX=v.x,v.targetY=v.y,v.el.style.top=0,v.el.style.left=0,v.el.style.transform="translate3d("+v.x+"px,"+v.y+"px,0)",v.autosave(),v.changeCursor&&(v.el.style.cursor="-webkit-grabbing"),c.a.onUp.add(v._onUp),c.a.onMove.add(v._onMove),v.isActive=!0,v.signalUpdate||f.a.onUpdate.add(v.update)},this._onUp=function(t){v.targetX+=t.moveX,v.targetY+=t.moveY,v.changeCursor&&(v.el.style.cursor="-webkit-grab"),0!=v.magnet&&(v.targetX=i(v.targetX/v.magnet)*v.magnet,v.targetY=i(v.targetY/v.magnet)*v.magnet),v.targetX=i(v.targetX),v.targetY=i(v.targetY),v.targetX=r(0,v.targetX),v.targetX=n(v.containerBB.width-v.bounding.w,v.targetX),v.targetY=r(0,v.targetY),v.targetY=n(v.containerBB.height-v.bounding.h,v.targetY),v.autosave(),c.a.onUp.remove(v._onUp),c.a.onMove.remove(v._onMove),v.onEnd.dispatch(),v.isActive=!1},this._onMove=function(t){v.targetX+=t.moveX,v.targetY+=t.moveY,v.autosave()},this.update=function(){v.x+=.33*(v.targetX-v.x),v.y+=.33*(v.targetY-v.y),!v.isActive&&.1>o(v.x-v.targetX)+o(v.y-v.targetY)&&(v.x=v.targetX,v.y=v.targetY,f.a.onUpdate.remove(v.update),v.signalUpdate=!1),v.el.style.transform="translate3d("+v.x+"px,"+v.y+"px,0)",v.onMove.dispatch(v.x,v.y)},this.autosave=function(){v._autosaveID&&localStorage.setItem(v._autosaveID,l()({x:v.targetX,y:v.targetY}))},this.dispose=function(){v.onMove.dispose(),v.onEnd.dispose(),v.onStart.dispose(),c.a.off(v.el,"down",v._onDown),v.el=null},this.onMove=new p.a,this.onEnd=new p.a,this.onStart=new p.a,this.changeCursor=h,this._autosaveID=d,this.magnet=g,this.el=t,this.containerEl=a||t.parentNode,this.targetX=0,this.targetY=0,this.isActive=!1,this.signalUpdate=!1,this.changeCursor&&(this.el.style.cursor="-webkit-grab"),this._autosaveID){var y=localStorage.getItem(d);if(y){var b=JSON.parse(y);this.x=b.x,this.y=b.y,this.el.style.top=0,this.el.style.left=0,this.el.style.transform="translate3d("+this.x+"px,"+this.y+"px,0)"}}c.a.on(t,"down",this._onDown)}},function(e,t,a){"use strict";a.d(t,"b",(function(){return r}));var o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=o.length,r=function(){for(var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:14,t="",a=0;a<e;a++)t+=o[Math.random()*n>>0];return t};t.a={capitalizeFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)},generate:r,getFileNameFromURL:function(e){console.log(e);var t=e.substr(e.lastIndexOf("/")+1);return t=t.substr(0,t.lastIndexOf(".")),t}}},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(5);t.a=function e(t,a){var o=this;n()(this,e),this.onUpdate=function(e){o.time-=e,0>o.time&&(o.callback(),o.time+=o.duration)},this.dispose=function(){a=null,r.a.onUpdate.remove(o.onUpdate)},this.duration=t,this.time=t,this.callback=a,r.a.onUpdate.add(this.onUpdate)}},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(5),l=a(82),d=a(1),u=a(81),p=a(32),c=(function(){function e(t,a){var o=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2],r=this,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"#16a085",u=4<arguments.length&&void 0!==arguments[4]?arguments[4]:"#2ecc71";n()(this,e),this.update=function(){r.isDirty&&(r.isDirty=!1,r.draw())},this.onDown=function(t){t.origin.stopPropagation(),r.x=t.origin.offsetX,r.percent=r.x/r.dom.width,l.a.onMove.add(r.onMove),l.a.onUp.add(r.onUp)},this.onMove=function(t){r.x+=t.moveX,r.percent=r.x/r.dom.width},this.onUp=function(){l.a.onMove.remove(r.onMove),l.a.onUp.remove(r.onUp)},this.dom=document.createElement("canvas"),this.dom.width=t,this.dom.height=a,this.dom.style.width=t+"px",this.dom.style.height=a+"px",this.dom.style.cursor="pointer",this.ctx=this.dom.getContext("2d"),this.isHorizontal=o,this.colorBG=i,this.colorScroll=u,this.onChange=new d.a,this.isDirty=!0,this._percent=0,l.a.on(this.dom,"down",this.onDown),s.a.onUpdate.add(this.update)}return e.prototype.draw=function(){this.ctx.clearRect(0,0,this.dom.width,this.dom.height),this.ctx.fillStyle=this.colorBG,this.ctx.fillRect(0,0,this.dom.width,this.dom.height),this.ctx.fillStyle=this.colorScroll,this.isHorizontal?this.ctx.fillRect(0,0,this.dom.width*this._percent,this.dom.height):this.ctx.fillRect(0,0,this.dom.width,this.dom.height*this._percent)},e.prototype.dispose=function(){this.dom=null,this.ctx=null,this.onChange.dispose(),this.onChange=null,l.a.off(this.dom,"down",this.onDown),l.a.onMove.remove(this.onMove),l.a.onUp.remove(this.onUp)},i()(e,[{key:"percent",set:function(e){e==this._percent||(e=Object(p.a)(e),this._percent=e,this.isDirty=!0,this.onChange.dispatch(e))},get:function(){return this._percent}}]),e})();t.a=c},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(5),i=new function e(){var t=this,a=!(0<arguments.length&&arguments[0]!==void 0)||arguments[0];n()(this,e),this.to=function(e){t.nextScene=e,t.currentScene?t.currentScene.transitionOut():t.onTransitionOutComplete()},this.update=function(e){t.currentScene&&t.currentScene.update(e)},this.onTransitionOutComplete=function(){t.currentScene=t.nextScene,t.debug&&console.log("travel to :",t.currentScene.name),t.currentScene.transitionIn&&t.currentScene.transitionIn()},this.resize=function(){t.currentScene&&t.currentScene.resize&&t.currentScene.resize(),t.nextScene&&t.nextScene.resize&&t.nextScene.resize()},this.debug=a,this.currentScene=null,this.nextScene=null,r.a.onUpdate.add(this.update),r.a.onResize.add(this.resize)};t.a=i},function(e,t,a){"use strict";function o(e,t,a){return(255*e<<16)+(255*t<<8)+255*a}function n(e,t,a){return"#"+(16777216+(e<<16)+(t<<8)+a).toString(16).slice(1)}function r(){var e=0<arguments.length&&arguments[0]!==void 0?arguments[0]:{},t=e.hue,a=t===void 0?255*Math.random():t,o=e.sat,n=o===void 0?255*Math.random():o,r=e.lum,i=r===void 0?255*Math.random():r;return{h:a,s:n,l:i,string:"hsl( "+a+", "+n+"%, "+i+"% )"}}function i(e,a,o){return 0>o&&(o+=1),1<o&&(o-=1),o<1/6?e+6*(a-e)*o:o<1/2?a:o<2/3?e+6*((a-e)*(2/3-o)):e}var s=Math.round;a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return r}))},function(e,t,a){"use strict";var o=Math.sin,n=Math.cos,r=Math.PI;(function(e){var i=a(87),s=a.n(i),l=a(0),d=a.n(l),u=a(77),p=a.n(u),c=a(75),m=a.n(c),f=a(76),v=a.n(f),g=a(5),h=a(79),y=a(297),b=a(298),_=a(299),w=a(300),S=(function(t){function i(o,n,r,l){d()(this,i),r=r||_,l=l||w;var u=Object(b.a)(o*n),p=u.width,c=u.height,f=p*c,v=new Float32Array(4*f),g=new e.DataTexture(v,p,c,e.RGBAFormat,e.FloatType,e.UVMapping,e.RepeatWrapping,e.RepeatWrapping,e.NearestFilter,e.NearestFilter,0);g.needsUpdate=!0,g.generateMipmaps=!1;var S=new y.a(o,n,p,c),M=new e.RawShaderMaterial({vertexShader:r,fragmentShader:l,uniforms:{positions:{type:"t",value:g},lineWidth:{type:"f",value:.1},alphaTest:{type:"f",value:.01},resolution:{type:"v2",value:h.a.resolution},opacity:{type:"f",value:1},growSide:{type:"v2",value:new e.Vector2(0,1)}},depthTest:!0,depthWrite:!0,transparent:!0}),C=new e.ShaderMaterial({vertexShader:a(301),fragmentShader:a(302),uniforms:s()({},M.uniforms)}),D=m()(this,t.call(this,S,M));return D.linesCount=o,D.lineDivision=n,D.texture=g,D.widthTexture=p,D.heightTexture=c,D.sizeTexture=f,D.castShadow=!1,D.frustumCulled=!1,D.customDepthMaterial=C,D}return v()(i,t),i.prototype.toCircle=function(){for(var e=0,t=this.lineDivision-1,a=0;a<this.linesCount;a+=1)for(var i=0,s;i<this.lineDivision;i++)s=i/t*(2*r),this.texture.image.data[e]=10*n(s),this.texture.image.data[e+1]=20*(a/this.linesCount)-10,this.texture.image.data[e+2]=10*o(s),this.texture.image.data[e+3]=1,e+=4;this.texture.needsUpdate=!0},i.prototype.toCircle2=function(){for(var e=0,t=this.linesCount*this.lineDivision,a=[],s=0,l=0,i;10>l;l+=1){i=Math.floor(10*Math.random()+4),s+=i,a.push(i);for(var d=0,u;d<i;d++)u=d/(i-1)*(2*r),this.texture.image.data[e]=10*n(u),this.texture.image.data[e+1]=50*(l/10)-25,this.texture.image.data[e+2]=10*o(u),this.texture.image.data[e+3]=1,e+=4}this.geometry.updateSizes(a,s),this.texture.needsUpdate=!0},i.prototype.toLine=function(){for(var e=0,t=this.lineDivision-1,a=0;a<this.linesCount;a++)for(var o=0;o<this.lineDivision;o++)this.texture.image.data[e]=-5+10*(o/this.lineDivision),this.texture.image.data[e+1]=.3*(a/this.linesCount*this.linesCount-this.linesCount/2),this.texture.image.data[e+2]=0,this.texture.image.data[e+3]=1,e+=4;this.texture.needsUpdate=!0},p()(i,[{key:"lineWidth",get:function(){return this.material.uniforms.lineWidth.value},set:function(e){this.material.uniforms.lineWidth.value=e}}]),i})(e.Mesh);t.a=S}).call(t,a(28))},function(e){e.exports="varying vec2 vUv;\nuniform sampler2D t_pos;\n\nvoid main() {\n\tgl_FragColor = texture2D( t_pos, vUv );\n}\n"},function(e,t,a){e.exports={default:a(120),__esModule:!0}},function(e,t,a){a(121);var o=a(10).Object;e.exports=function(e,t,a){return o.defineProperty(e,t,a)}},function(e,t,a){var o=a(31);o(o.S+o.F*!a(6),"Object",{defineProperty:a(11).f})},function(e,t,a){"use strict";(function(e){var o=a(87),n=a.n(o),r=a(0),i=a.n(r),s=a(126),l=(function(){function t(a){var o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};i()(this,t);var r={minFilter:e.NearestFilter,magFilter:e.NearestFilter,wrapS:e.ClampToEdgeWrapping,wrapT:e.ClampToEdgeWrapping,format:e.RGBFormat,type:e.UnsignedByteType,stencilBuffer:!1};n()(r,o),this.renderer=a,this.rt0=new e.WebGLRenderTarget(1,1,r),this.rt1=this.rt0.clone(),this.rt2=this.rt1.clone(),this.reset(),this.scene=new e.Scene,this.camera=new e.OrthographicCamera(1,1,1,1,-1,1),this.quad=new e.Mesh(new e.PlaneBufferGeometry(1,1)),this.scene.add(this.quad),this.copyPass=new s.a,this.firstPass=!0,this.depthTexture=new e.DepthTexture,this.depthTexture.type=e.UnsignedIntType}return t.prototype.render=function(e,t,a){var o=!(3<arguments.length&&void 0!==arguments[3])||arguments[3];a=a?a:this.rt0,a.depthBuffer=o,a.depthTexture=this.depthTexture,this.renderer.render(e,t,a,!0),this.swapBuffers()},t.prototype.pass=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,a=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];e.enabled&&(this.quad.material=e.material,this.quad.material.uniforms.tInput.value=(this.firstPass?this.rt0:this.in).texture,this.firstPass&&(this.firstPass=!1),this.quad.material.uniforms.tDepth&&(this.quad.material.uniforms.tDepth.value=this.depthTexture),this.quad.material.uniforms.resolution.value.set(this.width,this.height),a?(this.renderer.render(this.scene,this.camera),this.reset()):t?this.renderer.render(this.scene,this.camera,t,!1):(this.renderer.render(this.scene,this.camera,this.out,!1),this.swapBuffers()))},t.prototype.toScreen=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;this.pass(null==e?this.copyPass:e,t,!0)},t.prototype.swapBuffers=function(){var e=this.in;this.in=this.out,this.out=e},t.prototype.setSize=function(e,t){this.width=e,this.height=t,this.camera.projectionMatrix.makeOrthographic(e/-2,e/2,t/2,t/-2,this.camera.near,this.camera.far),this.quad.scale.set(e,t,1),this.rt1.setSize(e,t),this.rt2.setSize(e,t),this.rt0.setSize(e,t)},t.prototype.reset=function(){this.firstPass=!0,this.out=this.rt1,this.in=this.rt2},t})();t.a=l}).call(t,a(28))},function(e,t,a){a(124),e.exports=a(10).Object.assign},function(e,t,a){var o=a(31);o(o.S+o.F,"Object",{assign:a(125)})},function(e,t,a){"use strict";var o=a(34),n=a(91),r=a(89),i=a(36),s=a(39),l=Object.assign;e.exports=!l||a(18)((function(){var e={},t={},a=Symbol(),o="abcdefghijklmnopqrst";return e[a]=7,o.split("").forEach((function(e){t[e]=e})),7!=l({},e)[a]||Object.keys(l({},t)).join("")!=o}))?function(e){for(var t=i(e),a=arguments.length,l=1,d=n.f,u=r.f;a>l;)for(var p=s(arguments[l++]),c=d?o(p).concat(d(p)):o(p),m=c.length,f=0,v;m>f;)u.call(p,v=c[f++])&&(t[v]=p[v]);return t}:l},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(80),u=(function(e){function t(){return n()(this,t),i()(this,e.call(this,"CopyPass",a(144)))}return l()(t,e),t})(d.a);t.a=u},function(e,t,a){e.exports={default:a(128),__esModule:!0}},function(e,t,a){a(43),a(38),e.exports=a(93).f("iterator")},function(e,t,a){e.exports={default:a(130),__esModule:!0}},function(e,t,a){a(131),a(103),a(134),a(135),e.exports=a(10).Symbol},function(e,t,a){"use strict";var o=a(3),n=a(8),r=a(6),i=a(31),s=a(48),l=a(94).KEY,d=a(18),u=a(25),p=a(22),c=a(21),m=a(2),f=a(93),v=a(95),g=a(132),h=a(100),y=a(7),b=a(13),_=a(41),w=a(20),S=a(35),M=a(133),C=a(102),D=a(11),P=a(34),I=C.f,A=D.f,z=M.f,T=o.Symbol,U=o.JSON,O=U&&U.stringify,E="prototype",L=m("_hidden"),F=m("toPrimitive"),B={}.propertyIsEnumerable,N=u("symbol-registry"),R=u("symbols"),H=u("op-symbols"),V=Object[E],W="function"==typeof T,Y=o.QObject,G=!Y||!Y[E]||!Y[E].findChild,q=r&&d((function(){return 7!=S(A({},"a",{get:function(){return A(this,"a",{value:7}).a}})).a}))?function(e,t,a){var o=I(V,t);o&&delete V[t],A(e,t,a),o&&e!==V&&A(V,t,o)}:A,X=function(e){var t=R[e]=S(T[E]);return t._k=e,t},$=W&&"symbol"==typeof T.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof T},K=function(e,t,a){return e===V&&K(H,t,a),y(e),t=_(t,!0),y(a),n(R,t)?(a.enumerable?(n(e,L)&&e[L][t]&&(e[L][t]=!1),a=S(a,{enumerable:w(0,!1)})):(!n(e,L)&&A(e,L,w(1,{})),e[L][t]=!0),q(e,t,a)):A(e,t,a)},Z=function(e,t){y(e);for(var a=g(t=b(t)),o=0,n=a.length,r;n>o;)K(e,r=a[o++],t[r]);return e},J=function(e){var t=B.call(this,e=_(e,!0));return(this!==V||!n(R,e)||n(H,e))&&(!(t||!n(this,e)||!n(R,e)||n(this,L)&&this[L][e])||t)},Q=function(e,t){if(e=b(e),t=_(t,!0),e!==V||!n(R,t)||n(H,t)){var a=I(e,t);return a&&n(R,t)&&!(n(e,L)&&e[L][t])&&(a.enumerable=!0),a}},ee=function(e){for(var t=z(b(e)),a=[],o=0,r;t.length>o;)n(R,r=t[o++])||r==L||r==l||a.push(r);return a},te=function(e){for(var t=e===V,a=z(t?H:b(e)),o=[],r=0,i;a.length>r;)n(R,i=a[r++])&&(!t||n(V,i))&&o.push(R[i]);return o};W||(T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var e=c(0<arguments.length?arguments[0]:void 0),t=function(a){this===V&&t.call(H,a),n(this,L)&&n(this[L],e)&&(this[L][e]=!1),q(this,e,w(1,a))};return r&&G&&q(V,e,{configurable:!0,set:t}),X(e)},s(T[E],"toString",(function(){return this._k})),C.f=Q,D.f=K,a(101).f=M.f=ee,a(89).f=J,a(91).f=te,r&&!a(40)&&s(V,"propertyIsEnumerable",J,!0),f.f=function(e){return X(m(e))}),i(i.G+i.W+i.F*!W,{Symbol:T});for(var ae=["hasInstance","isConcatSpreadable","iterator","match","replace","search","species","split","toPrimitive","toStringTag","unscopables"],oe=0;ae.length>oe;)m(ae[oe++]);for(var j=P(m.store),ne=0;j.length>ne;)v(j[ne++]);i(i.S+i.F*!W,"Symbol",{for:function(e){return n(N,e+="")?N[e]:N[e]=T(e)},keyFor:function(e){if(!$(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){G=!0},useSimple:function(){G=!1}}),i(i.S+i.F*!W,"Object",{create:function(e,t){return t===void 0?S(e):Z(S(e),t)},defineProperty:K,defineProperties:Z,getOwnPropertyDescriptor:Q,getOwnPropertyNames:ee,getOwnPropertySymbols:te}),U&&i(i.S+i.F*(!W||d((function(){var e=T();return"[null]"!=O([e])||"{}"!=O({a:e})||"{}"!=O(Object(e))}))),"JSON",{stringify:function(e){if(!(void 0===e||$(e))){for(var t=[e],a=1,o,n;arguments.length>a;)t.push(arguments[a++]);return o=t[1],"function"==typeof o&&(n=o),(n||!h(o))&&(o=function(e,t){if(n&&(t=n.call(this,e,t)),!$(t))return t}),t[1]=o,O.apply(U,t)}}}),T[E][F]||a(4)(T[E],F,T[E].valueOf),p(T,"Symbol"),p(Math,"Math",!0),p(o.JSON,"JSON",!0)},function(e,t,a){var o=a(34),n=a(91),r=a(89);e.exports=function(e){var t=o(e),a=n.f;if(a)for(var s=a(e),l=r.f,d=0,i;s.length>d;)l.call(e,i=s[d++])&&t.push(i);return t}},function(e,t,a){var o=a(13),n=a(101).f,r={}.toString,i="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return n(e)}catch(t){return i.slice()}};e.exports.f=function(e){return i&&"[object Window]"==r.call(e)?s(e):n(o(e))}},function(e,t,a){a(95)("asyncIterator")},function(e,t,a){a(95)("observable")},function(e,t,a){e.exports={default:a(137),__esModule:!0}},function(e,t,a){a(138),e.exports=a(10).Object.setPrototypeOf},function(e,t,a){var o=a(31);o(o.S,"Object",{setPrototypeOf:a(139).set})},function(e,t,a){var o=a(12),n=a(7),r=function(e,t){if(n(e),!o(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?(function(e,t,o){try{o=a(33)(Function.call,a(102).f(Object.prototype,"__proto__").set,2),o(e,[]),t=!(e instanceof Array)}catch(a){t=!0}return function(e,a){return r(e,a),t?e.__proto__=a:o(e,a),e}})({},!1):void 0),check:r}},function(e,t,a){e.exports={default:a(141),__esModule:!0}},function(e,t,a){a(142);var o=a(10).Object;e.exports=function(e,t){return o.create(e,t)}},function(e,t,a){var o=a(31);o(o.S,"Object",{create:a(35)})},function(e,t,a){"use strict";t.__esModule=!0;var o=a(87),n=(function(e){return e&&e.__esModule?e:{default:e}})(o);t.default=n.default||function(e){for(var t=1,a;t<arguments.length;t++)for(var o in a=arguments[t],a)Object.prototype.hasOwnProperty.call(a,o)&&(e[o]=a[o]);return e}},function(e){e.exports="varying vec2 vUv;\nuniform sampler2D tInput;\n\nvoid main() {\n\tgl_FragColor = texture2D(tInput, vUv);\n\n\t// gl_FragColor = vec4(vec3(vUv.y), 1.);\n}"},function(e,t,a){"use strict";var o=a(17),r=a.n(o),n=a(0),i=a.n(n),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(5),c=a(79),m=a(104),f=a(110),v=a(176),g=a(85),h=a(181),y=a(182),b=a(183),_=a(184),w=a(185),S=a(186),M=a(187),C=a(188),D=a(189),k=a(190),P=a(191),I=a(193),A=a(194),z=a(197),T=a(200),U=a(203),O=a(206),E=a(209),L=a(212),F=a(215),B=a(218),N=a(224),R=a(227),H=a(230),V=(function(e){function t(){i()(this,t);var a=l()(this,e.call(this));return a.update=function(){c.a.clearPass();for(var e=a.toScreen.getParentNodes().reverse(),t=e,o=Array.isArray(t),n=0,t=o?t:r()(t);;){var i;if(o){if(n>=t.length)break;i=t[n++]}else{if(n=t.next(),n.done)break;i=n.value}var s=i;s.isPostfxNode&&c.a.addPass(s.pass)}for(var l=a.nodes,d=Array.isArray(l),u=0,l=d?l:r()(l);;){var p;if(d){if(u>=l.length)break;p=l[u++]}else{if(u=l.next(),u.done)break;p=u.value}var m=p;m.isPlugDirty=!1}},a.afterClear=function(){a.toScreen=new I.a,a.add(a.toScreen)},a.toScreen=new I.a,a.add(a.toScreen),a.factory.add("sepia",(function(){return new F.a})),a.factory.add("vignette",(function(){return new H.a})),a.factory.add("noise",(function(){return new L.a})),a.factory.add("ssao",(function(){return new B.a})),a.factory.add("fxaa",(function(){return new A.a})),a.factory.add("depth",(function(){return new N.a})),a.factory.add("bw",(function(){return new z.a})),a.factory.add("bloom",(function(){return new R.a})),a.factory.add("contrast",(function(){return new E.a})),a.factory.add("gamma",(function(){return new T.a})),a.factory.add("brightness",(function(){return new U.a})),a.factory.add("invert",(function(){return new O.a})),a.factory.add("random",(function(){return new v.a})),a.factory.add("slider",(function(){return new g.a})),a.factory.add("x",(function(){return new y.a})),a.factory.add("+",(function(){return new M.a})),a.factory.add("-",(function(){return new C.a})),a.factory.add(">",(function(){return new _.a})),a.factory.add(">=",(function(){return new w.a})),a.factory.add("/",(function(){return new b.a})),a.factory.add("n",(function(){return new k.a})),a.factory.add("switch",(function(){return new S.a})),a.factory.add("clamp",(function(){return new D.a})),a.factory.add("volume",(function(){return new h.a})),a.factory.add("compute",(function(){return new P.a})),a.addNodeButton("FXAA","fxaa"),a.addNodeButton("Noise","noise"),a.addNodeButton("SSAO","ssao"),a.addNodeButton("Sepia","sepia"),a.addNodeButton("Vignette","vignette"),a.addNodeButton("Depth","depth"),a.addNodeButton("BW","bw"),a.addNodeButton("Bloom","bloom"),a.addNodeButton("Invert","invert"),a.addNodeButton("Brightness","brightness"),a.addNodeButton("Gamma","gamma"),a.addNodeButton("Contrast","contrast"),a.buttonJump(),a.addNodeButton("+","+"),a.addNodeButton("-","-"),a.addNodeButton("x","x"),a.addNodeButton("/","/"),a.addNodeButton(">",">"),a.addNodeButton(">=",">="),a.buttonJump(),a.addNodeButton("number","n"),a.addNodeButton("random","random"),a.addNodeButton("slider","slider"),a.addNodeButton("clamp","clamp"),a.addNodeButton("switch","switch"),a.buttonJump(),a.addNodeButton("Volume","volume"),a.addNodeButton("Compute","compute"),a.buttonJump(),p.a.onUpdate.add(a.update),a}return u()(t,e),t.prototype.serialize=function(){for(var e={nodes:[],links:[]},t=this.nodes,a=Array.isArray(t),o=0,t=a?t:r()(t);;){var n;if(a){if(o>=t.length)break;n=t[o++]}else{if(o=t.next(),o.done)break;n=o.value}var i=n;e.nodes.push(i.serialize());for(var s=i.getLinks(),d=s,u=Array.isArray(d),p=0,d=u?d:r()(d);;){var c;if(u){if(p>=d.length)break;c=d[p++]}else{if(p=d.next(),p.done)break;c=p.value}for(var m=c,f=!1,v=e.links,g=Array.isArray(v),h=0,v=g?v:r()(v);;){var y;if(g){if(h>=v.length)break;y=v[h++]}else{if(h=v.next(),h.done)break;y=h.value}var b=y;if(b.inID==m.inID&&b.outID==m.outID){f=!0;break}}f||e.links.push(m.serialize())}}return e},t.prototype.deserialize=function(e){this.clear();for(var t=e.nodes,a=Array.isArray(t),o=0,t=a?t:r()(t);;){var i;if(a){if(o>=t.length)break;i=t[o++]}else{if(o=t.next(),o.done)break;i=o.value}var s=i,l=null;switch(s.type){default:console.log("node not recognized:",s.type,s);break;case"compute":l=P.a.deserialize(s);break;case"toScreen":l=I.a.deserialize(s),this.toScreen=l;break;case"fxaa":l=A.a.deserialize(s);break;case"vignette":l=H.a.deserialize(s);break;case"noise":l=L.a.deserialize(s);break;case"ssao":l=B.a.deserialize(s);break;case"sepia":l=F.a.deserialize(s);break;case"depth":l=N.a.deserialize(s);break;case"bw":l=z.a.deserialize(s);break;case"bloom":l=R.a.deserialize(s);break;case"gamma":l=T.a.deserialize(s);break;case"brightness":l=U.a.deserialize(s);break;case"contrast":l=E.a.deserialize(s);break;case"invert":l=O.a.deserialize(s);break;case"+":l=M.a.deserialize(s);break;case"-":l=C.a.deserialize(s);break;case"x":l=y.a.deserialize(s);break;case"/":l=b.a.deserialize(s);break;case">":l=_.a.deserialize(s);break;case">=":l=w.a.deserialize(s);break;case"n":l=k.a.deserialize(s);break;case"random":l=v.a.deserialize(s);break;case"slider":l=g.a.deserialize(s);break;case"switch":l=S.a.deserialize(s);break;case"clamp":l=D.a.deserialize(s);break;case"volume":l=h.a.deserialize(s);}l&&this.add(l)}for(var n=e.links,d=Array.isArray(n),u=0,n=d?n:r()(n);;){var p;if(d){if(u>=n.length)break;p=n[u++]}else{if(u=n.next(),u.done)break;p=u.value}var c=p,m=this.getNodeById(c.inID).inputs[c.inSlot],V=this.getNodeById(c.outID).outputs[c.outSlot];new f.a(m,V)}},t})(m.a);t.a=V},function(e,t,a){a(103),a(43),a(38),a(147),a(156),a(159),a(161),e.exports=a(10).Map},function(e,t,a){"use strict";var o=a(148),n=a(108),r="Map";e.exports=a(152)(r,(function(e){return function(){return e(this,0<arguments.length?arguments[0]:void 0)}}),{get:function(e){var t=o.getEntry(n(this,r),e);return t&&t.v},set:function(e,t){return o.def(n(this,r),0===e?0:e,t)}},o,!0)},function(e,t,a){"use strict";var o=a(11).f,n=a(35),r=a(106),i=a(33),s=a(107),l=a(90),d=a(24),u=a(45),p=a(151),c=a(6),m=a(94).fastKey,v=a(108),f=c?"_s":"size",g=function(e,t){var a=m(t),o;if("F"!==a)return e._i[a];for(o=e._f;o;o=o.n)if(o.k==t)return o};e.exports={getConstructor:function(e,t,a,d){var u=e((function(e,o){s(e,u,t,"_i"),e._t=t,e._i=n(null),e._f=void 0,e._l=void 0,e[f]=0,void 0!=o&&l(o,a,e[d],e)}));return r(u.prototype,{clear:function(){for(var e=v(this,t),a=e._i,o=e._f;o;o=o.n)o.r=!0,o.p&&(o.p=o.p.n=void 0),delete a[o.i];e._f=e._l=void 0,e[f]=0},delete:function(e){var a=v(this,t),o=g(a,e);if(o){var n=o.n,r=o.p;delete a._i[o.i],o.r=!0,r&&(r.n=n),n&&(n.p=r),a._f==o&&(a._f=n),a._l==o&&(a._l=r),a[f]--}return!!o},forEach:function(e){v(this,t);for(var a=i(e,1<arguments.length?arguments[1]:void 0,3),o;o=o?o.n:this._f;)for(a(o.v,o.k,this);o&&o.r;)o=o.p},has:function(e){return!!g(v(this,t),e)}}),c&&o(u.prototype,"size",{get:function(){return v(this,t)[f]}}),u},def:function(e,t,a){var o=g(e,t),n,r;return o?o.v=a:(e._l=o={i:r=m(t,!0),k:t,v:a,p:n=e._l,n:void 0,r:!1},!e._f&&(e._f=o),n&&(n.n=o),e[f]++,"F"!==r&&(e._i[r]=o)),e},getEntry:g,setStrong:function(e,t,a){d(e,t,(function(e,a){this._t=v(e,t),this._k=a,this._l=void 0}),(function(){for(var e=this,t=e._k,a=e._l;a&&a.r;)a=a.p;return e._t&&(e._l=a=a?a.n:e._t._f)?"keys"==t?u(0,a.k):"values"==t?u(0,a.v):u(0,[a.k,a.v]):(e._t=void 0,u(1))}),a?"entries":"values",!a,!0),p(t)}}},function(e,t,a){var o=a(7);e.exports=function(t,e,a,n){try{return n?e(o(a)[0],a[1]):e(a)}catch(a){var r=t["return"];throw void 0!==r&&o(r.call(t)),a}}},function(e,t,a){var o=a(9),n=a(2)("iterator"),r=Array.prototype;e.exports=function(e){return e!==void 0&&(o.Array===e||r[n]===e)}},function(e,t,a){"use strict";var o=a(3),n=a(10),r=a(11),i=a(6),s=a(2)("species");e.exports=function(e){var t="function"==typeof n[e]?n[e]:o[e];i&&t&&!t[s]&&r.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,a){"use strict";var o=a(3),n=a(31),r=a(94),i=a(18),s=a(4),l=a(106),d=a(90),u=a(107),p=a(12),c=a(22),m=a(11).f,f=a(153)(0),v=a(6);e.exports=function(e,t,a,g,h,y){var b=o[e],_=b,w=h?"set":"add",S=_&&_.prototype,M={};return v&&"function"==typeof _&&(y||S.forEach&&!i((function(){new _().entries().next()})))?(_=t((function(t,a){u(t,_,e,"_c"),t._c=new b,void 0!=a&&d(a,h,t[w],t)})),f(["add","clear","delete","forEach","get","has","set","keys","values","entries","toJSON"],(function(e){var t="add"==e||"set"==e;e in S&&!(y&&"clear"==e)&&s(_.prototype,e,(function(o,a){if(u(this,_,e),t||!y||p(o)){var n=this._c[e](0===o?0:o,a);return t?this:n}}))})),y||m(_.prototype,"size",{get:function(){return this._c.size}})):(_=g.getConstructor(t,e,h,w),l(_.prototype,a),r.NEED=!0),c(_,e),M[e]=_,n(n.G+n.W+n.F,M),y||g.setStrong(_,e,h),_}},function(e,t,a){var o=a(33),n=a(39),r=a(36),i=a(42),s=a(154);e.exports=function(e,t){var a=1==e,l=4==e,d=6==e,u=t||s;return function(t,s,p){for(var c=r(t),m=n(c),v=o(s,p,3),f=i(m.length),g=0,h=a?u(t,f):2==e?u(t,0):void 0,y,b;f>g;g++)if((5==e||d||g in m)&&(y=m[g],b=v(y,g,c),e))if(a)h[g]=b;else if(b)switch(e){case 3:return!0;case 5:return y;case 6:return g;case 2:h.push(y);}else if(l)return!1;return d?-1:3==e||l?l:h}}},function(e,t,a){var o=a(155);e.exports=function(e,t){return new(o(e))(t)}},function(e,t,a){var o=a(12),n=a(100),r=a(2)("species");e.exports=function(e){var t;return n(e)&&(t=e.constructor,"function"==typeof t&&(t===Array||n(t.prototype))&&(t=void 0),o(t)&&(t=t[r],null===t&&(t=void 0))),void 0===t?Array:t}},function(e,t,a){var o=a(31);o(o.P+o.R,"Map",{toJSON:a(157)("Map")})},function(e,t,a){var o=a(51),n=a(158);e.exports=function(e){return function(){if(o(this)!=e)throw TypeError(e+"#toJSON isn't generic");return n(this)}}},function(e,t,a){var o=a(90);e.exports=function(e,t){var a=[];return o(e,!1,a.push,a,t),a}},function(e,t,a){a(160)("Map")},function(e,t,a){"use strict";var o=a(31);e.exports=function(e){o(o.S,e,{of:function(){for(var e=arguments.length,t=Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,a){a(162)("Map")},function(e,t,a){"use strict";var o=a(31),r=a(46),i=a(33),s=a(90);e.exports=function(e){o(o.S,e,{from:function(e){var t=arguments[1],a,o,l,n;return(r(this),a=void 0!==t,a&&r(t),void 0==e)?new this:(o=[],a?(l=0,n=i(t,arguments[2],2),s(e,!1,(function(e){o.push(n(e,l++))}))):s(e,!1,o.push,o),new this(o))}})}},function(e){function t(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===t||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(t){try{return u.call(null,e,0)}catch(t){return u.call(this,e,0)}}}function n(e){if(p===clearTimeout)return clearTimeout(e);if((p===a||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(t){try{return p.call(null,e)}catch(t){return p.call(this,e)}}}function r(){m&&v&&(m=!1,v.length?c=v.concat(c):f=-1,c.length&&s())}function s(){if(!m){var e=o(r);m=!0;for(var t=c.length;t;){for(v=c,c=[];++f<t;)v&&v[f].run();f=-1,t=c.length}v=null,m=!1,n(e)}}function l(e,t){this.fun=e,this.array=t}function i(){}var d=e.exports={},u,p;(function(){try{u="function"==typeof setTimeout?setTimeout:t}catch(a){u=t}try{p="function"==typeof clearTimeout?clearTimeout:a}catch(t){p=a}})();var c=[],m=!1,f=-1,v;d.nextTick=function(e){var t=Array(arguments.length-1);if(1<arguments.length)for(var a=1;a<arguments.length;a++)t[a-1]=arguments[a];c.push(new l(e,t)),1!==c.length||m||o(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=i,d.addListener=i,d.once=i,d.off=i,d.removeListener=i,d.removeAllListeners=i,d.emit=i,d.prependListener=i,d.prependOnceListener=i,d.listeners=function(){return[]},d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(e,t){var a=Number.MAX_VALUE;t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"==typeof location?"":location.hostname},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return a},t.totalmem=function(){return a},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"==typeof navigator?"":navigator.appVersion},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},function(e,t,a){"use strict";var o=a(105),n=a.n(o),r=a(0),i=a.n(r),s=(function(){function e(){i()(this,e),this.nodes=new n.a}return e.prototype.add=function(e,t){this.nodes.set(e,t)},e})();t.a=s},function(e,t,a){var o=a(10),n=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(){return n.stringify.apply(n,arguments)}},function(e,t,a){"use strict";var o=a(96),n=a.n(o),r=a(0),i=a.n(r),s=a(168),l=a(113),d=a(1),u="color: #333366; font-weight: bold; font-size:10px; line-height:8px;",p=(function(){function e(){var t=this,a=!(0<arguments.length&&void 0!==arguments[0])||arguments[0],o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];i()(this,e),this.load=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;if(t.log("%c[save]loading: "+e,u),t.saveID=e||t.saveID,a&&t.onLoad.addOnce(a),t.saveWebsocket&&(t.isConnected||t.isConnecting))t.isConnected?t.client.send(null,"get",t.saveID):t.log("%c[save]load put on queue while connecting",u);else{t.log("%c[save]loaded from localStorage",u);var o=localStorage.getItem(e);if(!o||"undefined"===o)return void t.log("%c[save]localStorage empty",u);t.onLoad.dispatch(JSON.parse(o))}},this.save=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,a=arguments[1],o=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];t.log("%c[save]saving request: "+e,u),t.saveID=e||t.saveID,t.object=a,o?(t.isDirty=!1,t._save()):t.isDirty=!0},this._save=function(){t.log("%c[save]saving: "+t.saveID,u);var e=n()(t.object);t.isConnected&&(t.log("%c[save]socket sent to the server",u),t.client.send(e,"save",t.saveID)),t.saveLocal&&(t.log("%c[save]saved locally",u),localStorage.setItem(t.saveID,e),!t.saveWebsocket&&t.onSaveSuccess.dispatch())},this._onMessage=function(e){switch(e){case"success":t.log("%c[save]saved on server success",u),t.onSaveSuccess.dispatch();break;case"fail":t.log("%c[save]fail",u),t.onSaveError.dispatch();break;case"noSave":t.log("%c[save]no save found on the server",u);var a=localStorage.getItem(t.saveID);if(t.saveLocal&&a&&"undefined"!=typeof a){t.log("%c[save]local save found",u),t.log("%c[save]local save sync with the server",u),t.log(a);var n=JSON.parse(a);t.save(t.saveID,n,!0),t.onLoad.dispatch(n)}else t.onLoad.dispatch(null);break;case"undefined":t.log("%c[save]Message undefined, an error probably happen during the save of"+t.saveID,u),t.onLoad.dispatch({});break;default:t.log("%c[save]save received",u),t.onLoad.dispatch(JSON.parse(e));}},this._onClose=function(){t.log("%c[save]connection closed, save on localstore",u),t.isConnected=!1,t.isConnecting=!1,t.saveWebsocket=!1,t._checkQueue()},this._onConnect=function(){t.log("%c[save]connected",u),t.isConnected=!0,t.isConnecting=!1,t._checkQueue(),t.onConnect.dispatch()},this._onError=function(){t.isConnecting=!1,t.saveWebsocket=!1,t.log("%c[save]connection to the node server fail",u)},this._checkQueue=function(){t.saveID&&(t.log("%c[save]load queue detected",u),t.load(t.saveID))},this.saveWebsocket=a,this.saveLocal=o,this.saveID=null,this.object=null,this.isConnected=!1,this.isConnecting=!1,this.isDirty=!1,this.debug=!0,this.loadQueue=[],this.onLoad=new d.a,this.onConnect=new d.a,this.onSaveSuccess=new d.a,this.onSaveError=new d.a,this.onStorageUpdate=new d.a,this.tick=new l.a(32,function(){t.isDirty&&!t.isConnecting&&(t._save(),t.isDirty=!1)}),a&&(this.log("%c[save]connecting",u),this.client=new s.a("127.0.0.1",1400,!1),this.client.onMessage.add(this._onMessage),this.client.onConnect.add(this._onConnect),this.client.onClose.add(this._onClose),this.client.onError.add(this._onError),this.isConnecting=!0,this.client.connect()),this.saveLocal&&window.addEventListener("storage",(function(a){t.log("%c[save]localStorage updated in other window ",u),t.onStorageUpdate.dispatch(JSON.parse(a.newValue))}),!1)}return e.prototype.log=function(e,t){this.debug&&console.log(e,t)},e})();t.a=p},function(e,t,a){"use strict";var o=a(96),n=a.n(o),r=a(0),i=a.n(r),s=a(1),l=a(112),d=a(169).w3cwebsocket,u=(function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"127.0.0.1",a=this,o=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1400,n=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];i()(this,e),this._onError=function(t){a.log("connectionError:",t),a.onError.dispatch(t)},this._onOpen=function(){a.debug&&a.log("connected"),a.onConnect.dispatch()},this._onClose=function(){a.log("connectionClosed"),a.onClose.dispatch()},this._onMessage=function(t){var e=null;e="string"==typeof t.data?t.data:JSON.parse(t.data),a.log("received:",e),a.onMessage.dispatch(e)},this.url="ws://"+t+":"+o,this.uid=l.a.generate(32),this.type="",this.debug=n,this.onConnect=new s.a,this.onError=new s.a,this.onClose=new s.a,this.onMessage=new s.a}return e.prototype.connect=function(){this.websocket=new d(this.url,"echo-protocol"),this.websocket.onerror=this._onError,this.websocket.onopen=this._onOpen,this.websocket.onclose=this._onClose,this.websocket.onmessage=this._onMessage},e.prototype.sendJson=function(e){this.websocket.send(e)},e.prototype.sendFast=function(e){this.websocket.send(e)},e.prototype.send=function(e,t){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,r=n()({msg:e,type:t,params:a});this.websocket.send(r)},e.prototype.log=function(e){this.debug&&console.log("ws."+e)},e})();t.a=u},function(e,t,a){function o(e,t){var a;return a=t?new r(e,t):new r(e),a}var n=(function(){return this})(),r=n.WebSocket||n.MozWebSocket,i=a(170);r&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(o,e,{get:function(){return r[e]}})})),e.exports={w3cwebsocket:r?o:null,version:i}},function(e,t,a){e.exports=a(171).version},function(e){e.exports={_args:[["websocket@1.0.25","C:\\Users\\davro\\Desktop\\github\\ddd2018"]],_development:!0,_from:"websocket@1.0.25",_id:"websocket@1.0.25",_inBundle:!1,_integrity:"sha512-M58njvi6ZxVb5k7kpnHh2BvNKuBWiwIYvsToErBzWhvBZYwlEiLcyLrG41T1jRcrY9ettqPYEqduLI7ul54CVQ==",_location:"/websocket",_phantomChildren:{},_requested:{type:"version",registry:!0,raw:"websocket@1.0.25",name:"websocket",escapedName:"websocket",rawSpec:"1.0.25",saveSpec:null,fetchSpec:"1.0.25"},_requiredBy:["#DEV:/"],_resolved:"https://registry.npmjs.org/websocket/-/websocket-1.0.25.tgz",_spec:"1.0.25",_where:"C:\\Users\\davro\\Desktop\\github\\ddd2018",author:{name:"Brian McKelvey",email:"brian@worlize.com",url:"https://www.worlize.com/"},browser:"lib/browser.js",bugs:{url:"https://github.com/theturtle32/WebSocket-Node/issues"},config:{verbose:!1},contributors:[{name:"I\xF1aki Baz Castillo",email:"ibc@aliax.net",url:"http://dev.sipdoc.net"}],dependencies:{debug:"^2.2.0",nan:"^2.3.3","typedarray-to-buffer":"^3.1.2",yaeti:"^0.0.6"},description:"Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",devDependencies:{"buffer-equal":"^1.0.0",faucet:"^0.0.1",gulp:"git+https://github.com/gulpjs/gulp.git#4.0","gulp-jshint":"^2.0.4",jshint:"^2.0.0","jshint-stylish":"^2.2.1",tape:"^4.0.1"},directories:{lib:"./lib"},engines:{node:">=0.10.0"},homepage:"https://github.com/theturtle32/WebSocket-Node",keywords:["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],license:"Apache-2.0",main:"index",name:"websocket",repository:{type:"git",url:"git+https://github.com/theturtle32/WebSocket-Node.git"},scripts:{gulp:"gulp",install:"(node-gyp rebuild 2> builderror.log) || (exit 0)",test:"faucet test/unit"},version:"1.0.25"}},function(e,t,a){var o=a(173);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0},r;n.transform=r,n.insertInto=void 0;a(84)(o,n);o.locals&&(e.exports=o.locals),!1},function(e,t,a){t=e.exports=a(83)(!1),t.push([e.i,".nodeEditor{position:absolute;top:50%;left:0;z-index:1000;transform:translateY(-50%);width:50%;max-width:500px;height:calc(100% - 40px);padding:5px;font-family:Tahoma,Verdana,Segoe,sans-serif;font-size:10px}.nodeEditor.hide{display:none}.nodeEditor.minimize{height:20px;max-height:20px;overflow:hidden;transform:translate(0);top:20px}.nodeEditor canvas{z-index:-1;position:absolute;top:0;left:0;height:100%;width:100%;opacity:.7}.nodeEditor .headerbar input{padding:3px 5px;background:#555;border:none;font-family:Tahoma,Verdana,Segoe,sans-serif;font-size:10px;letter-spacing:.1em;color:#bbb;border:1px solid #333}.nodeEditor .btn{cursor:pointer;display:inline-block;padding:4px 10px;background:rgba(0,0,0,.2);color:#aaa;letter-spacing:1px;border:1px solid #333;transition:all .5s ease-out;margin-bottom:2px;margin-right:2px}.nodeEditor .btn:hover{background:rgba(0,0,0,.6)}.nodeEditor .infos{border:1px solid #333;position:absolute;z-index:1;top:30px;left:5px;padding:5px;background:rgba(0,0,0,.2);line-height:16px;color:#aaa;letter-spacing:1px}.nodeEditor .infos.hide{display:none}.nodeEditor .infos .delete{margin-top:5px;padding:2px 10px;text-align:center;background:rgba(0,0,0,.2);border:1px solid #333;transition:all .2s;cursor:pointer;display:inline-block}.nodeEditor .infos .delete:hover{background:hsla(0,0%,39%,.2)}.nodeEditor .minimize{background:hsla(0,0%,100%,.5)}.nodeEditor .close,.nodeEditor .minimize{cursor:pointer;height:20px;width:20px;position:absolute;top:4px;right:-1px;z-index:3}.nodeEditor .close:after,.nodeEditor .close:before{content:\"\";width:10px;border:1px solid #3b3b3b;position:absolute;top:10px;border-radius:5px}.nodeEditor .close:before{transform:rotate(45deg)}.nodeEditor .close:after{transform:rotate(-45deg)}.nodeEditor .buttons{position:absolute;z-index:1;bottom:5px;left:5px}",""])},function(e){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var a=t.protocol+"//"+t.host,o=a+t.pathname.replace(/\/[^\/]*$/,"/"),n=e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(e,t){var n=t.trim().replace(/^"(.*)"$/,(function(e,t){return t})).replace(/^'(.*)'$/,(function(e,t){return t}));if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(n))return e;var r;return r=0===n.indexOf("//")?n:0===n.indexOf("/")?a+n:o+n.replace(/^\.\//,""),"url("+JSON.stringify(r)+")"}));return n}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]="<div class='nodeEditor'>\n\t<div class='headerbar'>\n\t\t<div class='load btn'>load</div>\n\t\t<div class='save btn'>save</div>\n\t\t<input class='save-input' value='postfx' />\n\t\t<div class='clear btn'>clear</div>\n\t\t<div class='minimize'></div>\n\t</div>\n\t<div class='infos hide'>\n\t\t<div class='name'>NodeRandom</div>\n\t\t<div class='value'>value : 0</div>\n\t\t<div class='delete'>Delete</div>\n\t</div>\n\t<canvas></canvas>\n\t<div class='buttons'></div>\n</div>\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"random"));return a.update=function(){a.value=Math.random(),a.contentEl.innerHTML="random:"+parseFloat(a.value).toFixed(5),a.valueNeedsUpdate=!0},a.createOutput("value","number"),a.value=Math.random(),a}return l()(t,e),t.prototype.serialize=function(){return e.prototype.serialize.call(this,"random")},t.deserialize=function(e){var a=new t;return a.baseDeserialize(e),a},t})(d.a);t.a=u},function(e,t,a){var o=a(178);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0},r;n.transform=r,n.insertInto=void 0;a(84)(o,n);o.locals&&(e.exports=o.locals),!1},function(e,t,a){t=e.exports=a(83)(!1),t.push([e.i,".node{position:absolute;top:0;left:0;z-index:1000;border:1px solid hsla(0,0%,100%,.6);border-radius:15px;width:120px;height:18px;padding:5px;background:rgba(167,167,255,.6);font-family:Tahoma,Verdana,Segoe,sans-serif;font-size:10px;transition:background .2s;will-change:transform,background}.node.selected{background:rgba(210,210,255,.9)}.node .inputs,.node .outputs{display:flex;text-align:center;align-content:center;align-items:center;justify-content:space-around;flex-flow:row;width:100%;position:absolute}.node .inputs{top:-5px;left:0}.node .outputs{bottom:-5px;left:0}.node .input,.node .output{width:10px;height:10px;line-height:10px;position:relative;cursor:pointer}.node .input .circle,.node .output .circle{width:9px;height:9px;line-height:9px;border:1px solid #fff;border-radius:50%;background:#99f;transition:all .25s;pointer-events:none;will-change:transform background}.node .input span,.node .output span{position:absolute;top:0;left:5px;width:60px;transform:translate(-50%,-16px);text-align:center;color:#fff;opacity:0;will-change:opacity;transition:all .25s;pointer-events:none}.node .input .hitZone,.node .output .hitZone{width:40px;height:30px;background:red;position:absolute;opacity:0;top:-16px;left:-15px}.node .input:hover .circle,.node .output:hover .circle{transform:scale(1.5)}.node .input:hover span,.node .output:hover span{opacity:1}.node .input.highlight .circle,.node .output.highlight .circle{transform:scale(1.6);background:#6f6}.node .output span{transform:translate(-50%,20px)}.node .output .hitZone{top:-2px}.node .content{position:absolute;top:12px;left:50%;width:100%;text-align:center;transform:translate(-50%,-50%);font-size:10px}.node .content .label{color:#000;position:absolute;padding:1px 3px;height:13px;top:0;left:0;z-index:11;display:inline-block;pointer-events:none}",""])},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(1),l=a(81),d=(function(){function e(t,a,o){var r=this,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"any";n()(this,e),this.attachLink=function(e){r.link&&r.disconnect(),r.link=e,r.isPlugin?e.in=r:e.out=r,r.onChange.dispatch()},this.name=t,this.node=a,this.type=i,this.isPlugin=o,this.link=null,this.slot=0,this.dom=Object(l.b)("<div data-type='"+i+"' class='"+(o?"input":"output")+"'>\n\t\t\t<div class='circle'></div>\n\t\t\t<div class='hitZone'></div>\n\t\t\t<span>"+t+"</span>\n\t\t</div>"),this.onChange=new s.a}return e.prototype.detach=function(){this.link=null,this.onChange.dispatch()},e.prototype.disconnect=function(){if(this.link){var e=this.link;return this.link.disconnect(),e}},e.prototype.dispose=function(){this.disconnect(),this.name=null,this.node=null},e.prototype.serialize=function(){var e={name:this.name,isPlugin:this.isPlugin,type:this.type};return e},e.deserialize=function(t){var a=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new e(t.name,a,t.isPlugin,t.type)},i()(e,[{key:"value",get:function(){return this.isPlugin?this.link?this.link.value:null:this.node.value}}]),e})();t.a=d},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]="<div class='node'>\n\t<div class='content'>Node</div>\n\t<div class='inputs'></div>\n\t<div class='outputs'</div>\n</div>\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=a(19),p=a(114),c=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"Volume"));return a.update=function(){a.value=parseFloat(u.a.volume).toFixed(6),a.progressBar.percent=u.a.volume},a.value=u.a.volume,a.type="number",a.contentEl.innerHTML="",a.progressBar=new p.a(100,13,!0),a.contentEl.appendChild(a.progressBar.dom),a.progressBar.dom.style.display="inline-block",a.contentEl.style.top="8px",a.contentEl.style.left="15px",a.contentEl.style.transform="initial",a.createOutput("volume","number"),a}return l()(t,e),t.prototype.serialize=function(){return e.prototype.serialize.call(this,"volume")},t.deserialize=function(e){var a=new t;return a.baseDeserialize(e),a},t})(d.a);t.a=c},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"multiple"));return a.update=function(){var e=a.value,t=parseFloat(a.input.value);a.value=a.isAllInputConnected()?a.inputs[0].value*t:1,a.valueNeedsUpdate=e!=a.value},a.createInput("value","number"),a.createOutput("result","number"),a.input=document.createElement("input"),a.input.value=3,a.input.type="number",a.input.style.width="50px",a.input.style.height="13px",a.input.style.background="rgba(255,255,255,0.3)",a.contentEl.innerHTML="x ",a.contentEl.appendChild(a.input),a}return l()(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this,"x");return t.value=parseFloat(this.input.value),t},t.deserialize=function(e){var a=new t;return a.baseDeserialize(e),a.input.value=a.value,a},t})(d.a);t.a=u},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=a(32),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"divide"));return a.update=function(){var e=a.value;if(a.isAllInputConnected()){var t=parseFloat(a.input.value);a.value=a.inputs[0].value/t}else a.value=1;a.valueNeedsUpdate=e!=a.value},a.createInput("value","number"),a.createOutput("result","number"),a.input=document.createElement("input"),a.input.value=10,a.input.type="number",a.input.style.width="50px",a.input.style.height="13px",a.input.style.background="rgba(255,255,255,0.3)",a.contentEl.innerHTML="/ ",a.contentEl.appendChild(a.input),a}return l()(t,e),t.prototype.serialize=function(){return e.prototype.serialize.call(this,"/")},t.deserialize=function(e){var a=new t;return a.baseDeserialize(e),a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"switchNode"));return a.update=function(){var e=a.value,t=a.contentEl.querySelector(".input1"),o=a.contentEl.querySelector(".input2");a.inputs[0].link&&t.setAttribute("value",a.inputs[0].value),a.inputs[1].link&&o.setAttribute("value",a.inputs[1].value);var n=parseFloat(t.value),r=parseFloat(o.value);a.value=n>r?1:0,a.valueNeedsUpdate=e!=a.value},a.createInput("value1","number"),a.createInput("value2","number"),a.createOutput("output[0 or 1]","number"),a.value=-1,a.input1=document.createElement("input"),a.input1.setAttribute("value",0),a.input1.className="input1",a.input1.type="number",a.input1.style.width="50px",a.input1.style.height="13px",a.input1.style.background="rgba(255,255,255,0.3)",a.input2=document.createElement("input"),a.input2.setAttribute("value",0),a.input2.className="input2",a.input2.type="number",a.input2.style.width="50px",a.input2.style.height="13px",a.input2.style.background="rgba(255,255,255,0.3)",a.contentEl.innerHTML="",a.contentEl.appendChild(a.input1),a.contentEl.innerHTML+=" > ",a.contentEl.appendChild(a.input2),a}return l()(t,e),t.prototype.serialize=function(){return e.prototype.serialize.call(this,">")},t.deserialize=function(e){var a=new t;return a.baseDeserialize(e),a},t})(d.a);t.a=u},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"switchNode"));return a.update=function(){var e=a.value,t=a.contentEl.querySelector(".input1"),o=a.contentEl.querySelector(".input2");a.inputs[0].link&&t.setAttribute("value",a.inputs[0].value),a.inputs[1].link&&o.setAttribute("value",a.inputs[1].value);var n=parseFloat(t.value),r=parseFloat(o.value);a.value=n>=r?1:0,a.valueNeedsUpdate=e!=a.value},a.createInput("value1","number"),a.createInput("value2","number"),a.createOutput("output[0 or 1]","number"),a.value=-1,a.input1=document.createElement("input"),a.input1.setAttribute("value",0),a.input1.className="input1",a.input1.type="number",a.input1.style.width="50px",a.input1.style.height="13px",a.input1.style.background="rgba(255,255,255,0.3)",a.input2=document.createElement("input"),a.input2.setAttribute("value",0),a.input2.className="input2",a.input2.type="number",a.input2.style.width="50px",a.input2.style.height="13px",a.input2.style.background="rgba(255,255,255,0.3)",a.contentEl.innerHTML="",a.contentEl.appendChild(a.input1),a.contentEl.innerHTML+=" >= ",a.contentEl.appendChild(a.input2),a}return l()(t,e),t.prototype.serialize=function(){return e.prototype.serialize.call(this,">=")},t.deserialize=function(e){var a=new t;return a.baseDeserialize(e),a},t})(d.a);t.a=u},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"switchNode"));return a.update=function(){var e=a.value;a.isAllInputConnected()?a.value=.5>parseFloat(a.inputs[2])?a.inputs[0].value:a.inputs[1].value:a.inputs[0].link&&.5>parseFloat(a.inputs[2].value)?a.value=a.inputs[0].value:a.inputs[1].link&&.5<=parseFloat(a.inputs[2].value)&&(a.value=a.inputs[1].value),a.valueNeedsUpdate=e!=a.value},a.createInput("value1","any"),a.createInput("value2","any"),a.createInput("[0 or 1]","number"),a.createOutput("selected value","any"),a.value=null,a.contentEl.innerHTML="Switch [0-1]",a}return l()(t,e),t.prototype.getParentNodes=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;if(null==e&&(e=[]),-1==e.indexOf(this)){if(e.push(this),this.isAllInputConnected()){var t=.5>parseFloat(this.inputs[2].value)?this.inputs[0]:this.inputs[1];this.addNodeFromInput(t,e)}else this.inputs[0].link&&.5>parseFloat(this.inputs[2].value)?this.addNodeFromInput(this.inputs[0],e):this.inputs[1].link&&.5<=parseFloat(this.inputs[2].value)&&this.addNodeFromInput(this.inputs[1],e);return e}},t.prototype.addNodeFromInput=function(e,t){var a=e.link.out.node;a.getParentNodes(t)},t.prototype.serialize=function(){return e.prototype.serialize.call(this,"switch")},t.deserialize=function(e){var a=new t;return a.baseDeserialize(e),a},t})(d.a);t.a=u},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"add"));return a.update=function(){var e=a.value,t=parseFloat(a.input.value);a.value=a.isAllInputConnected()?parseFloat(a.inputs[0].value)+t:t,a.valueNeedsUpdate=e!=a.value},a.createInput("value","number"),a.createOutput("result","number"),a.input=document.createElement("input"),a.input.value=1,a.input.type="number",a.input.style.width="50px",a.input.style.height="13px",a.input.style.background="rgba(255,255,255,0.3)",a.contentEl.innerHTML="+ ",a.contentEl.appendChild(a.input),a}return l()(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this,"+");return t.value=parseFloat(this.input.value),t},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a.input.value=a.value,a},t})(d.a);t.a=u},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"sub"));return a.update=function(){var e=a.value,t=parseFloat(a.input.value);a.value=a.isAllInputConnected()?a.inputs[0].value-t:-t,a.valueNeedsUpdate=e!=a.value},a.createInput("value","number"),a.createOutput("result","number"),a.input=document.createElement("input"),a.input.value=1,a.input.type="number",a.input.style.width="50px",a.input.style.height="13px",a.input.style.background="rgba(255,255,255,0.3)",a.contentEl.innerHTML="- ",a.contentEl.appendChild(a.input),a}return l()(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this,"-");return t.value=parseFloat(this.input.value),t},t.deserialize=function(e){var a=new t;return a.baseDeserialize(e),a.input.value=a.value,a},t})(d.a);t.a=u},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=a(32),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"multiple"));return a.update=function(){var e=a.value;a.value=a.isAllInputConnected()?Object(u.a)(a.inputs[0].value):1,a.valueNeedsUpdate=a.value!=e},a.createInput("value","number"),a.createOutput("result","number"),a.contentEl.innerHTML="clamp[0-1]",a}return l()(t,e),t.prototype.serialize=function(){return e.prototype.serialize.call(this,"clamp")},t.deserialize=function(e){var a=new t;return a.baseDeserialize(e),a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"add"));return a.update=function(){var e=a.value;a.value=parseFloat(a.input.value),a.valueNeedsUpdate=e!=a.value},a.createOutput("result","number"),a.input=document.createElement("input"),a.input.value=1,a.input.type="number",a.input.style.width="50px",a.input.style.height="13px",a.input.style.background="rgba(255,255,255,0.3)",a.contentEl.innerHTML="+ ",a.contentEl.appendChild(a.input),a}return l()(t,e),t.prototype.serialize=function(){var t=e.prototype.serialize.call(this,"n");return t.value=parseFloat(this.input.value),t},t.deserialize=function(e){var a=new t;return a.baseDeserialize(e),a.input.value=a.value,a},t})(d.a);t.a=u},function(e,t,a){"use strict";var o=a(17),n=a.n(o),r=a(0),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(78),c=a(192),m=(function(e){function t(){i()(this,t);var a=l()(this,e.call(this,"ComputeNode","pass"));return a.createInput("input Pass","pass"),a.createOutput("output Computed Pass","pass"),a.isPostfxNode=!0,a.isComputed=!0,a.color="#AA3",a.pass=new c.a,a}return u()(t,e),t.prototype.update=function(){for(var e=this.getParentNodes([],!0),t=!1,a=e,o=Array.isArray(a),r=0,a=o?a:n()(a);;){var i;if(o){if(r>=a.length)break;i=a[r++]}else{if(r=a.next(),r.done)break;i=r.value}var s=i;if(s.isPlugDirty){t=!0;break}}if(!t)return void this.pass.updateUniforms();this.pass.passes=[];for(var l=e,d=Array.isArray(l),u=0,l=d?l:n()(l);;){var p;if(d){if(u>=l.length)break;p=l[u++]}else{if(u=l.next(),u.done)break;p=u.value}var c=p;c!=this&&c.isPostfxNode&&this.pass.passes.push(c.pass)}this.pass.compute()},t.prototype.getParentNodes=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],a=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];return a?e.prototype.getParentNodes.call(this,t):(t.push(this),t)},t.prototype.serialize=function(){return e.prototype.serialize.call(this,"compute")},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a},t})(p.a);t.a=m},function(e,t,a){"use strict";(function(e){var o=a(17),n=a.n(o),r=a(0),i=a.n(r),s={uniform:/(uniform ?\w* \w* (\w*);)/gi,varying:/(varying .*);/gi,attribute:/(attribute .*);/gi,include:/(#include \<.*\>)/gi,define:/(#define .*)/gi,constant:/(const .*)/gi,fn:/[a-zA-Z0-9]+\s*[a-zA-Z0-9]+\s*\(\s*([a-zA-Z0-9]*\s*[a-zA-Z0-9]{0,16},*)*\s*\)\s*\{(?:[^}{]+|\{(?:[^}{]+|\{[^}{]*\})*\})*\}/gi,main:/void\s*main\s*\(\s*[a-zA-Z0-9]*\s*[a-zA-Z0-9]{0,16}\s*\)\s*\{(?:[^}{]+|\{(?:[^}{]+|\{[^}{]*\})*\})*\}/mi},l=(function(){function t(){i()(this,t),this.passes=[],this.isDirty=!0,this.time=0}return t.prototype.compute=function(){this.uniforms=this.basicUniforms(),this.fs=this.computeFragment(),this.material&&this.material.dispose(),this.material=new e.RawShaderMaterial({fragmentShader:this.fs,vertexShader:"\n\t\t\t\tprecision highp float;\n\t\t\t\tuniform mat4 projectionMatrix;\n\t\t\t\tuniform mat4 modelViewMatrix;\n\t\t\t\tattribute vec3 position;\n\t\t\t\tattribute vec2 uv;\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}\t\n\t\t\t",uniforms:this.uniforms,flatShading:!0,depthWrite:!1,depthTest:!1,transparent:!1}),this.enabled=!0},t.prototype.basicUniforms=function(){return{resolution:{type:"v2",value:new e.Vector2(1,1)},time:{type:"f",value:Date.now()},tInput:{type:"t",value:null},tDepth:{type:"t",value:null}}},t.prototype.computeFragment=function(){var e="precision highp float;\n",t=[],o=[],r=[],s=[],l=["varying vec2 vUv;"],d=["uniform sampler2D tInput;","uniform sampler2D tDepth;","uniform float time;","uniform vec2 resolution;"];this.mapUniforms=[];var c=[];this.passes.reverse();for(var m=0,i;m<this.passes.length;m++){i=this.passes[m],0==m||i.canCompute||console.warn(i.name+" cant be compute or will give bad effects, use it after the computePass or as first node of the computePass"),this.mergeVariables("include",t,i.fragmentShader),this.mergeVariables("varying",l,i.fragmentShader),this.mergeVariables("attribute",s,i.fragmentShader),this.mergeVariables("define",o,i.fragmentShader),this.mergeVariables("constant",r,i.fragmentShader);for(var f=this.getUniformsFS(i),g=i.fragmentShader,h=i.name+m+"_",y=f,b=Array.isArray(y),_=0,y=b?y:n()(y);;){var w;if(b){if(_>=y.length)break;w=y[_++]}else{if(_=y.next(),_.done)break;w=_.value}var S=w;g=g.replace(new RegExp(S,"g"),h+S),this.uniforms[h+S]=i.material.uniforms[S],this.mapUniforms.push({pass:i,uniformUsed:h+S,uniformOriginal:S})}this.mergeVariables("uniform",d,g),this.mergeFunctions(c,m,g)}for(var M=t,C=Array.isArray(M),D=0,M=C?M:n()(M);;){var k;if(C){if(D>=M.length)break;k=M[D++]}else{if(D=M.next(),D.done)break;k=D.value}var P=k;e+=P+"\n"}e+="\n";for(var v=o,I=Array.isArray(v),A=0,v=I?v:n()(v);;){var z;if(I){if(A>=v.length)break;z=v[A++]}else{if(A=v.next(),A.done)break;z=A.value}var T=z;e+=T+"\n"}e+="\n";for(var U=r,O=Array.isArray(U),E=0,U=O?U:n()(U);;){var L;if(O){if(E>=U.length)break;L=U[E++]}else{if(E=U.next(),E.done)break;L=E.value}var F=L;e+=F+"\n"}e+="\n";for(var B=l,N=Array.isArray(B),R=0,B=N?B:n()(B);;){var H;if(N){if(R>=B.length)break;H=B[R++]}else{if(R=B.next(),R.done)break;H=R.value}var V=H;e+=V+"\n"}e+="\n";for(var j=s,W=Array.isArray(j),Y=0,j=W?j:n()(j);;){var G;if(W){if(Y>=j.length)break;G=j[Y++]}else{if(Y=j.next(),Y.done)break;G=Y.value}var q=G;e+=q+"\n"}e+="\n";for(var a=d,X=Array.isArray(a),$=0,a=X?a:n()(a);;){var K;if(X){if($>=a.length)break;K=a[$++]}else{if($=a.next(),$.done)break;K=$.value}var Z=K;e+=Z+"\n"}e+="\n";for(var u=c,J=Array.isArray(u),Q=0,u=J?u:n()(u);;){var ee;if(J){if(Q>=u.length)break;ee=u[Q++]}else{if(Q=u.next(),Q.done)break;ee=Q.value}var te=ee;e+=te+"\n\n"}e+="void main(){\n",e+="vec4 color = texture2D(tInput, vUv);\n";for(var ae=0;ae<this.passes.length;ae++)e+="main"+ae+"(color);\n";return e+="gl_FragColor = color;\n",e+="}",e},t.prototype.mergeVariables=function(e,t,a){for(var o=s[e],n=null;n=o.exec(a);)-1==t.indexOf(n[0])&&t.push(n[0])},t.prototype.getUniformsFS=function(e){for(var t=[],a=s.uniform,o=null;o=a.exec(e.fragmentShader);)"tDepth"!=o[2]&&"tInput"!=o[2]&&"time"!=o[2]&&"resolution"!=o[2]&&t.push(o[2]);return t},t.prototype.mergeFunctions=function(e,t,a){for(var o=s.fn,n=null;n=o.exec(a);)n[0]=n[0].replace("void main()","void main"+t+"(inout vec4 computedColor)"),n[0]=n[0].replace(/gl_FragColor/gi,"computedColor"),n[0]=n[0].replace(/texture2D\(tInput, vUv\)/gi,"computedColor"),-1==e.indexOf(n[0])&&e.push(n[0])},t.prototype.updateUniforms=function(){if(this.mapUniforms)for(var e=this.mapUniforms,t=Array.isArray(e),a=0,e=t?e:n()(e);;){var o;if(t){if(a>=e.length)break;o=e[a++]}else{if(a=e.next(),a.done)break;o=a.value}var r=o;this.uniforms[r.uniformUsed].value=r.pass.material.uniforms[r.uniformOriginal].value}},t.prototype.update=function(){this.isDirty&&this.compute()},t.prototype.log=function(){console.log("//----------------------- COMPUTED"),console.log(this.fs)},t})();t.a=l}).call(t,a(28))},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"toScreen"));return a.color="#CAA",a.createInput("pass","pass"),a}return l()(t,e),t.prototype.update=function(){},t.prototype.serialize=function(){return e.prototype.serialize.call(this,"toScreen")},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a},t})(d.a);t.a=u},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=a(195),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"FXAA"));return a.value=1,a.createInput("input Pass","pass"),a.createOutput("output Pass","pass"),a.isPostfxNode=!0,a.pass=new u.a,a}return l()(t,e),t.prototype.update=function(){},t.prototype.serialize=function(){return e.prototype.serialize.call(this,"fxaa")},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(80),u=(function(e){function t(){n()(this,t);var o=i()(this,e.call(this,"FXAAPass",a(196),{}));return o.canCompute=!1,o}return l()(t,e),t})(d.a);t.a=u},function(e){e.exports="uniform sampler2D tInput;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\n#define FXAA_REDUCE_MIN   (1.0/128.0)\n#define FXAA_REDUCE_MUL   (1.0/8.0)\n#define FXAA_SPAN_MAX     8.0\n\nvoid main() {\n\n    vec2 res = 1. / resolution;\n\n    vec3 rgbNW = texture2D( tInput, ( vUv.xy + vec2( -1.0, -1.0 ) * res ) ).xyz;\n    vec3 rgbNE = texture2D( tInput, ( vUv.xy + vec2( 1.0, -1.0 ) * res ) ).xyz;\n    vec3 rgbSW = texture2D( tInput, ( vUv.xy + vec2( -1.0, 1.0 ) * res ) ).xyz;\n    vec3 rgbSE = texture2D( tInput, ( vUv.xy + vec2( 1.0, 1.0 ) * res ) ).xyz;\n    vec4 rgbaM  = texture2D( tInput,  vUv.xy  * res );\n    vec3 rgbM  = rgbaM.xyz;\n    vec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n    float lumaNW = dot( rgbNW, luma );\n    float lumaNE = dot( rgbNE, luma );\n    float lumaSW = dot( rgbSW, luma );\n    float lumaSE = dot( rgbSE, luma );\n    float lumaM  = dot( rgbM,  luma );\n    float lumaMin = min( lumaM, min( min( lumaNW, lumaNE ), min( lumaSW, lumaSE ) ) );\n    float lumaMax = max( lumaM, max( max( lumaNW, lumaNE) , max( lumaSW, lumaSE ) ) );\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max( ( lumaNW + lumaNE + lumaSW + lumaSE ) * ( 0.25 * FXAA_REDUCE_MUL ), FXAA_REDUCE_MIN );\n\n    float rcpDirMin = 1.0 / ( min( abs( dir.x ), abs( dir.y ) ) + dirReduce );\n    dir = min( vec2( FXAA_SPAN_MAX,  FXAA_SPAN_MAX),\n          max( vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                dir * rcpDirMin)) * res;\n    vec4 rgbA = (1.0/2.0) * (\n    texture2D(tInput,  vUv.xy + dir * (1.0/3.0 - 0.5)) +\n    texture2D(tInput,  vUv.xy + dir * (2.0/3.0 - 0.5)));\n    vec4 rgbB = rgbA * (1.0/2.0) + (1.0/4.0) * (\n    texture2D(tInput,  vUv.xy + dir * (0.0/3.0 - 0.5)) +\n    texture2D(tInput,  vUv.xy + dir * (3.0/3.0 - 0.5)));\n    float lumaB = dot(rgbB, vec4(luma, 0.0));\n\n    if ( ( lumaB < lumaMin ) || ( lumaB > lumaMax ) ) {\n        gl_FragColor = rgbA;\n    } else {\n        gl_FragColor = rgbB;\n    }\n\n    //gl_FragColor = vec4( texture2D( tInput,vUv ).xyz, 1. );\n}"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(85),u=a(198),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"BWNode","pass"));return a.createInput("input Pass","pass"),a.createInput("percent","number"),a.isPostfxNode=!0,a.pass=new u.a,a.value=a.progressBar.percent=1,a}return l()(t,e),t.prototype.update=function(t){this.inputs[1].link?(this.value=this.inputs[1].value,this.progressBar.percent=this.value):e.prototype.update.call(this,t),this.pass.percent=this.value},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this,"bw");return t.value=this.progressBar.percent,t},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a.progressBar.percent=e.value,a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(80),c=(function(e){function t(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return n()(this,t),l()(this,e.call(this,"BWPass",a(199),{percent:{value:o}}))}return u()(t,e),i()(t,[{key:"percent",get:function(){return this.uniforms.percent.value},set:function(e){this.uniforms.percent.value=e}}]),t})(p.a);t.a=c},function(e){e.exports="uniform sampler2D tInput;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform float percent;\n\nvoid main() {\n\tvec3 rgb = texture2D(tInput, vUv).rgb;\n\n\trgb = mix(rgb,vec3( dot( rgb, vec3( .299, 0.587, 0.114 ) ) ), percent);\n\n\tgl_FragColor = vec4(rgb, 1.);\n}\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(85),u=a(201),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"GammaNode","pass"));return a.createInput("input Pass","pass"),a.createInput("amount","number"),a.isPostfxNode=!0,a.pass=new u.a,a.value=a.progressBar.percent=1,a}return l()(t,e),t.prototype.update=function(t){this.inputs[1].link?(this.value=this.inputs[1].value,this.pass.gamma=this.value):(e.prototype.update.call(this,t),this.pass.gamma=3*this.value),this.progressBar.percent=this.value},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this,"gamma");return t.value=this.progressBar.percent,t},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a.progressBar.percent=e.value,a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(80),c=(function(e){function t(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return n()(this,t),l()(this,e.call(this,"GammaPass",a(202),{gamma:{value:o}}))}return u()(t,e),i()(t,[{key:"gamma",get:function(){return this.uniforms.gamma.value},set:function(e){this.uniforms.gamma.value=e}}]),t})(p.a);t.a=c},function(e){e.exports="uniform sampler2D tInput;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform float gamma;\n\nvec3 toGamma( vec3 rgb ) {\n  return pow( rgb, vec3( 1.0 / gamma ) );\n}\n\nvoid main() {\n\tgl_FragColor = vec4(toGamma( texture2D(tInput, vUv).rgb ), 1.);\n}\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(85),u=a(204),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"BrightnessNode","pass"));return a.createInput("input Pass","pass"),a.createInput("brightness","number"),a.isPostfxNode=!0,a.pass=new u.a,a.value=.5,a}return l()(t,e),t.prototype.update=function(t){this.inputs[1].link?(this.value=this.inputs[1].value,this.pass.brightness=this.value):(e.prototype.update.call(this,t),this.pass.brightness=2*this.value-1),this.progressBar.percent=this.value},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this,"brightness");return t.value=this.progressBar.percent,t},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a.progressBar.percent=e.value,a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(80),c=(function(e){function t(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0;return n()(this,t),l()(this,e.call(this,"Brightness",a(205),{brightness:{value:o}}))}return u()(t,e),i()(t,[{key:"brightness",get:function(){return this.uniforms.brightness.value},set:function(e){this.uniforms.brightness.value=e}}]),t})(p.a);t.a=c},function(e){e.exports="uniform sampler2D tInput;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform float brightness;\n\nvoid main() {\n\tvec3 rgb = texture2D(tInput, vUv).rgb + vec3( brightness );\n\tgl_FragColor = vec4(rgb, 1.);\n}\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(85),u=a(207),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"InvertNode","pass"));return a.createInput("input Pass","pass"),a.createInput("amount","number"),a.isPostfxNode=!0,a.pass=new u.a,a.value=a.progressBar.percent=1,a}return l()(t,e),t.prototype.update=function(t){this.inputs[1].link?this.value=this.inputs[1].value:e.prototype.update.call(this,t),this.progressBar.percent=this.value,this.pass.invertRatio=this.value},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this,"invert");return t.value=this.progressBar.percent,t},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a.progressBar.percent=e.value,a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(80),c=(function(e){function t(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return n()(this,t),l()(this,e.call(this,"InvertPass",a(208),{invertRatio:{value:o}}))}return u()(t,e),i()(t,[{key:"invertRatio",get:function(){return this.uniforms.invertRatio.value},set:function(e){this.uniforms.invertRatio.value=e}}]),t})(p.a);t.a=c},function(e){e.exports="uniform sampler2D tInput;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform float invertRatio;\n\nvoid main() {\n\tvec3 rgb = texture2D(tInput, vUv).rgb;\n\tgl_FragColor = vec4(mix(rgb, (1. - rgb), invertRatio), 1.);\n}\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(85),u=a(210),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"ContrastNode","pass"));return a.createInput("input Pass","pass"),a.createInput("amount","number"),a.isPostfxNode=!0,a.pass=new u.a,a.value=a.progressBar.percent=1,a}return l()(t,e),t.prototype.update=function(t){this.inputs[1].link?(this.value=this.inputs[1].value,this.pass.contrast=this.value):(e.prototype.update.call(this,t),this.pass.contrast=3*this.value),this.progressBar.percent=this.value},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this,"contrast");return t.value=this.progressBar.percent,t},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a.progressBar.percent=e.value,a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(80),c=(function(e){function t(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return n()(this,t),l()(this,e.call(this,"ContrastPass",a(211),{contrast:{value:o}}))}return u()(t,e),i()(t,[{key:"contrast",get:function(){return this.uniforms.contrast.value},set:function(e){this.uniforms.contrast.value=e}}]),t})(p.a);t.a=c},function(e){e.exports="uniform sampler2D tInput;\nuniform vec2 resolution;\nvarying vec2 vUv;\n\nuniform float contrast;\n\nvoid main() {\n\tvec3 rgb = (texture2D(tInput, vUv).rgb - .5) * contrast + .5;\n\n\tgl_FragColor = vec4(rgb, 1.);\n}\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(85),u=a(213),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"Noise","pass"));return a.createInput("input Pass","pass"),a.createInput("amount","number"),a.isPostfxNode=!0,a.pass=new u.a,a.value=a.progressBar.percent=1,a}return l()(t,e),t.prototype.update=function(t){this.inputs[1].link?this.value=this.inputs[1].value:e.prototype.update.call(this,t),this.progressBar.percent=this.value,this.pass.amount=this.value},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this,"noise");return t.value=this.progressBar.percent,t},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a.progressBar.percent=e.value,a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(80),c=a(5),m=(function(e){function t(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{amount:.1,speed:.1};n()(this,t);var r=l()(this,e.call(this,"NoisePass",a(214),{amount:{type:"f",value:o.amount},timeClamp:{type:"f",value:0}}));return r.update=function(e){r.uniforms.timeClamp.value+=.001*(e*r.speed),r.uniforms.timeClamp.value%=.1},r.speed=1,c.a.onUpdate.add(r.update),r}return u()(t,e),i()(t,[{key:"amount",get:function(){return this.uniforms.amount.value},set:function(e){this.uniforms.amount.value=e}}]),t})(p.a);t.a=m},function(e){e.exports="uniform sampler2D tInput;\nuniform float amount;\nuniform float timeClamp;\nvarying vec2 vUv;\n\nfloat random(vec2 n, float offset ){\n\treturn .5 - fract(sin(dot(n.xy + vec2( offset, 0. ), vec2(12.9898, 78.233)))* 43758.5453);\n}\n\nvoid main() {\n\tgl_FragColor = texture2D(tInput, vUv) + vec4( vec3( amount * random( vUv, timeClamp ) ), 1. );\n}\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(85),u=a(216),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"Sepia","pass"));return a.createInput("input Pass","pass"),a.createInput("amount","number"),a.isPostfxNode=!0,a.pass=new u.a,a.value=a.progressBar.percent=1,a}return l()(t,e),t.prototype.update=function(t){this.inputs[1].link?this.value=this.inputs[1].value:e.prototype.update.call(this,t),this.progressBar.percent=this.value,this.pass.amount=this.value},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this,"sepia");return t.value=this.progressBar.percent,t},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a.progressBar.percent=e.value,a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(80),c=(function(e){function t(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;return n()(this,t),l()(this,e.call(this,"SepiaPass",a(217),{amount:{type:"f",value:o}}))}return u()(t,e),i()(t,[{key:"amount",get:function(){return this.uniforms.amount.value},set:function(e){this.uniforms.amount.value=e}}]),t})(p.a);t.a=c},function(e){e.exports="uniform sampler2D tInput;\nuniform float amount;\nvarying vec2 vUv;\n\nvoid main() {\n\tvec4 color = texture2D(tInput, vUv);\n\tfloat r = color.r;\n\tfloat g = color.g;\n\tfloat b = color.b;\n\t\n\tcolor.r = min(1.0, (r * (1.0 - (0.607 * amount))) + (g * (0.769 * amount)) + (b * (0.189 * amount)));\n\tcolor.g = min(1.0, (r * 0.349 * amount) + (g * (1.0 - (0.314 * amount))) + (b * 0.168 * amount));\n\tcolor.b = min(1.0, (r * 0.272 * amount) + (g * 0.534 * amount) + (b * (1.0 - (0.869 * amount))));\n\t\n\tgl_FragColor = color;\n}"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=a(219),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"SSAO"));return a.update=function(){a.pass.aoClamp=a.inputs[1].link?a.inputs[1].value:.25,a.pass.lumInfluence=a.inputs[2].link?a.inputs[2].value:.7},a.createInput("input Pass","pass"),a.createInput("aoClamp","number"),a.createInput("lumInfluence","number"),a.createOutput("output Pass","pass"),a.isPostfxNode=!0,a.pass=new u.a,a}return l()(t,e),t.prototype.serialize=function(){return e.prototype.serialize.call(this,"ssao")},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(97),n=a.n(o),r=a(87),i=a.n(r),s=a(0),l=a.n(s),d=a(77),u=a.n(d),p=a(75),c=a.n(p),m=a(76),f=a.n(m),v=a(80),g=a(79),h=(function(e){function t(o){l()(this,t);var r={radius:4,onlyAO:!1,aoClamp:.25,lumInfluence:.7,cameraNear:g.a.camera.near,cameraFar:g.a.camera.far,tDepth:null},s={};return i()(r,o),n()(r).map((function(e){s[e]={value:r[e]}})),c()(this,e.call(this,"SSAOPass",a(223),s))}return f()(t,e),u()(t,[{key:"aoClamp",get:function(){return this.uniforms.aoClamp.value},set:function(e){this.uniforms.aoClamp.value=e}},{key:"lumInfluence",get:function(){return this.uniforms.lumInfluence.value},set:function(e){this.uniforms.lumInfluence.value=e}}]),t})(v.a);t.a=h},function(e,t,a){a(221),e.exports=a(10).Object.keys},function(e,t,a){var o=a(36),n=a(34);a(222)("keys",(function(){return function(e){return n(o(e))}}))},function(e,t,a){var o=a(31),n=a(10),r=a(18);e.exports=function(e,t){var a=(n.Object||{})[e]||Object[e],i={};i[e]=t(a),o(o.S+o.F*r((function(){a(1)})),"Object",i)}},function(e){e.exports="uniform sampler2D tInput;\nuniform sampler2D tDepth;\nuniform float radius;\nuniform bool onlyAO;\nuniform float aoClamp;\nuniform float lumInfluence;\nuniform vec2 resolution;\nuniform float cameraNear;\nuniform float cameraFar;\n\nvarying vec2 vUv;\n\n#define DL 2.399963229728653 // PI * ( 3.0 - sqrt( 5.0 ) )\n#define EULER 2.718281828459045\n\nconst int samples = 16;\nconst bool useNoise = false;\nconst float noiseAmount = 0.0004;\nconst float diffArea = 0.1;\nconst float gDisplace = 0.5;\n\n#include <packing>\n\nvec2 rand( vec2 coord ) {\n\tvec2 noise;\n\tif ( useNoise ) {\n\t\tfloat nx = dot ( coord, vec2( 12.9898, 78.233 ) );\n\t\tfloat ny = dot ( coord, vec2( 12.9898, 78.233 ) * 2.0 );\n\t\tnoise = clamp( fract ( 43758.5453 * sin( vec2( nx, ny ) ) ), 0.0, 1.0 );\n\t} \n\telse \n\t{\n\t\tfloat ff = fract( 1.0 - coord.s * ( resolution.x / 2.0 ) );\n\t\tfloat gg = fract( coord.t * ( resolution.y / 2.0 ) );\n\t\tnoise = vec2( 0.25, 0.75 ) * vec2( ff ) + vec2( 0.75, 0.25 ) * gg;\n\t}\n\treturn ( noise * 2.0  - 1.0 ) * noiseAmount;\n}\n\n\nfloat readDepth (vec2 coord) {\n\tfloat fragCoordZ = texture2D(tDepth, coord).x;\n\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n}\n\n\nfloat compareDepths( in float depth1, in float depth2, inout int far ) {\n\tfloat garea = 8.0;                         // gauss bell width\n\tfloat diff = ( depth1 - depth2 ) * 100.0;  // depth difference (0-100)\n\n\t// reduce left bell width to avoid self-shadowing\n\tif ( diff < gDisplace ) {\n\t\tgarea = diffArea;\n\t} else {\n\t\tfar = 1;\n\t}\n\tfloat dd = diff - gDisplace;\n\tfloat gauss = pow( EULER, -2.0 * ( dd * dd ) / ( garea * garea ) );\n\treturn gauss;\n}\n\n\nfloat calcAO( float depth, float dw, float dh ) {\n\tvec2 vv = vec2( dw, dh );\n\tvec2 coord1 = vUv + radius * vv;\n\tvec2 coord2 = vUv - radius * vv;\n\n\tint far = 0;\n\tfloat temp1 = compareDepths( depth, readDepth( coord1 ), far );\n\n\t// DEPTH EXTRAPOLATION\n\tif ( far > 0 ) {\n\t\tfloat temp2 = compareDepths( readDepth( coord2 ), depth, far );\n\t\ttemp1 += ( 1.0 - temp1 ) * temp2;\n\t}\n\treturn temp1;\n}\n\nvoid main() {\n\tvec2 noise = rand(vUv);\n\tfloat depth = readDepth( vUv );\n\n\tfloat tt = clamp( depth, aoClamp, 1.0 );\n\n\tfloat w = ( 1.0 / resolution.x ) / tt + ( noise.x * ( 1.0 - noise.x ) );\n\tfloat h = ( 1.0 / resolution.y ) / tt + ( noise.y * ( 1.0 - noise.y ) );\n\n\tfloat ao = 0.0;\n\n\tfloat dz = 1.0 / float( samples );\n\tfloat l = 0.0;\n\tfloat z = 1.0 - dz / 2.0;\n\n\tfor ( int i = 0; i <= samples; i ++ ) {\n\t\tfloat r = sqrt( 1.0 - z );\n\t\tfloat pw = cos( l ) * r;\n\t\tfloat ph = sin( l ) * r;\n\t\tao += calcAO( depth, pw * w, ph * h );\n\t\tz = z - dz;\n\t\tl = l + DL;\n\t}\n\n\tao = 1.0 - ao / float( samples );\n\n\tvec3 color = texture2D( tInput, vUv ).rgb;\n\tvec3 lumcoeff = vec3( 0.299, 0.587, 0.114 );\n\tfloat lum = dot( color.rgb, lumcoeff );\n\tvec3 luminance = vec3( lum );\n\t\n\t// mix( color * ao, white, luminance )\n\tvec3 final = vec3( color * mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );  \n\n\t// if ( onlyAO ) {\n\t// \tfinal = vec3( mix( vec3( ao ), vec3( 1.0 ), luminance * lumInfluence ) );\n\t// }\n\t\n\t//depth attenuation ( less ao in background )\n\tfinal = mix(color,final,1.-smoothstep(0.,0.8,depth));\n\tgl_FragColor = vec4(final, 1.0 );\n}\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=a(225),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"Depth"));return a.update=function(){},a.value=1,a.createInput("input Pass","pass"),a.createOutput("output Pass","pass"),a.isPostfxNode=!0,a.pass=new u.a,a}return l()(t,e),t.prototype.serialize=function(){return e.prototype.serialize.call(this,"depth")},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(97),n=a.n(o),r=a(87),i=a.n(r),s=a(0),l=a.n(s),d=a(75),u=a.n(d),p=a(76),c=a.n(p),m=a(80),f=a(79),v=(function(e){function t(o){l()(this,t);var r={cameraNear:f.a.camera.near,cameraFar:f.a.camera.far,tDepth:null},s={};return i()(r,o),n()(r).map((function(e){s[e]={value:r[e]}})),u()(this,e.call(this,"DepthPass",a(226),s))}return c()(t,e),t})(m.a);t.a=v},function(e){e.exports="#include <packing>\n\nvarying vec2 vUv;\nuniform sampler2D tInput;\nuniform sampler2D tDepth;\nuniform float cameraNear;\nuniform float cameraFar;\n\nfloat readDepth (sampler2D depthSampler, vec2 coord) {\n\tfloat fragCoordZ = texture2D(depthSampler, coord).x;\n\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n}\n\nvoid main() {\n\tvec3 diffuse = texture2D(tInput, vUv).rgb;\n\tfloat depth = readDepth(tDepth, vUv);\n\tgl_FragColor.rgb = vec3(depth);\n\tgl_FragColor.a = 1.0;\n}\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=a(228),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"Bloom"));return a.update=function(){a.pass.kernel=a.inputs[1].link?a.inputs[1].value:.5,a.pass.scale=a.inputs[2].link?parseFloat(a.inputs[2].value):1,a.pass.thresh=a.inputs[3].link?parseFloat(a.inputs[3].value):1},a.createInput("input Pass","pass"),a.createInput("kernel","number"),a.createInput("scale","number"),a.createInput("thresh","number"),a.createOutput("output Pass","pass"),a.isPostfxNode=!0,a.pass=new u.a,a}return l()(t,e),t.prototype.serialize=function(){return e.prototype.serialize.call(this,"bloom")},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(80),c=(function(e){function t(){return n()(this,t),l()(this,e.call(this,"Bloom2Pass",a(229),{kernel:{value:.005},scale:{value:1},thresh:{value:1}}))}return u()(t,e),i()(t,[{key:"scale",get:function(){return this.uniforms.scale.value},set:function(e){this.uniforms.scale.value=e}},{key:"kernel",get:function(){return this.uniforms.kernel.value},set:function(e){this.uniforms.kernel.value=e/100}},{key:"thresh",get:function(){return this.uniforms.thresh.value},set:function(e){this.uniforms.thresh.value=e}}]),t})(p.a);t.a=c},function(e){e.exports="varying vec2 vUv;\nuniform sampler2D tInput;\nuniform float kernel;\nuniform float scale;\nuniform float thresh;\n\nvoid main()\n{\n    vec4 sum = vec4(0);\n    int j=-2;\n    for( int i=-2; i<=2; i++) sum+=texture2D(tInput,vUv+vec2(i,j)*kernel);\n    j=-1;\n    for( int i=-2; i<=2; i++) sum+=texture2D(tInput,vUv+vec2(i,j)*kernel);\n    j=0;\n    for( int i=-2; i<=2; i++) sum+=texture2D(tInput,vUv+vec2(i,j)*kernel);\n    j=1;\n    for( int i=-2; i<=2; i++) sum+=texture2D(tInput,vUv+vec2(i,j)*kernel);\n    j=2;\n    for( int i=-2; i<=2; i++) sum+=texture2D(tInput,vUv+vec2(i,j)*kernel);\n    sum/=25.0;\n\n    vec4 s=texture2D(tInput, vUv);\n    gl_FragColor= s + sum * scale;\n}\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(85),u=a(231),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"Vignette","pass"));return a.createInput("input Pass","pass"),a.createInput("amount","number"),a.createInput("falloff","number"),a.isPostfxNode=!0,a.pass=new u.a,a.value=a.progressBar.percent=.38,a}return l()(t,e),t.prototype.update=function(t){this.inputs[1].link?this.value=this.inputs[1].value:e.prototype.update.call(this,t),this.pass.falloff=this.inputs[2].link?parseFloat(this.inputs[2].value):.38,this.progressBar.percent=this.value,this.pass.amount=this.value},t.prototype.serialize=function(){var t=e.prototype.serialize.call(this,"vignette");return t.value=this.progressBar.percent,t},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a.progressBar.percent=e.value,a},t})(d.a);t.a=p},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(80),c=(function(e){function t(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.38,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:.05;return n()(this,t),l()(this,e.call(this,"VignettePass",a(232),{amount:{type:"f",value:o},falloff:{type:"f",value:r}}))}return u()(t,e),i()(t,[{key:"amount",get:function(){return this.uniforms.amount.value},set:function(e){this.uniforms.amount.value=e}},{key:"falloff",get:function(){return this.uniforms.falloff.value},set:function(e){this.uniforms.falloff.value=e}}]),t})(p.a);t.a=c},function(e){e.exports="uniform sampler2D tInput;\nuniform float amount;\nuniform float falloff;\nvarying vec2 vUv;\n\nvoid main() {\n\tgl_FragColor = vec4(texture2D(tInput, vUv).rgb * smoothstep(0.8, falloff * 0.799, distance(vUv, vec2(0.5, 0.5)) * (amount + falloff)),1.);\n}\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(78),u=a(234),p=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this,"City"));return a.update=function(){},a.createInput("input Pass","pass"),a.createOutput("output Pass","pass"),a.isPostfxNode=!0,a.pass=new u.a,a}return l()(t,e),t.prototype.serialize=function(){return e.prototype.serialize.call(this,"city")},t.deserialize=function(e){var a=new t(e.name);return a.baseDeserialize(e),a},t})(d.a)},function(e,t,a){"use strict";var o=a(97),n=a.n(o),r=a(87),i=a.n(r),s=a(0),l=a.n(s),d=a(75),u=a.n(d),p=a(76),c=a.n(p),m=a(80),f=a(79),v=(function(e){function t(o){l()(this,t);var r={amount:.7,cameraNear:f.a.camera.near,cameraFar:f.a.camera.far,tDepth:null},s={};return i()(r,o),n()(r).map((function(e){s[e]={value:r[e]}})),u()(this,e.call(this,"CityPass",a(235),s))}return c()(t,e),t})(m.a);t.a=v},function(e){e.exports="\n#include <packing>\n\nvarying vec2 vUv;\nuniform sampler2D tInput;\nuniform sampler2D tDepth;\nuniform float cameraNear;\nuniform float cameraFar;\nuniform float amount;\n\nfloat readDepth (sampler2D depthSampler, vec2 coord) {\n\tfloat fragCoordZ = texture2D(depthSampler, coord).x;\n\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );\n\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );\n}\n\nvoid main() {\n\tvec3 diffuse = texture2D(tInput, vUv).rgb;\n\tfloat depth = readDepth(tDepth, vUv);\n\tgl_FragColor.rgb = diffuse + vec3(depth)*amount * (1.-smoothstep(0.,.6,depth));\n\tgl_FragColor.a = 1.0;\n}\n"},function(e,t,a){"use strict";var n=Math.PI;(function(e){var o=a(17),r=a.n(o),i=a(0),s=a.n(i),l=a(75),d=a.n(l),u=a(76),p=a.n(u),c=a(237),m=a(5),f=a(79),v=a(238),g=a(240),h=a(294),y=a(296),b=a(305),_=a(308),w=a(311),S=a(314),M=a(317),C=a(336),D=a(347),k=a(350),P=a(351),I=a(86),A=a(29),z=a(98),T=a(32),U=a(53),O=a.n(U),E=(function(t){function a(){s()(this,a);var l=d()(this,t.call(this));l.update=function(e){for(var t=l.objects,a=Array.isArray(t),i=0,t=a?t:r()(t);;){var s;if(a){if(i>=t.length)break;s=t[i++]}else{if(i=t.next(),i.done)break;s=i.value}var d=s;d.update(e,l.isDarkness)}!l.transitioning&&(f.a.control.thetaDiff<-n||f.a.control.thetaDiff>n)&&l.toogleDarkness()},l.onBeforeRender=function(){var e=l.skyDark.radius+f.a.control.radius+1;e!=f.a.camera.far&&(f.a.camera.far=e,f.a.camera.updateProjectionMatrix())},l.toogleDarkness=function(){l.transitioning||(l.isDarkness=0<=l.isDarkness?-1:1,TweenLite.killTweensOf(f.a.control,!1),TweenLite.killTweensOf(l.sky,!1),TweenLite.killTweensOf(l.city,!1),l.transitioning=!0,1==l.isDarkness?(TweenLite.to(f.a.control,1,{minPhi:.25*n,maxPhi:.49*n,ease:Cubic.easeInOut}),TweenLite.to(f.a.group.rotation,1.6,{delay:.25,y:f.a.group.rotation.y+2*n*(0<f.a.control._vx?1:-2),ease:Cubic.easeInOut}),TweenLite.to(f.a.control.targetOffset,1.2,{delay:.25,y:100*A.a.darkScale,ease:Quad.easeInOut}),TweenLite.to(f.a.control,1.5,{delay:.4,radius:900*A.a.darkScale,ease:Quart.easeInOut}),TweenLite.to(l.ground,1,{delay:1.2,transition:1,ease:Quad.easeOut}),TweenLite.to(l.city,2.1,{delay:1.1,transition:5,ease:Cubic.easeOut,onComplete:l.onTransitionComplete}),TweenLite.to(l.sky,1,{opacity:0,ease:Power2.easeIn})):(TweenLite.to(f.a.control,1,{delay:1.7,minPhi:.85,maxPhi:.54*n,ease:Quad.easeInOut,onComplete:l.onTransitionComplete}),TweenLite.to(f.a.group.rotation,2,{delay:.25,y:f.a.group.rotation.y+2*n*(0<f.a.control._vx?1:-2),ease:Quart.easeInOut}),TweenLite.to(f.a.control.targetOffset,1.2,{y:100,ease:Quad.easeInOut}),TweenLite.to(f.a.control,1.5,{delay:.4,radius:1250,ease:Quart.easeInOut}),TweenLite.to(l.city,2,{delay:.5,transition:0,ease:Cubic.easeOut}),TweenLite.to(l.sky,1,{delay:1,opacity:1,ease:Power2.easeIn}),TweenLite.to(l.ground,.6,{delay:.3,transition:0,ease:Quad.easeOut})),A.a.onDarknessChange.dispatch(l.isDarkness))},l.onStart=function(){TweenLite.to(f.a.group.rotation,3,{y:f.a.group.rotation.y+4*n,ease:Cubic.easeOut})},l.onTransitionComplete=function(){l.transitioning=!1,f.a.control.thetaDiff=0},l.onKeyDown=function(t){t===z.a.touches.space?l.toogleDarkness():void 0},l.isDarkness=A.a.isDarkness,I.a.add(l,"isDarkness",-1,1),A.a.darkFog=new e.Color(591151),A.a.darkgui=I.a.addFolder("dark"),A.a.darkgui.addColor(A.a,"darkFog").onChange((function(e){f.a.scene.fog.color.setHex(e)})),f.a.control=new v.a(f.a.camera,1250),f.a.control.target.y=200,f.a.control.offset.y=0,f.a.scene.fog=new e.Fog(A.a.darkFog.getHex(),900*A.a.darkScale,1300*A.a.darkScale);var u=new e.AmbientLight(16777215,1);f.a.add(u);for(var p=0,i;2>p;p++)i=new e.DirectionalLight(16777215,.3),i.position.set(2*(Math.random()-.5),Math.random(),2*(Math.random()-.5)),f.a.add(i);l.skyDark=new w.a,l.sky=new _.a,l.ground=new S.a,l.monolithLight=new g.a,l.monolithDark=new h.a,l.city=new C.a,l.godray=new k.a,l.godray.position.y=300,l.godray.position.x=250,l.godray.lookAt(new e.Vector3),l.myst=new D.a(620,160,5e3,.6),l.myst2=new D.a(620,160,1500,1),l.objects=[l.skyDark,l.sky,l.ground,l.monolithLight,l.monolithDark,new y.a,new b.a,new M.a,l.city,l.godray,l.myst,l.myst2];for(var c=l.objects,m=Array.isArray(c),P=0,c=m?c:r()(c);;){var T;if(m){if(P>=c.length)break;T=c[P++]}else{if(P=c.next(),P.done)break;T=P.value}var U=T;f.a.add(U)}return l.transitioning=!1,z.a.onDown.add(l.onKeyDown),f.a.onBeforeRenderer.add(l.onBeforeRender),A.a.onStart.addOnce(l.onStart),l}return p()(a,t),a})(c.a);t.a=E}).call(t,a(28))},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(115),i=(function(){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"default";n()(this,e),this.onTransitionInComplete=function(){},this.onTransitionOutComplete=function(){r.a.onTransitionOutComplete()},this.name=t}return e.prototype.update=function(){},e.prototype.resize=function(){},e.prototype.transitionIn=function(){this.onTransitionInComplete()},e.prototype.transitionOut=function(){this.onTransitionOutComplete()},e.prototype.dispose=function(){},e})();t.a=i},function(e,t,a){"use strict";var o=Math.sin,n=Math.cos,r=Math.PI,i=Math.min,s=Math.max;(function(e){var l=a(0),d=a.n(l),u=a(77),p=a.n(u),c=a(5),m=a(82),f=a(239),v=(function(){function t(a,l){var u=this,p=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;d()(this,t),this._onDown=function(){u._isDown=!0,m.a.onUp.add(u._onUp)},this._onUp=function(){u._isDown=!1,m.a.onUp.remove(u._onUp)},this._onMove=function(t){u.extraThetaTarget=u.extraThetaMouse?t.normalizedX:0,u.extraPhiMouse&&(u.extraPhiTarget=t.normalizedY),u._isDown&&(!u.blockThetaMouse&&(u._vx+=t.moveX*u.frictionVx),!u.blockPhiMouse&&(u._vy-=t.moveY*u.frictionVy))},this.onWheel=function(t){u.noZoom||(0>t.delta?u.zoomOut():u.zoomIn())},this.zoomIn=function(){u.radius*=.98,u.radius<u.minRadius&&(u.radius=u.minRadius)},this.zoomOut=function(){u.radius*=1.05,u.radius>u.maxRadius&&(u.radius=u.maxRadius)},this.update=function(){u.extraTheta+=.06*(u.extraThetaTarget-u.extraTheta),u.extraPhi+=.06*(u.extraPhiTarget-u.extraPhi),u._vx=s(-u.speedMax,i(u._vx,u.speedMax)),u._vy=s(-u.speedMax,i(u._vy,u.speedMax)),u._radius+=1*(u.radius-u._radius),u._vx*=u.friction,u._vy*=u.friction,u._phi+=u._vy,u._theta+=u._vx,u.thetaDiff+=u._vx,u.isThetaRestricted&&(u._theta=s(u.minTheta,i(u.maxTheta,u._theta))),u.isPhiRestricted&&(u._phi=s(u.minPhi,i(u.maxPhi,u._phi)));var e=u._phi-(u.extraPhi*(u.extraPhiMax-u.extraPhiMin)+u.extraPhiMin),t=u._theta+(u.extraTheta*(u.extraThetaMax-u.extraThetaMin)+u.extraThetaMin);u.isThetaRestricted&&(t=s(u.minTheta,i(u.maxTheta,t))),u.isPhiRestricted&&(e=s(u.minPhi,i(u.maxPhi,e))),u.camera.position.x=u.offset.x+u.target.x+u._radius*o(e)*n(t),u.camera.position.y=u.offset.y+u.target.y+u._radius*n(e),u.camera.position.z=u.offset.z+u.target.z+u._radius*o(e)*o(t),u.targetLookAt.x=u.target.x+u.targetOffset.x,u.targetLookAt.y=u.target.y+u.targetOffset.y,u.targetLookAt.z=u.target.z+u.targetOffset.z,u.camera.lookAt(u.targetLookAt)},this.dispose=function(){u.deactivate(),u.camera=null,u.target=null,u.offset=null},this.camera=a,this.target=p||new e.Vector3,this.targetOffset=new e.Vector3,this.offset=new e.Vector3,this._radius=this.radius=l||this.camera.position.distanceTo(this.target)||1,this._isDown=!1,this._isActive=!0,this.speedMouse=1,this.speedMax=1,this.friction=.968,this.frictionVx=8e-4,this.frictionVy=6e-4,this.thetaDiff=0,this.bouncing=!1,this._vx=0,this._vy=0,this._phi=.5*r,this._theta=.5*r,this.blockThetaMouse=!1,this.blockPhiMouse=!1,this.isPhiRestricted=!0,this.isThetaRestricted=!1,this.minPhi=.8,this.maxPhi=.53*r,this.minTheta=-1.7,this.maxTheta=1.7,this.noZoom=!1,this.extraTheta=0,this.extraPhi=0,this.extraThetaTarget=0,this.extraPhiTarget=0,this.extraThetaMouse=!0,this.extraPhiMouse=!0,this.extraPhiMin=-.15,this.extraPhiMax=.15,this.extraThetaMin=-.15,this.extraThetaMax=.15,this.minRadius=0,this.maxRadius=Number.MAX_VALUE,this.targetLookAt=new e.Vector3,this.activate(),this.update(),this.camera.updateMatrixWorld()}return t.prototype.activate=function(){m.a.onDown.add(this._onDown),m.a.onMove.add(this._onMove),f.a.add(this.onWheel),c.a.onUpdate.add(this.update)},t.prototype.deactivate=function(){m.a.onDown.remove(this._onDown),m.a.onMove.remove(this._onMove),f.a.remove(this.onWheel),c.a.onUpdate.remove(this.update)},p()(t,[{key:"isActive",get:function(){return this._isActive},set:function(e){this._isActive=e,e?this.activate():this.deactivate()}}]),t})();t.a=v}).call(t,a(28))},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(1),u=a(5),p=a(109).detect(),c={noDefaultWheel:!0,single:!1},m="onwheel"in document.createElement("div")?"wheel":document.onmousewheel===void 0?"DOMMouseScroll":"mousewheel",f=(function(e){function t(a){var o=!(1<arguments.length&&void 0!==arguments[1])||arguments[1],r=!!(2<arguments.length&&void 0!==arguments[2])&&arguments[2];n()(this,t);var s=i()(this,e.call(this));return s.getDelta=function(t){var a={direction:t.deltaY&&0>t.deltaY||0>t.detail||0<t.wheelDelta?-1:1,delta:t.detail||t.wheelDelta||t.deltaY,original:t};return 0==a.delta&&0==t.deltaY&&(a.direction=0),a},s.onWheel=function(t){t.preventDefault(),s.noDefaultWheel&&t.preventDefault(),s.stopPropagation&&t.stopPropagation(),s.event=t,s.currentSpeed=0},s.onUpdate=function(){if(null!=s.event||0!=s.currentSpeed){var e=Date.now(),t;if(t=s.event?s.getDelta(s.event):s.getDelta(s.lastEvent),"firefox"==p.name&&(t.delta*=-22),"safari"==p.name&&(t.delta*=.9),c.single&&100>e-s.lastTime){if(s.lastTime=e,3>=Math.abs(t.delta)&&0!=s.currentDirection)return void(s.currentDirection=0);if(0==s.currentDirection)s.currentDirection=t.direction;else if(t.direction!=s.currentDirection)s.currentDirection=t.direction;else return}s.lastTime=e,s.dispatch(t),s.event=null}},s.dispose=function(){console.log("woops"),e.prototype.dispose.call(s)},s.domElement=a,s.currentDirection=0,s.lastTime=0,s.stopPropagation=!0,s.preventDefault=o,s.event=null,s.lastEvent=null,s.currentSpeed=0,s.domElement.addEventListener(m,s.onWheel),u.a.onUpdate.add(s.onUpdate),s}return l()(t,e),t})(d.a),v=new f(window);t.a=v},function(e,t,a){"use strict";var o=Math.sin,n=Math.PI;(function(e){var r=a(0),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(30),c=a(29),m=a(86),f=a(32),v=a(292),g=a.n(v),h=a(293),y=a.n(h),b=(function(t){function a(){i()(this,a);var o=l()(this,t.call(this));o.onDarknessChange=function(e){TweenLite.killTweensOf(o.meshLight.scale,!1),TweenLite.killTweensOf(o.position,!1),TweenLite.killTweensOf(o.rotation,!1),1==e?(TweenLite.to(o.meshLight.scale,.4,{delay:.8,x:1e-5,y:1e-5,z:1e-5,ease:Cubic.easeIn}),TweenLite.to(o.position,1,{delay:.2,y:800,ease:Cubic.easeIn}),TweenLite.to(o.rotation,1.2,{y:2*n,ease:Power3.easeIn})):(o.position.y=-200,TweenLite.to(o.meshLight.scale,1.2,{delay:1.2,x:1,y:1,z:1,ease:Cubic.easeOut}),TweenLite.to(o.position,1,{delay:1.4,y:0,ease:Cubic.easeOut}),TweenLite.to(o.rotation,1.2,{delay:1.2,y:0,ease:Power3.easeOut}))},o.onStart=function(){TweenLite.to(o.meshLight.scale,1.2,{delay:1.4,x:1,y:1,z:1,ease:Cubic.easeOut}),TweenLite.to(o.position,1,{delay:1.6,y:0,ease:Cubic.easeOut}),TweenLite.to(o.rotation,1.2,{delay:1.4,y:0,ease:Power3.easeOut})},o.fMonolithLight=m.a.addFolder("Monolith Light");var r=p.a.models["monolith-light"],s=new e.Texture(p.a.images["monolith-light"]);return s.needsUpdate=!0,o.colorLight=16475191,o.geometryLight=r.children[0].geometry,o.materialLight=new e.RawShaderMaterial({uniforms:{map:{type:"t",value:s},color:{type:"c",value:new e.Color(o.colorLight)},additivePercent:{type:"f",value:2.9},explode:{type:"f",value:0}},vertexShader:g.a,fragmentShader:y.a}),o.fMonolithLight.addColor(o,"colorLight").onChange((function(){o.materialLight.uniforms.color.value.setHex(o.colorLight)})),o.fMonolithLight.add(o.materialLight.uniforms.additivePercent,"value",0,4).name("Color Additive Percent"),o.meshLight=new e.Mesh(o.geometryLight,o.materialLight),o.meshLight.position.y=140,o.add(o.meshLight),o.position.y=-200,o.meshLight.scale.set(1e-5,1e-5,1e-5),o.rotation.y=2*n,o.yLightVar=0,c.a.onDarknessChange.add(o.onDarknessChange),c.a.onStart.addOnce(o.onStart),o}return u()(a,t),a.prototype.update=function(e,t){this.materialLight.opacity+=0>t?.03:-.03,this.materialLight.opacity=Object(f.a)(this.materialLight.opacity),this.yLightVar+=5e-4*e,this.meshLight.position.y=140+15*o(.5*this.yLightVar),this.meshLight.rotation.y=.2*o(1.2*this.yLightVar+40),this.meshLight.rotation.z=.025*o(this.yLightVar+100)},a})(e.Group);t.a=b}).call(t,a(28))},function(e,t,a){"use strict";var o=a(0),n=a.n(o);t.a=function e(){n()(this,e),a(242),a(244),a(246),a(248),a(250),a(252),a(254)}},function(e,t,a){var o=a(243);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0},r;n.transform=r,n.insertInto=void 0;a(84)(o,n);o.locals&&(e.exports=o.locals),!1},function(e,t,a){t=e.exports=a(83)(!1),t.push([e.i,".mnf-gui{font-family:Andale Mono,Tahoma,Arial;color:#fff;background-color:rgba(14,15,17,.9);border:1px solid #656d6f}.mnf-gui .component{position:relative;display:flex;align-items:center;width:100%;height:20px;margin-bottom:2px}.mnf-gui--main{position:absolute;top:2px;right:2px;width:210px;z-index:100001;display:none}",""])},function(e,t,a){var o=a(245);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0},r;n.transform=r,n.insertInto=void 0;a(84)(o,n);o.locals&&(e.exports=o.locals),!1},function(e,t,a){t=e.exports=a(83)(!1),t.push([e.i,".mnf-gui .folder{position:relative;display:block;cursor:pointer}.mnf-gui .folder.root{width:calc(100% - 4px);top:2px;left:2px;padding-bottom:2px;background-color:transparent}.mnf-gui .folder.root .folder-content{width:100%;left:0;background-color:transparent}.mnf-gui .folder.part .folder-content{width:calc(100% - 3px);left:3px}.mnf-gui .folder.part .folder-content:before{content:\"\";position:absolute;left:-3px;height:100%;width:2px}.mnf-gui.color-0 .folder-title-bar{border-left:2px solid #80a8c7}.mnf-gui.color-0 .folder-content:before{background-color:#80a8c7;opacity:.15}.mnf-gui.color-1 .folder-title-bar{border-left:2px solid #fefdaa}.mnf-gui.color-1 .folder-content:before{background-color:#fefdaa;opacity:.15}.mnf-gui .folder-progressbar{transform-origin:top left;position:absolute;top:0;right:1px;width:2px;height:100%;background:#df360b}.mnf-gui .folder-title-bar{display:flex;margin-bottom:1px;font-size:9px;font-weight:700;padding:6px;letter-spacing:2px;user-select:none;border-left:2px solid #80a8c7;padding-left:10px;text-transform:uppercase}.mnf-gui .folder-title-bar:before{margin-right:6px;font-size:4px}.mnf-gui .folder-title-text{flex-grow:4}.mnf-gui .folder-title-buttons{flex-grow:1;display:flex;justify-content:flex-end}.mnf-gui .folder-button{padding:2px}.mnf-gui .folder-content{position:relative;display:block}.mnf-gui .folder-content.hide{display:none}",""])},function(e,t,a){var o=a(247);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0},r;n.transform=r,n.insertInto=void 0;a(84)(o,n);o.locals&&(e.exports=o.locals),!1},function(e,t,a){t=e.exports=a(83)(!1),t.push([e.i,".mnf-gui .number{position:relative;display:flex;align-items:center}.mnf-gui .number input{position:relative;width:100%;height:100%;border:0;padding:0;box-sizing:border-box;padding:5px;text-align:right;background-color:transparent;color:#fff;font-family:Andale Mono,Tahoma,Arial;font-size:8px;-webkit-appearance:none;-moz-appearance:none;appearance:none}.mnf-gui .number input:focus{outline:1px solid #a0cac6}.mnf-gui .number input[type=number]{-webkit-appearance:none;-moz-appearance:none;appearance:none}.mnf-gui .number input::-webkit-inner-spin-button,.mnf-gui .number input::-webkit-outer-spin-button{-webkit-appearance:none;-moz-appearance:none;appearance:none;margin:0}.mnf-gui .number:hover .number-bar{background-color:#3d4b53}.mnf-gui .number-content{position:relative;width:99%;height:100%;display:flex}.mnf-gui .number-bar-content{position:relative;top:0;left:0;width:75%;height:100%;display:flex;background-color:#212324}.mnf-gui .number-bar{position:relative;width:100%;height:100%;background-color:#303b41;transform-origin:0 0}.mnf-gui .number-controls{position:absolute;top:0;left:0;width:100%;height:100%;cursor:-moz-grab;cursor:-webkit-grab;cursor:grab}.mnf-gui .number-controls.down{cursor:-moz-grabbing;cursor:-webkit-grabbing;cursor:grabbing}.mnf-gui .number-input{position:relative;display:flex;width:25%}.mnf-gui .number-label{position:absolute;top:0;left:6px;height:100%;font-size:8px;line-height:20px;color:#7d9c9f;pointer-events:none}.mnf-gui .number-icon{position:relative;width:1%;height:100%;background-color:#0f3039;display:none}",""])},function(e,t,a){var o=a(249);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0},r;n.transform=r,n.insertInto=void 0;a(84)(o,n);o.locals&&(e.exports=o.locals),!1},function(e,t,a){t=e.exports=a(83)(!1),t.push([e.i,".mnf-gui .button{position:relative;background-color:#2a434a;user-select:none;cursor:pointer;display:flex;align-items:center}.mnf-gui .button:active:hover{background-color:#436b76}.mnf-gui .button:hover{background-color:#35555e}.mnf-gui .button.activated{background-color:#446d79}.mnf-gui .button.activated .button-onoff-content{display:block}.mnf-gui .button.activated:hover{background-color:#51818f}.mnf-gui .button.activated:active:hover{background-color:#5d95a5!important}.mnf-gui .button .button-onoff{position:absolute;top:50%;right:10px;width:6px;height:6px;border:1px solid #fff;border-radius:2px;display:none;align-items:center;justify-content:center;transform:translate3d(0,-50%,0)}.mnf-gui .button .button-onoff-content{width:80%;height:80%;background-color:#fff;display:none}.mnf-gui .button.onoff .button-onoff{display:flex}.mnf-gui .button.onoff:active:hover{background-color:#2a434a}.mnf-gui .button-label{position:relative;top:1px;padding:5px;padding-left:6px;font-size:8px;letter-spacing:1px;pointer-events:none}",""])},function(e,t,a){var o=a(251);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0},r;n.transform=r,n.insertInto=void 0;a(84)(o,n);o.locals&&(e.exports=o.locals),!1},function(e,t,a){t=e.exports=a(83)(!1),t.push([e.i,".mnf-gui .select select{width:100%;height:100%;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0;background-color:transparent;border:1px solid #303b41;color:#a0cac6;font-size:8px;font-family:Andale Mono;padding-left:6px}.mnf-gui .select select:focus{outline:0;border:1px solid #a0cac6}.mnf-gui .select-arrow{position:absolute;top:0;right:10px;font-family:Andale Mono;font-size:8px;line-height:20px;color:#a0cac6;display:block}",""])},function(e,t,a){var o=a(253);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0},r;n.transform=r,n.insertInto=void 0;a(84)(o,n);o.locals&&(e.exports=o.locals),!1},function(e,t,a){t=e.exports=a(83)(!1),t.push([e.i,".mnf-gui .text{position:relative}.mnf-gui .text input{position:relative;width:75%;height:100%;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:0;background-color:transparent;border:1px solid #303b41;color:#a0cac6;font-size:8px;font-family:Andale Mono;padding:0;padding-left:6px}.mnf-gui .text input:focus{outline:0;border:1px solid #a0cac6}.mnf-gui .text-icon{position:relative;width:1%;height:100%;background-color:#444f79;display:none}.mnf-gui .text-label{position:relative;top:1px;width:25%;font-size:8px;padding-left:6px;line-height:100%;color:#7d9c9f}",""])},function(e,t,a){var o=a(255);"string"==typeof o&&(o=[[e.i,o,""]]);var n={hmr:!0},r;n.transform=r,n.insertInto=void 0;a(84)(o,n);o.locals&&(e.exports=o.locals),!1},function(e,t,a){t=e.exports=a(83)(!1),t.push([e.i,".mnf-gui .color{font-family:Andale Mono,Tahoma,Arial;font-size:8px;line-height:20px}.mnf-gui .color-content{position:relative;width:100%;height:100%;border:0;padding:0;background-color:transparent;display:flex}.mnf-gui .color-bar{position:absolute;top:0;left:0;width:100%;height:100%}.mnf-gui .color-label{position:relative;left:6px;text-shadow:-1px 0 1px #444,0 1px 1px #444,1px 0 1px #444,0 -1px 1px #444}.mnf-gui .color-picker-cnt{position:absolute;width:100%;height:100%;top:20px;left:0}.mnf-gui .Scp{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;position:relative;display:none;z-index:9999}.mnf-gui .Scp-saturation{position:relative;height:100%;background:-webkit-linear-gradient(left,#fff,red);background:linear-gradient(90deg,#fff,red);float:left;margin-right:5px}.mnf-gui .Scp-brightness{width:100%;height:100%;background:-webkit-linear-gradient(hsla(0,0%,100%,0),#000);background:linear-gradient(hsla(0,0%,100%,0),#000)}.mnf-gui .Scp-sbSelector{border:2px solid #fff;position:absolute;width:14px;height:14px;background:#fff;border-radius:10px;top:-7px;left:-7px;box-sizing:border-box;z-index:10}.mnf-gui .Scp-hue{width:20px;height:100%;position:relative;float:left;background:-webkit-linear-gradient(red,#f0f 17%,#00f 34%,#0ff 50%,#0f0 67%,#ff0 84%,red);background:linear-gradient(red,#f0f 17%,#00f 34%,#0ff 50%,#0f0 67%,#ff0 84%,red)}.mnf-gui .Scp-hSelector{position:absolute;background:#fff;border-bottom:1px solid #000;right:-3px;width:10px;height:2px}",""])},function(e,t,a){"use strict";var o=a(17),n=a.n(o),r=a(0),i=a.n(r),s=a(257),l=a(288),d=a(291),u=(function(){function e(t){i()(this,e),this.main=new l.a(t),this.dom=this.main.dom,this.components=[],this.folders=[],this.updater=new d.a(this.components,this.folders)}return e.prototype.addClassic=function(){var e=s.a.create.apply(s.a,arguments);if(e instanceof Array){for(var t=[],a=e,o=Array.isArray(a),r=0,a=o?a:n()(a);;){var i;if(o){if(r>=a.length)break;i=a[r++]}else{if(r=a.next(),r.done)break;i=r.value}var l=i;t.push(this.addComponent(l))}return t}return this.addComponent(e)},e.prototype.addComponent=function(e){return this.main.add(e),this.components.push(e),e},e.prototype.add=function(){return this.addClassic.apply(this,arguments)},e.prototype.addColor=function(){var e=s.a.createColor.apply(s.a,arguments);return this.addComponent(e)},e.prototype.addFolder=function(t){var a=new e(t);return this.main.add(a),this.folders.push(a),a},e})();t.a=u},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(258),i=a(259),s=a(268),l=a(270),d=a(272),u=a(274),p=(function(){function e(){n()(this,e)}return e.prototype.create=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var o=t[0],n=t[1],p=o[n],c=Object(r.a)(p);switch(c){case r.b.NUMBER:return new(Function.prototype.bind.apply(i.a,[null].concat([o],t.splice(1))));case r.b.FUNCTION:return new(Function.prototype.bind.apply(s.a,[null].concat([o,!1],t.splice(1))));case r.b.BOOLEAN:return new(Function.prototype.bind.apply(s.a,[null].concat([o,!0],t.splice(1))));case r.b.VECTOR3:return[new i.a(p,"x"),new i.a(p,"y"),new i.a(p,"z")];case r.b.COLOR:return new(Function.prototype.bind.apply(u.a,[null].concat([o],t.splice(1))));case r.b.OBJECT:return new(Function.prototype.bind.apply(l.a,[null].concat([o],t.splice(1))));case r.b.STRING:var m=t[2];if(!m)return new(Function.prototype.bind.apply(d.a,[null].concat([o],t.splice(1))));var f=Object(r.a)(m);return f==r.b.OBJECT?new l.a(o,n,m):null;}return null},e.prototype.createColor=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];var o=t[0];return new(Function.prototype.bind.apply(u.a,[null].concat([o],t.splice(1))))},e})();t.a=new p},function(e,t,a){"use strict";function o(e){var t="undefined"==typeof e?"undefined":r()(e);switch(t){case i.BOOLEAN:return i.BOOLEAN;case i.FUNCTION:return i.FUNCTION;case i.NUMBER:return i.NUMBER;case i.STRING:return i.STRING;case i.CANVAS:return i.CANVAS;case i.UNDEFINED:return i.UNDEFINED;default:case i.OBJECT:return void 0!=e.x&&void 0!=e.y?void 0==e.z?i.VECTOR2:void 0==e.w?i.VECTOR3:i.VECTOR4:void 0!=e.r&&void 0!=e.g&&void 0!=e.b?i.COLOR:i.OBJECT;}}a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return i}));var n=a(92),r=a.n(n),i={BOOLEAN:"boolean",FUNCTION:"function",NUMBER:"number",STRING:"string",CANVAS:"canvas",OBJECT:"object",UNDEFINED:"undefined",VECTOR2:"vector2",VECTOR3:"vector3",VECTOR4:"vector4",COLOR:"color"}},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(82),c=a(88),m=a(81),f=a(260),v=a(98),g=a(32),h=a(267),y=(function(e){function t(a){n()(this,t);var o=l()(this,e.call(this,h.a,a,1>=arguments.length?void 0:arguments[1]));o.onControlsDown=function(t){0==o.wControls&&(o.wControls=o.domControls.offsetWidth),o.xLast=t.x,o.xTarget=t.origin.offsetX,o.domControls.classList.add("down"),o.onControlsMove(t),p.a.on(window,"move",o.onControlsMove),p.a.on(window,"up",o.onControlsUp)},o.onControlsMove=function(t){t.origin.stopPropagation();var e=t.x-o.xLast;o.xTarget+=e;var a=Object(g.a)(o.xTarget,0,o.wControls),n=a/o.wControls;o.updateTargetValue(n*(o._max-o._min)+o._min),o.xLast=t.x},o.onControlsUp=function(){o.domControls.classList.remove("down"),p.a.off(window,"move",o.onControlsMove),p.a.off(window,"up",o.onControlsUp)},o.onInputChange=function(){o.updateTargetValue(o.domInput.value)},o.onFocusLost=function(){o.stopListeningFocusEnd()},o.onKeyDown=function(e){(e==v.a.touches.enter||e==v.a.touches.esc)&&o.domInput.blur()},o._value=o.target[o.param];var r=Object(f.a)(o.value);return o._min=1<(1>=arguments.length?0:arguments.length-1)?2>=arguments.length?void 0:arguments[2]:r[0],o._max=2<(1>=arguments.length?0:arguments.length-1)?3>=arguments.length?void 0:arguments[3]:r[1],o.domBar=o.dom.querySelector(".number-bar"),o.domLabel=o.dom.querySelector(".number-label"),o.domInput=o.dom.querySelector("input"),o.domControls=o.dom.querySelector(".number-controls"),o.domInput.addEventListener("change",o.onInputChange,!1),o.wControls=o.domControls.offsetWidth,p.a.on(o.domControls,"down",o.onControlsDown),o.dirty=!0,o.isFirstRefresh=!0,o.label=o.param,o}var a=t.prototype;return u()(t,e),a.update=function(){var e=this.target[this.param];this.value!=e&&(this.value=e),this.dirty&&this.refresh()},a.refresh=function(){this._value=this.formatValue(this._value),this.domInput.value=this._value.toFixed(5),this.percent=Object(g.a)((this._value-this._min)/(this._max-this._min)),this.domBar.style[m.c]="scale( "+this.percent+", 1 )",this.cbOnChange&&!this.isFirstRefresh&&this.cbOnChange(this._value),this.isFirstRefresh=!1,this.dirty=!1},a.updateTargetValue=function(e){this.target[this.param]=this.formatValue(e)},a.formatValue=function(e){return e=parseFloat(e),isNaN(e)&&(e=this._min+(this._max-this._min)/2),this.isInt&&(e>>=0),e},a.minMax=function(e,t){return this.min=e,this.max=t,this},a.setInt=function(e){return this.isInt=e,this},a.listenFocusEnd=function(){this.domInput.addEventListener("blur",this.onFocusLost,!1),v.a.onDown.add(this.onKeyDown)},a.stopListeningFocusEnd=function(){this.domInput.removeEventListener("blur",this.onFocusLost,!1),v.a.onDown.remove(this.onKeyDown)},i()(t,[{key:"value",set:function(e){e!=this._value&&(this._value=e,this.dirty=!0)},get:function(){return this._value}},{key:"min",set:function(e){this._min=parseFloat(e),this.dirty=!0},get:function(){return this._min}},{key:"max",set:function(e){this._max=parseFloat(e),this.dirty=!0},get:function(){return this._max}}]),t})(c.a);t.a=y},function(e,t,a){"use strict";var o=Math.min,n=Math.max,r=a(261),i=a.n(r),s=a(264),l=a.n(s);t.a=function(e){if(null==e||void 0==e)return new Float32Array([-10,10]);var t=0<e?5*-e:0==e?-10:5*e,a=0<e?5*e:0==e?10:-5*e;if(a=n(o(a,l.a),i.a+1),t=n(o(t,l.a-1),i.a),t>a){t=a,a=t}else t==a&&(t-=1);return 1<Math.abs(t)&&(t=parseFloat(t).toFixed(2),a=parseFloat(a).toFixed(2)),new Float32Array([t,a])}},function(e,t,a){e.exports={default:a(262),__esModule:!0}},function(e,t,a){a(263),e.exports=-9007199254740991},function(e,t,a){var o=a(31);o(o.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,a){e.exports={default:a(265),__esModule:!0}},function(e,t,a){a(266),e.exports=9007199254740991},function(e,t,a){var o=a(31);o(o.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(e,t){"use strict";t.a="<div class=\"number component\">\n\t<div class=\"number-icon\"></div>\n\t<div class=\"number-content\">\n\t\t<div class=\"number-bar-content\">\n\t\t\t<div class=\"number-bar\"></div>\n\t\t\t<div class=\"number-controls\"></div>\n\t\t</div>\n\t\t<div class=\"number-input\">\n\t\t\t<input type=\"number\" />\n\t\t</div>\n\t</div>\n\t<div class=\"number-label\">coucou</div>\n</div>\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(1),u=a(82),p=a(88),c=a(269),m=(function(e){function t(a,o){n()(this,t);var r=i()(this,e.call(this,c.a,a,2>=arguments.length?void 0:arguments[2]));return r.onUp=function(){r.isOnOff?(r.target[r.param]=!r.value,r.cbOnChange&&r.cbOnChange(r.value)):r.target[r.param]()},r.isOnOff=o,r.listen=o,r.value=!!r.isOnOff&&r.target[r.param],r.isOnOff&&r.dom.classList.add("onoff"),r.domLabel=r.dom.querySelector(".button-label"),r.label=r.param,r.refresh(),u.a.on(r.dom,"up",r.onUp),r}return l()(t,e),t.prototype.update=function(){if(this.isOnOff){var e=this.target[this.param];this.value!=e&&(this.value=e,this.refresh())}},t.prototype.refresh=function(){this.value?this.dom.classList.add("activated"):this.dom.classList.remove("activated")},t.prototype.dispose=function(){e.prototype.dispose.call(this),u.a.off(this.dom,"up",this.onUp)},t})(p.a);t.a=m},function(e,t){"use strict";t.a="<div class=\"button component\">\n\t<div class=\"button-label\">Label</div>\n\t<div class=\"button-onoff\">\n\t\t<div class=\"button-onoff-content\"></div>\n\t</div>\n</div>\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(88),u=a(271),p=(function(e){function t(a){n()(this,t);var o=i()(this,e.call(this,u.a,a,1>=arguments.length?void 0:arguments[1]));return o.onSelectChange=function(){o.target[o.label]=o.domSelect.value,o.cbOnChange&&o.cbOnChange(o.domSelect.value)},o.options=2>=arguments.length?void 0:arguments[2],o.label=o.param,o.init(),o}return l()(t,e),t.prototype.init=function(){this.domSelect=this.dom.querySelector("select");for(var e=document.createDocumentFragment(),t=0,a=this.options.length;t<a;t++){var o=this.options[t],n=document.createElement("option");n.setAttribute("value",o),n.innerHTML=o,e.appendChild(n)}this.domSelect.appendChild(e),this.domSelect.value=this.target[this.param],this.domSelect.addEventListener("change",this.onSelectChange,!1)},t.prototype.update=function(){},t.prototype.dispose=function(){this.domSelect.removeEventListener("change",this.onSelectChange,!1),this.cbOnChange=null,this.target=null},t})(d.a);t.a=p},function(e,t){"use strict";t.a="<div class=\"select component\">\n\t<select></select>\n\t<div class=\"select-arrow\">v</div>\n</div>\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(98),u=a(88),p=a(273),c=(function(e){function t(a){n()(this,t);var o=i()(this,e.call(this,p.a,a,1>=arguments.length?void 0:arguments[1]));return o.onKeyUp=function(){o.cbOnChange&&o.cbOnChange()},o.init(),o}return l()(t,e),t.prototype.init=function(){this.domLabel=this.dom.querySelector(".text-label"),this.label=this.param,this.domInput=this.dom.querySelector("input"),this.domInput.value=this.target[this.param],d.a.onUp.add(this.onKeyUp)},t.prototype.update=function(){var e=this.target[this.param];this.value!=e&&(this.label=e)},t})(u.a);t.a=c},function(e,t){"use strict";t.a="<div class=\"text component\">\n\t<div class=\"text-icon\"></div>\n\t<div class=\"text-label\">LABEL</div>\n\t<input type=\"text\">\n</div>\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(5),c=a(1),m=a(82),f=a(88),v=a(275),g=a.n(v),h=a(116),y=a(287),b=(function(e){function t(a){n()(this,t);for(var o=arguments.length,r=Array(1<o?o-1:0),i=1;i<o;i++)r[i-1]=arguments[i];var s=l()(this,e.call(this,y.a,a,r[0]));s.onColorChange=function(){s.domBar.style.backgroundColor=s.picker.getHexString();var e=s.picker.getRGB(),t=s.picker.getColor();"rgb"==s.vType?(s.target[s.param].r=e.r/255,s.target[s.param].g=e.g/255,s.target[s.param].b=e.b/255):s.target[s.param]=t,s.cbOnChange&&s.cbOnChange(t,e),s.label=s.param+" "+Object(h.b)(e.r,e.g,e.b)},s.onOver=function(){m.a.on(s.dom,"out",s.onOut),p.a.onUpdate.add(s.update),s.width=s.dom.offsetWidth-10,s.height=s.width,s.picker.setSize(s.width,.8571428571*s.width),s.picker.$el.style.display="block"},s.onOut=function(){m.a.off(s.dom,"out",s.onOut),s.picker.$el.style.display="none"},s.domLabel=s.dom.querySelector(".color-label"),s.domBar=s.dom.querySelector(".color-bar"),s.domPickerCnt=s.dom.querySelector(".color-picker-cnt");var d=a[r[0]],u=0;return"number"==typeof d?(s.vType="number",u=d):void 0!=d.r&&void 0!=d.g&&void 0!=d.b?(s.vType="rgb",u=Object(h.a)(d.r,d.g,d.b)):console.warn("value type not supported in addColor:",d),s.label=s.param,s.picker=new g.a({color:u,background:"#454545",el:s.domPickerCnt}),s.picker.onChange(s.onColorChange),s.domBar.style.backgroundColor=s.picker.getHexString(),m.a.on(s.dom,"over",s.onOver),s}return u()(t,e),t.prototype.dispose=function(){e.prototype.dispose.call(this)},i()(t,[{key:"label",set:function(e){this.domLabel.innerHTML=e},get:function(){return this.domLabel.innerHTML}}]),t})(f.a);t.a=b},function(e,t,a){"use strict";(function(){function t(e){return e=e||{},this.color=null,this.width=0,this.widthUnits="px",this.height=0,this.heightUnits="px",this.hue=0,this.position={x:0,y:0},this.huePosition=0,this.saturationWidth=0,this.hueHeight=0,this.maxHue=0,this.inputIsNumber=!1,this._onSaturationMouseDown=this._onSaturationMouseDown.bind(this),this._onSaturationMouseMove=this._onSaturationMouseMove.bind(this),this._onSaturationMouseUp=this._onSaturationMouseUp.bind(this),this._onHueMouseDown=this._onHueMouseDown.bind(this),this._onHueMouseMove=this._onHueMouseMove.bind(this),this._onHueMouseUp=this._onHueMouseUp.bind(this),this.$el=document.createElement("div"),this.$el.className="Scp",this.$el.innerHTML="<div class=\"Scp-saturation\"><div class=\"Scp-brightness\"></div><div class=\"Scp-sbSelector\"></div></div><div class=\"Scp-hue\"><div class=\"Scp-hSelector\"></div></div>",this.$saturation=this.$el.querySelector(".Scp-saturation"),this.$hue=this.$el.querySelector(".Scp-hue"),this.$sbSelector=this.$el.querySelector(".Scp-sbSelector"),this.$hSelector=this.$el.querySelector(".Scp-hSelector"),this.$saturation.addEventListener("mousedown",this._onSaturationMouseDown),this.$saturation.addEventListener("touchstart",this._onSaturationMouseDown),this.$hue.addEventListener("mousedown",this._onHueMouseDown),this.$hue.addEventListener("touchstart",this._onHueMouseDown),e.el&&this.appendTo(e.el),e.background&&this.setBackgroundColor(e.background),e.widthUnits&&(this.widthUnits=e.widthUnits),e.heightUnits&&(this.heightUnits=e.heightUnits),this.setSize(e.width||175,e.height||150),this.setColor(e.color),this}function o(e,t,a){return Math.min(Math.max(e,t),a)}function n(t){return t=0===t.type.indexOf("touch")?t.touches[0]:t,{x:t.clientX,y:t.clientY}}function r(e){return e="#"+("00000"+(0|e).toString(16)).substr(-6)}var i=a(276),s=a(277),l=a(280),d=a(281);i(t.prototype),t.prototype.appendTo=function(e){return e.appendChild(this.$el),this},t.prototype.remove=function(){this._onSaturationMouseUp(),this._onHueMouseUp(),this.$saturation.removeEventListener("mousedown",this._onSaturationMouseDown),this.$saturation.removeEventListener("touchstart",this._onSaturationMouseDown),this.$hue.removeEventListener("mousedown",this._onHueMouseDown),this.$hue.removeEventListener("touchstart",this._onHueMouseDown),this.off(),this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)},t.prototype.setColor=function(e){s(e)?(this.inputIsNumber=!0,e=r(e)):this.inputIsNumber=!1,this.color=l(e);var t=this.color.toHsv();return isNaN(t.h)||(this.hue=t.h),this._moveSelectorTo(this.saturationWidth*t.s,(1-t.v)*this.hueHeight),this._moveHueTo((1-this.hue/360)*this.hueHeight),this._updateHue(),this},t.prototype.setSize=function(e,t){return this.width=e,this.height=t,this.$el.style.width=this.width+this.widthUnits,this.$el.style.height=this.height+this.heightUnits,this.saturationWidth=this.width-25,this.$saturation.style.width=this.saturationWidth+"px",this.hueHeight=this.height,this.maxHue=this.hueHeight-2,this},t.prototype.setBackgroundColor=function(e){return s(e)&&(e=r(e)),this.$el.style.padding="5px",this.$el.style.background=l(e).toHexString(),this},t.prototype.setNoBackground=function(){this.$el.style.padding="0px",this.$el.style.background="none"},t.prototype.onChange=function(e){return this.on("update",e),this.emit("update",this.getHexString()),this},t.prototype.getColor=function(){return this.inputIsNumber?this.getHexNumber():this.color.toString()},t.prototype.getHexString=function(){return this.color.toHexString().toUpperCase()},t.prototype.getHexNumber=function(){return parseInt(this.color.toHex(),16)},t.prototype.getRGB=function(){return this.color.toRgb()},t.prototype.getHSV=function(){return this.color.toHsv()},t.prototype.isDark=function(){return this.color.isDark()},t.prototype.isLight=function(){return this.color.isLight()},t.prototype._moveSelectorTo=function(e,t){this.position.x=o(e,0,this.saturationWidth),this.position.y=o(t,0,this.hueHeight),d(this.$sbSelector,{x:this.position.x,y:this.position.y})},t.prototype._updateColorFromPosition=function(){this.color=l({h:this.hue,s:this.position.x/this.saturationWidth,v:1-this.position.y/this.hueHeight}),this._updateColor()},t.prototype._moveHueTo=function(e){this.huePosition=o(e,0,this.maxHue),d(this.$hSelector,{y:this.huePosition})},t.prototype._updateHueFromPosition=function(){var e=this.color.toHsv();this.hue=360*(1-this.huePosition/this.maxHue),this.color=l({h:this.hue,s:e.s,v:e.v}),this._updateHue()},t.prototype._updateHue=function(){var e=l({h:this.hue,s:1,v:1});this.$saturation.style.background="linear-gradient(to right, #fff, "+e.toHexString()+")",this._updateColor()},t.prototype._updateColor=function(){this.$sbSelector.style.background=this.color.toHexString(),this.$sbSelector.style.borderColor=this.color.isDark()?"#fff":"#000",this.emit("update",this.color.toHexString())},t.prototype._onSaturationMouseDown=function(t){var e=this.$saturation.getBoundingClientRect(),a=n(t).x,o=n(t).y;this._moveSelectorTo(a-e.left,o-e.top),this._updateColorFromPosition(),window.addEventListener("mouseup",this._onSaturationMouseUp),window.addEventListener("touchend",this._onSaturationMouseUp),window.addEventListener("mousemove",this._onSaturationMouseMove),window.addEventListener("touchmove",this._onSaturationMouseMove),t.preventDefault()},t.prototype._onSaturationMouseMove=function(t){var e=this.$saturation.getBoundingClientRect(),a=n(t).x,o=n(t).y;this._moveSelectorTo(a-e.left,o-e.top),this._updateColorFromPosition()},t.prototype._onSaturationMouseUp=function(){window.removeEventListener("mouseup",this._onSaturationMouseUp),window.removeEventListener("touchend",this._onSaturationMouseUp),window.removeEventListener("mousemove",this._onSaturationMouseMove),window.removeEventListener("touchmove",this._onSaturationMouseMove)},t.prototype._onHueMouseDown=function(t){var e=this.$hue.getBoundingClientRect(),a=n(t).y;this._moveHueTo(a-e.top),this._updateHueFromPosition(),window.addEventListener("mouseup",this._onHueMouseUp),window.addEventListener("touchend",this._onHueMouseUp),window.addEventListener("mousemove",this._onHueMouseMove),window.addEventListener("touchmove",this._onHueMouseMove),t.preventDefault()},t.prototype._onHueMouseMove=function(t){var e=this.$hue.getBoundingClientRect(),a=n(t).y;this._moveHueTo(a-e.top),this._updateHueFromPosition()},t.prototype._onHueMouseUp=function(){window.removeEventListener("mouseup",this._onHueMouseUp),window.removeEventListener("touchend",this._onHueMouseUp),window.removeEventListener("mousemove",this._onHueMouseMove),window.removeEventListener("touchmove",this._onHueMouseMove)},"undefined"!=typeof e&&e.exports&&(e.exports=t)})()},function(e){function t(e){if(e)return a(e)}function a(e){for(var a in t.prototype)e[a]=t.prototype[a];return e}e.exports=t;t.prototype.on=t.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},t.prototype.once=function(e,t){function a(){this.off(e,a),t.apply(this,arguments)}return a.fn=t,this.on(e,a),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var a=this._callbacks["$"+e];if(!a)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var o=0,n;o<a.length;o++)if(n=a[o],n===t||n.fn===t){a.splice(o,1);break}return this},t.prototype.emit=function(e){this._callbacks=this._callbacks||{};var t=[].slice.call(arguments,1),a=this._callbacks["$"+e];if(a){a=a.slice(0);for(var o=0,n=a.length;o<n;++o)a[o].apply(this,t)}return this},t.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},t.prototype.hasListeners=function(e){return!!this.listeners(e).length}},function(e,t,a){"use strict";var o=a(278);e.exports=function(e){var t=o(e);if("number"!==t&&"string"!==t)return!1;var a=+e;return 0<=a-a+1&&""!==e}},function(e,t,a){var o=a(279),n=Object.prototype.toString;e.exports=function(e){if("undefined"==typeof e)return"undefined";if(null===e)return"null";if(!0===e||!1===e||e instanceof Boolean)return"boolean";if("string"==typeof e||e instanceof String)return"string";if("number"==typeof e||e instanceof Number)return"number";if("function"==typeof e||e instanceof Function)return"function";if("undefined"!=typeof Array.isArray&&Array.isArray(e))return"array";if(e instanceof RegExp)return"regexp";if(e instanceof Date)return"date";var t=n.call(e);return"[object RegExp]"===t?"regexp":"[object Date]"===t?"date":"[object Arguments]"===t?"arguments":"[object Error]"===t?"error":o(e)?"buffer":"[object Set]"===t?"set":"[object WeakSet]"===t?"weakset":"[object Map]"===t?"map":"[object WeakMap]"===t?"weakmap":"[object Symbol]"===t?"symbol":"[object Int8Array]"===t?"int8array":"[object Uint8Array]"===t?"uint8array":"[object Uint8ClampedArray]"===t?"uint8clampedarray":"[object Int16Array]"===t?"int16array":"[object Uint16Array]"===t?"uint16array":"[object Int32Array]"===t?"int32array":"[object Uint32Array]"===t?"uint32array":"[object Float32Array]"===t?"float32array":"[object Float64Array]"===t?"float64array":"object"}},function(e){function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function a(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}e.exports=function(e){return null!=e&&(t(e)||a(e)||!!e._isBuffer)}},function(e,t,a){var o=Math.min,n=Math.max,r=Math.round,i;(function(l){function d(e,t){if(e=e?e:"",t=t||{},e instanceof d)return e;if(!(this instanceof d))return new d(e,t);var a=s(e);this._originalInput=e,this._r=a.r,this._g=a.g,this._b=a.b,this._a=a.a,this._roundA=X(100*this._a)/100,this._format=t.format||a.format,this._gradientType=t.gradientType,1>this._r&&(this._r=X(this._r)),1>this._g&&(this._g=X(this._g)),1>this._b&&(this._b=X(this._b)),this._ok=a.ok,this._tc_id=q++}function s(e){var t={r:0,g:0,b:0},o=1,n=null,r=null,i=null,s=!1,l=!1;return"string"==typeof e&&(e=j(e)),"object"==typeof e&&(V(e.r)&&V(e.g)&&V(e.b)?(t=u(e.r,e.g,e.b),s=!0,l="%"===(e.r+"").substr(-1)?"prgb":"rgb"):V(e.h)&&V(e.s)&&V(e.v)?(n=N(e.s),r=N(e.v),t=f(e.h,n,r),s=!0,l="hsv"):V(e.h)&&V(e.s)&&V(e.l)&&(n=N(e.s),i=N(e.l),t=c(e.h,n,i),s=!0,l="hsl"),e.hasOwnProperty("a")&&(o=e.a)),o=T(o),{ok:s,format:e.format||l,r:$(255,K(t.r,0)),g:$(255,K(t.g,0)),b:$(255,K(t.b,0)),a:o}}function u(e,t,a){return{r:255*U(e,255),g:255*U(t,255),b:255*U(a,255)}}function p(e,t,a){e=U(e,255),t=U(t,255),a=U(a,255);var o=K(e,t,a),n=$(e,t,a),r=(o+n)/2,i,u;if(o==n)i=u=0;else{var p=o-n;u=.5<r?p/(2-o-n):p/(o+n);o===e?i=(t-a)/p+(t<a?6:0):o===t?i=(a-e)/p+2:o===a?i=(e-t)/p+4:void 0;i/=6}return{h:i,s:u,l:r}}function c(e,t,a){function o(e,a,o){return 0>o&&(o+=1),1<o&&(o-=1),o<1/6?e+6*(a-e)*o:o<1/2?a:o<2/3?e+6*((a-e)*(2/3-o)):e}var n,r,i;if(e=U(e,360),t=U(t,100),a=U(a,100),0===t)n=r=i=a;else{var s=.5>a?a*(1+t):a+t-a*t,l=2*a-s;n=o(l,s,e+1/3),r=o(l,s,e),i=o(l,s,e-1/3)}return{r:255*n,g:255*r,b:255*i}}function m(e,t,a){e=U(e,255),t=U(t,255),a=U(a,255);var o=K(e,t,a),n=$(e,t,a),r=o-n,i,l;return l=0===o?0:r/o,o==n?i=0:(o===e?i=(t-a)/r+(t<a?6:0):o===t?i=(a-e)/r+2:o===a?i=(e-t)/r+4:void 0,i/=6),{h:i,s:l,v:o}}function f(e,a,o){e=6*U(e,360),a=U(a,100),o=U(o,100);var n=l.floor(e),i=e-n,s=o*(1-a),d=o*(1-i*a),u=o*(1-(1-i)*a),t=n%6,p=[o,d,s,s,u,o][t],r=[u,o,o,d,s,s][t],c=[s,s,u,o,o,d][t];return{r:255*p,g:255*r,b:255*c}}function v(e,t,a,o){var n=[B(X(e).toString(16)),B(X(t).toString(16)),B(X(a).toString(16))];return o&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function g(e,t,o,n,a){var r=[B(X(e).toString(16)),B(X(t).toString(16)),B(X(o).toString(16)),B(R(n))];return a&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)&&r[3].charAt(0)==r[3].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0)+r[3].charAt(0):r.join("")}function h(e,t,o,n){var a=[B(R(n)),B(X(e).toString(16)),B(X(t).toString(16)),B(X(o).toString(16))];return a.join("")}function y(e,t){t=0===t?0:t||10;var a=d(e).toHsl();return a.s-=t/100,a.s=O(a.s),d(a)}function b(e,t){t=0===t?0:t||10;var a=d(e).toHsl();return a.s+=t/100,a.s=O(a.s),d(a)}function _(e){return d(e).desaturate(100)}function w(e,t){t=0===t?0:t||10;var a=d(e).toHsl();return a.l+=t/100,a.l=O(a.l),d(a)}function S(e,t){t=0===t?0:t||10;var a=d(e).toRgb();return a.r=K(0,$(255,a.r-X(255*-(t/100)))),a.g=K(0,$(255,a.g-X(255*-(t/100)))),a.b=K(0,$(255,a.b-X(255*-(t/100)))),d(a)}function M(e,t){t=0===t?0:t||10;var a=d(e).toHsl();return a.l-=t/100,a.l=O(a.l),d(a)}function C(e,t){var a=d(e).toHsl(),o=(a.h+t)%360;return a.h=0>o?360+o:o,d(a)}function D(e){var t=d(e).toHsl();return t.h=(t.h+180)%360,d(t)}function k(e){var t=d(e).toHsl(),a=t.h;return[d(e),d({h:(a+120)%360,s:t.s,l:t.l}),d({h:(a+240)%360,s:t.s,l:t.l})]}function P(e){var t=d(e).toHsl(),a=t.h;return[d(e),d({h:(a+90)%360,s:t.s,l:t.l}),d({h:(a+180)%360,s:t.s,l:t.l}),d({h:(a+270)%360,s:t.s,l:t.l})]}function I(e){var t=d(e).toHsl(),a=t.h;return[d(e),d({h:(a+72)%360,s:t.s,l:t.l}),d({h:(a+216)%360,s:t.s,l:t.l})]}function A(e,t,a){t=t||6,a=a||30;var o=d(e).toHsl(),n=360/a,r=[d(e)];for(o.h=(o.h-(n*t>>1)+720)%360;--t;)o.h=(o.h+n)%360,r.push(d(o));return r}function z(e,t){t=t||6;for(var a=d(e).toHsv(),o=a.h,n=a.s,r=a.v,i=[],l=1/t;t--;)i.push(d({h:o,s:n,v:r})),r=(r+l)%1;return i}function T(e){return e=parseFloat(e),(isNaN(e)||0>e||1<e)&&(e=1),e}function U(e,t){L(e)&&(e="100%");var a=F(e);return e=$(t,K(0,parseFloat(e))),a&&(e=parseInt(e*t,10)/100),1e-6>l.abs(e-t)?1:e%t/parseFloat(t)}function O(e){return $(1,K(0,e))}function E(e){return parseInt(e,16)}function L(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function F(e){return"string"==typeof e&&-1!=e.indexOf("%")}function B(e){return 1==e.length?"0"+e:""+e}function N(e){return 1>=e&&(e=100*e+"%"),e}function R(e){return r(255*parseFloat(e)).toString(16)}function H(e){return E(e)/255}function V(e){return!!ee.CSS_UNIT.exec(e)}function j(e){e=e.replace(Y,"").replace(G,"").toLowerCase();var t=!1;if(J[e])e=J[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var a;return(a=ee.rgb.exec(e))?{r:a[1],g:a[2],b:a[3]}:(a=ee.rgba.exec(e))?{r:a[1],g:a[2],b:a[3],a:a[4]}:(a=ee.hsl.exec(e))?{h:a[1],s:a[2],l:a[3]}:(a=ee.hsla.exec(e))?{h:a[1],s:a[2],l:a[3],a:a[4]}:(a=ee.hsv.exec(e))?{h:a[1],s:a[2],v:a[3]}:(a=ee.hsva.exec(e))?{h:a[1],s:a[2],v:a[3],a:a[4]}:(a=ee.hex8.exec(e))?{r:E(a[1]),g:E(a[2]),b:E(a[3]),a:H(a[4]),format:t?"name":"hex8"}:(a=ee.hex6.exec(e))?{r:E(a[1]),g:E(a[2]),b:E(a[3]),format:t?"name":"hex"}:(a=ee.hex4.exec(e))?{r:E(a[1]+""+a[1]),g:E(a[2]+""+a[2]),b:E(a[3]+""+a[3]),a:H(a[4]+""+a[4]),format:t?"name":"hex8"}:!!(a=ee.hex3.exec(e))&&{r:E(a[1]+""+a[1]),g:E(a[2]+""+a[2]),b:E(a[3]+""+a[3]),format:t?"name":"hex"}}function W(e){var t,a;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),a=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==a&&"large"!==a&&(a="small"),{level:t,size:a}}var Y=/^\s+/,G=/\s+$/,q=0,X=r,$=o,K=n,Z=l.random;d.prototype={isDark:function(){return 128>this.getBrightness()},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var e=l.pow,t=this.toRgb(),a,o,n,r,i,s;return a=t.r/255,o=t.g/255,n=t.b/255,r=.03928>=a?a/12.92:e((a+.055)/1.055,2.4),i=.03928>=o?o/12.92:e((o+.055)/1.055,2.4),s=.03928>=n?n/12.92:e((n+.055)/1.055,2.4),.2126*r+.7152*i+.0722*s},setAlpha:function(e){return this._a=T(e),this._roundA=X(100*this._a)/100,this},toHsv:function(){var e=m(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=m(this._r,this._g,this._b),t=X(360*e.h),a=X(100*e.s),o=X(100*e.v);return 1==this._a?"hsv("+t+", "+a+"%, "+o+"%)":"hsva("+t+", "+a+"%, "+o+"%, "+this._roundA+")"},toHsl:function(){var e=p(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=p(this._r,this._g,this._b),t=X(360*e.h),a=X(100*e.s),o=X(100*e.l);return 1==this._a?"hsl("+t+", "+a+"%, "+o+"%)":"hsla("+t+", "+a+"%, "+o+"%, "+this._roundA+")"},toHex:function(e){return v(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return g(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:X(this._r),g:X(this._g),b:X(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+X(this._r)+", "+X(this._g)+", "+X(this._b)+")":"rgba("+X(this._r)+", "+X(this._g)+", "+X(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:X(100*U(this._r,255))+"%",g:X(100*U(this._g,255))+"%",b:X(100*U(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+X(100*U(this._r,255))+"%, "+X(100*U(this._g,255))+"%, "+X(100*U(this._b,255))+"%)":"rgba("+X(100*U(this._r,255))+"%, "+X(100*U(this._g,255))+"%, "+X(100*U(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(1>this._a)&&(Q[v(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+h(this._r,this._g,this._b,this._a),a=t,o=this._gradientType?"GradientType = 1, ":"";if(e){var n=d(e);a="#"+h(n._r,n._g,n._b,n._a)}return"progid:DXImageTransform.Microsoft.gradient("+o+"startColorstr="+t+",endColorstr="+a+")"},toString:function(e){var t=!!e;e=e||this._format;var a=!1,o=1>this._a&&0<=this._a,n=!t&&o&&("hex"===e||"hex6"===e||"hex3"===e||"hex4"===e||"hex8"===e||"name"===e);return n?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(a=this.toRgbString()),"prgb"===e&&(a=this.toPercentageRgbString()),("hex"===e||"hex6"===e)&&(a=this.toHexString()),"hex3"===e&&(a=this.toHexString(!0)),"hex4"===e&&(a=this.toHex8String(!0)),"hex8"===e&&(a=this.toHex8String()),"name"===e&&(a=this.toName()),"hsl"===e&&(a=this.toHslString()),"hsv"===e&&(a=this.toHsvString()),a||this.toHexString())},clone:function(){return d(this.toString())},_applyModification:function(e,t){var a=e.apply(null,[this].concat([].slice.call(t)));return this._r=a._r,this._g=a._g,this._b=a._b,this.setAlpha(a._a),this},lighten:function(){return this._applyModification(w,arguments)},brighten:function(){return this._applyModification(S,arguments)},darken:function(){return this._applyModification(M,arguments)},desaturate:function(){return this._applyModification(y,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(_,arguments)},spin:function(){return this._applyModification(C,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(A,arguments)},complement:function(){return this._applyCombination(D,arguments)},monochromatic:function(){return this._applyCombination(z,arguments)},splitcomplement:function(){return this._applyCombination(I,arguments)},triad:function(){return this._applyCombination(k,arguments)},tetrad:function(){return this._applyCombination(P,arguments)}},d.fromRatio=function(e,t){if("object"==typeof e){var a={};for(var o in e)e.hasOwnProperty(o)&&(a[o]="a"===o?e[o]:N(e[o]));e=a}return d(e,t)},d.equals=function(e,t){return!!(e&&t)&&d(e).toRgbString()==d(t).toRgbString()},d.random=function(){return d.fromRatio({r:Z(),g:Z(),b:Z()})},d.mix=function(e,t,a){a=0===a?0:a||50;var o=d(e).toRgb(),n=d(t).toRgb(),r=a/100,i={r:(n.r-o.r)*r+o.r,g:(n.g-o.g)*r+o.g,b:(n.b-o.b)*r+o.b,a:(n.a-o.a)*r+o.a};return d(i)},d.readability=function(e,t){var a=d(e),r=d(t);return(n(a.getLuminance(),r.getLuminance())+.05)/(o(a.getLuminance(),r.getLuminance())+.05)},d.isReadable=function(e,t,a){var o=d.readability(e,t),n,r;switch(r=!1,n=W(a),n.level+n.size){case"AAsmall":case"AAAlarge":r=4.5<=o;break;case"AAlarge":r=3<=o;break;case"AAAsmall":r=7<=o;}return r},d.mostReadable=function(e,t,a){var o=null,n=0,r,s,l,u;a=a||{},s=a.includeFallbackColors,l=a.level,u=a.size;for(var p=0;p<t.length;p++)r=d.readability(e,t[p]),r>n&&(n=r,o=d(t[p]));return d.isReadable(e,o,{level:l,size:u})||!s?o:(a.includeFallbackColors=!1,d.mostReadable(e,["#fff","#000"],a))};var J=d.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Q=d.hexNames=(function(e){var t={};for(var a in e)e.hasOwnProperty(a)&&(t[e[a]]=a);return t})(J),ee=(function(){var e="(?:"+"[-\\+]?\\d*\\.\\d+%?"+")|(?:"+"[-\\+]?\\d+%?"+")";return{CSS_UNIT:/(?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?)/,rgb:/rgb[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,rgba:/rgba[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsl:/hsl[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsla:/hsla[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsv:/hsv[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hsva:/hsva[\s|\(]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))[,|\s]+((?:[-\+]?\d*\.\d+%?)|(?:[-\+]?\d+%?))\s*\)?/,hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}})();"undefined"!=typeof e&&e.exports?e.exports=d:(i=function(){return d}.call(t,a,t,e),!(i!==void 0&&(e.exports=i)))})(Math)},function(e,t,a){"use strict";function o(e){for(var t in e)d.call(p,t)&&(e[p[t]]=e[t],delete e[t])}function n(){return Object.keys(l).map((function(e){return e}))}var r=a(282),i=a(283),l=a(284),s=a(285),d=Object.prototype.hasOwnProperty,u=r("transform"),p={x:"translateX",y:"translateY",z:"translateZ",origin:"transformOrigin"};t=e.exports=function(e,t){var a=[],n,p,c;for(n in o(t),t)if(d.call(t,n)){if(p=t[n],d.call(l.transform,n)){c=l.transform[n],i(p)&&(p=p.join(c.separator)),a.push(n+"("+s(p,c.defaultUnit,c.separator)+")");continue}if(d.call(l,n)){c=l[n],i(p)&&(p=p.join(c.separator)),e.style[r(n)]=s(p,c.defaultUnit,c.separator);continue}console.warn("dom-transform: this property (`"+n+"`) is not supported.")}e.style[u]=a.join(" ")},t.get=function(e,t){var a=e.style;if("string"==typeof t)return d.call(l.transform,t)?a[u]:a[r(t)];t||(t=n());var o={};return t.forEach((function(e){o[e]=a[r(e)]})),o},t.reset=function(e,t){var a=e.style;return"string"==typeof t?void(a[r(t)]=null):void(!t&&(t=n()),t.forEach((function(e){a[r(e)]=null})))},t.isSupported=function(){return 0<u.length}},function(e){function t(e){if(e=e.replace(/-([a-z])/g,(function(e,t){return t.toUpperCase()})),void 0!==o[e])return e;for(var t=e.charAt(0).toUpperCase()+e.slice(1),a=n.length,r;a--;)if(r=n[a]+t,void 0!==o[r])return r;return e}function a(e){return e in i?i[e]:i[e]=t(e)}var o="undefined"==typeof document?{}:document.createElement("p").style,n=["O","ms","Moz","Webkit"],r=/([A-Z])/g,i={};e.exports=a,e.exports.dash=function(e){return e=t(e),r.test(e)&&(e="-"+e.replace(r,"-$1"),r.lastIndex=0),e.toLowerCase()}},function(e){var t=Array.isArray,a=Object.prototype.toString;e.exports=t||function(e){return!!e&&"[object Array]"==a.call(e)}},function(e){"use strict";e.exports={transform:{translate:{defaultUnit:"px"},translate3d:{defaultUnit:"px"},translateX:{defaultUnit:"px"},translateY:{defaultUnit:"px"},translateZ:{defaultUnit:"px"},scale:{defaultUnit:""},scale3d:{defaultUnit:""},scaleX:{defaultUnit:""},scaleY:{defaultUnit:""},scaleZ:{defaultUnit:""},rotate:{defaultUnit:"deg"},rotate3d:{defaultUnit:""},rotateX:{defaultUnit:"deg"},rotateY:{defaultUnit:"deg"},rotateZ:{defaultUnit:"deg"},skew:{defaultUnit:"deg"},skewX:{defaultUnit:"deg"},skewY:{defaultUnit:"deg"},perspective:{defaultUnit:"px"},matrix:{defaultUnit:""},matrix3d:{defaultUnit:""}},transformOrigin:{defaultUnit:"px",separator:" "}}},function(e,t,a){"use strict";var o=a(286),n=/^-?\d+(\.\d+)?$/;e.exports=function(e,t,a){if(a=a||",","number"==typeof e)return""+e+t;var r=new RegExp(a,"g"),i=e.split(r.test(e)?a:" ");return i.map((function(e){return e=o(e),n.test(e)&&(e+=t),e})).join(a)}},function(e,t){t=e.exports=function(e){return e.replace(/^\s*|\s*$/g,"")},t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t){"use strict";t.a="<div class=\"color component\">\n\t<div class=\"color-content\">\n\t\t<div class=\"color-bar\"></div>\n\t\t<div class=\"color-label\">Name</div>\n\t</div>\n\t<div class=\"color-picker-cnt\">\n\t</div>\n</div>\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(82),u=a(88),p=a(289),c=a(290),m=(function(e){function t(a){n()(this,t);var o="root"==a,r=i()(this,e.call(this,o?p.a:c.a));return r.onTitleBarClick=function(){r.domContent.classList.contains("hide")?r.domContent.classList.remove("hide"):r.domContent.classList.add("hide")},r.open=function(){r.domContent.classList.contains("hide")&&r.domContent.classList.remove("hide")},r.close=function(){r.domContent.classList.contains("hide")||r.domContent.classList.add("hide")},r.label=a,r.isRoot=o,r.isRoot||(r.dom.classList.add("part"),r.dom.querySelector(".folder-title-text").innerHTML=r.label,r.domFolderTitleBar=r.dom.querySelector(".folder-title-bar"),r.domFolderButtons=r.dom.querySelector(".folder-title-buttons"),d.a.on(r.domFolderTitleBar,"click",r.onTitleBarClick)),r.domContent=r.dom.querySelector(".folder-content"),r}return l()(t,e),t.prototype.add=function(e){this.domContent.appendChild(e.dom)},t.prototype.addColor=function(){},t.prototype.dispose=function(){d.a.off(this.domFolderTitleBar,"click",this.onTitleBarClick)},t})(u.a);t.a=m},function(e,t){"use strict";t.a="<div class=\"folder root\">\n\t<div class=\"folder-content\">\n\t\t\n\t</div>\n</div>\n"},function(e,t){"use strict";t.a="<div class=\"folder\">\n\t<div class=\"folder-title-bar\">\n\t\t<div class=\"folder-title-text\">\n\t\t</div>\n\t\t<div class=\"folder-title-buttons\">\n\t\t</div>\n\t</div>\n\t<div class=\"folder-content\">\n\t\t\n\t</div>\n</div>\n"},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=(function(){function e(t,a){n()(this,e),this.setup(t,a)}return e.prototype.setup=function(e,t){this.components=e,this.folders=t},e.prototype.update=function(){for(var e=0,t=this.components.length;e<t;e++)this.components[e].update();for(var a=0,o=this.folders.length;a<o;a++)this.folders[a].updater.update()},e})();t.a=r},function(e){e.exports="precision highp float;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 modelMatrix;\n\nuniform float explode;\nuniform float time;\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\n\nvarying vec2 vUv;\nvarying float vY;\n\nlowp vec3 permute(in lowp vec3 x) { return mod( x*x*34.+x, 289.); }\nlowp float snoise(in lowp vec2 v) {\n  lowp vec2 i = floor((v.x+v.y)*.36602540378443 + v),\n      x0 = (i.x+i.y)*.211324865405187 + v - i;\n  lowp float s = step(x0.x,x0.y);\n  lowp vec2 j = vec2(1.0-s,s),\n      x1 = x0 - j + .211324865405187, \n      x3 = x0 - .577350269189626; \n  i = mod(i,289.);\n  lowp vec3 p = permute( permute( i.y + vec3(0, j.y, 1 ))+ i.x + vec3(0, j.x, 1 )   ),\n       m = max( .5 - vec3(dot(x0,x0), dot(x1,x1), dot(x3,x3)), 0.),\n       x = fract(p * .024390243902439) * 2. - 1.,\n       h = abs(x) - .5,\n      a0 = x - floor(x + .5);\n  return .5 + 65. * dot( pow(m,vec3(4.))*(- 0.85373472095314*( a0*a0 + h*h )+1.79284291400159 ), a0 * vec3(x0.x,x1.x,x3.x) + h * vec3(x0.y,x1.y,x3.y));\n}\n\nvoid main() {\n\tvUv = uv;\n\n\tvec3 finalPos = position.xyz;\n\tfinalPos += explode * normal;\n\n\tvec4 mvPosition = modelMatrix * vec4( finalPos, 1.0 );\n\tvY = mvPosition.y;\t\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( finalPos, 1.0 );\n\n}\n"},function(e){e.exports="precision highp float;\n\nuniform sampler2D map;\nuniform vec3 color;\nuniform float additivePercent;\n\nvarying vec2 vUv;\nvarying float vY;\n\nvoid main() {\n\n\t// hide in the floor\n\tif(step(0.01,vY) == 0.){\n\t\tdiscard;\n\t}\n\n\tvec4 texture = texture2D( map, vUv );\n\tvec3 colorFinal = texture.rgb * color;\n\tcolorFinal += colorFinal * additivePercent;\n\tgl_FragColor = vec4( colorFinal, 1.0 );\n\n}\n"},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(30),u=a(29),p=a(86),c=a(32),m=a(295),f=(function(t){function a(){n()(this,a);var o=d.a.models["monolith-dark"],r=o.children[0].geometry,s="textures/cube/SwedishRoyalCastle/",l=".jpg",p=new e.CubeTextureLoader().load([s+"px"+l,s+"nx"+l,s+"py"+l,s+"ny"+l,s+"pz"+l,s+"nz"+l],(function(e){return e.needsUpdate=!0}));p.format=e.RGBFormat,p.mapping=e.CubeReflectionMapping;var c=new m.a({envMap:p,envMapIntensity:1,color:331047,roughness:.3,metalness:.2,fog:!1,wireframe:!1,transparent:!0}),f=i()(this,t.call(this,r,c));f.onDarknessChange=function(e){TweenLite.killTweensOf(f,!1),1==e?TweenLite.to(f.position,2.1,{delay:.77,y:100*u.a.darkScale,ease:Quad.easeInOut}):TweenLite.to(f.position,1,{delay:.4,y:-500*u.a.darkScale,ease:Cubic.easeOut})},f.scale.multiplyScalar(u.a.darkScale),f.position.y=100*u.a.darkScale;var v=u.a.darkgui.addFolder("monolight dark");return v.addColor(f.material,"color"),v.add(c,"envMapIntensity",0,2),v.add(c,"roughness",0,1),v.add(c,"metalness",0,1),f.position.y=-1==u.a.isDarkness?-500*u.a.darkScale:100*u.a.darkScale,u.a.onDarknessChange.add(f.onDarknessChange),f}return l()(a,t),a.prototype.update=function(){},a})(e.Mesh);t.a=f}).call(t,a(28))},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=(function(t){function a(o){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;n()(this,a),s=s||"\n\t\t#define PHYSICAL\n\n\t\tuniform vec3 diffuse;\n\t\tuniform vec3 emissive;\n\t\tuniform float roughness;\n\t\tuniform float metalness;\n\t\tuniform float opacity;\n\t\t\n\t\t#ifndef STANDARD\n\t\t\tuniform float clearCoat;\n\t\t\tuniform float clearCoatRoughness;\n\t\t#endif\n\t\t\n\t\tvarying vec3 vViewPosition;\n\t\t\n\t\t#ifndef FLAT_SHADED\n\t\t\n\t\t\tvarying vec3 vNormal;\n\t\t\n\t\t#endif\n\t\t\n\t\t#include <common>\n\t\t#include <packing>\n\t\t#include <dithering_pars_fragment>\n\t\t#include <color_pars_fragment>\n\t\t#include <uv_pars_fragment>\n\t\t#include <uv2_pars_fragment>\n\t\t#include <map_pars_fragment>\n\t\t#include <alphamap_pars_fragment>\n\t\t#include <aomap_pars_fragment>\n\t\t#include <lightmap_pars_fragment>\n\t\t#include <emissivemap_pars_fragment>\n\t\t#include <envmap_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <bsdfs>\n\t\t#include <cube_uv_reflection_fragment>\n\t\t#include <lights_pars>\n\t\t#include <lights_physical_pars_fragment>\n\t\t#include <shadowmap_pars_fragment>\n\t\t#include <bumpmap_pars_fragment>\n\t\t#include <normalmap_pars_fragment>\n\t\t#include <roughnessmap_pars_fragment>\n\t\t#include <metalnessmap_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\t//--------CUSTOM\n\t\tvarying float vY;\n\t\t//-------------\n\n\t\tvoid main() {\n\t\t\n\t\t\t#include <clipping_planes_fragment>\n\t\t\n\t\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t\t\t\n\t\t\t//------- CUSTOM\n\t\t\tdiffuseColor.a = step(-0.01,vY);\n\t\t\tif(diffuseColor.a == 0.){\n\t\t\t\tdiscard;\n\t\t\t}\n\t\t\t//--------------\n\n\t\t\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t\t\tvec3 totalEmissiveRadiance = emissive;\n\t\t\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <map_fragment>\n\t\t\t#include <color_fragment>\n\t\t\t#include <alphamap_fragment>\n\t\t\t#include <alphatest_fragment>\n\t\t\t#include <roughnessmap_fragment>\n\t\t\t#include <metalnessmap_fragment>\n\t\t\t#include <normal_fragment>\n\t\t\t#include <emissivemap_fragment>\n\t\t\n\t\t\t// accumulation\n\t\t\t#include <lights_physical_fragment>\n\t\t\t#include <lights_template>\n\t\t\n\t\t\t// modulation\n\t\t\t#include <aomap_fragment>\n\t\t\n\t\t\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t\t\n\t\t\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t\t\t\n\t\t\t//---------------\n\t\t\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <encodings_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\t\t\t#include <dithering_fragment>\n\t\t\n\t\t}\n\t\t",l=l||"\n\t\t#define PHYSICAL\n\n\t\tvarying vec3 vViewPosition;\n\t\t\n\t\t#ifndef FLAT_SHADED\n\t\t\n\t\t\tvarying vec3 vNormal;\n\t\t\n\t\t#endif\n\t\t\n\t\t#include <common>\n\t\t#include <uv_pars_vertex>\n\t\t#include <uv2_pars_vertex>\n\t\t#include <displacementmap_pars_vertex>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <morphtarget_pars_vertex>\n\t\t#include <skinning_pars_vertex>\n\t\t#include <shadowmap_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\t//--------CUSTOM\n\t\tvarying float vY;\n\t\t//-------------\n\t\t\n\t\tvoid main() {\n\t\t\n\t\t\t#include <uv_vertex>\n\t\t\t#include <uv2_vertex>\n\t\t\t#include <color_vertex>\n\t\t\n\t\t\t#include <beginnormal_vertex>\n\t\t\t#include <morphnormal_vertex>\n\t\t\t#include <skinbase_vertex>\n\t\t\t#include <skinnormal_vertex>\n\t\t\t#include <defaultnormal_vertex>\n\t\t\n\t\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\t\t\n\t\t\tvNormal = normalize( transformedNormal );\n\t\t\n\t\t#endif\n\t\t\n\t\t\t#include <begin_vertex>\n\t\t\t#include <morphtarget_vertex>\n\t\t\t#include <skinning_vertex>\n\t\t\t#include <displacementmap_vertex>\n\t\t\t#include <project_vertex>\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\n\t\t\tvViewPosition = - mvPosition.xyz;\n\t\t\n\t\t\t//--------CUSTOM\n\t\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t\t\tvY = worldPosition.y;\n\t\t\t//-------------\n\n\t\t\t#include <shadowmap_vertex>\n\t\t\t#include <fog_vertex>\n\t\t\n\t\t}\n";var d=i()(this,t.call(this,o));return d.uniforms=e.UniformsUtils.merge([e.ShaderLib.standard.uniforms,r]),d.isMeshStandardMaterial=!0,d.setFlags(d,s,l),d.setValues(o),d}return l()(a,t),a.prototype.setFlags=function(e,t,a){e.vertexShader=a,e.fragmentShader=t,e.type="MeshCustomMaterial"},a})(e.MeshStandardMaterial);t.a=d}).call(t,a(28))},function(e,t,a){"use strict";var o=Math.PI;(function(e){var n=a(0),r=a.n(n),i=a(75),s=a.n(i),l=a(76),d=a.n(l),u=a(117),p=a(86),c=a(32),m=a(81),f=a(29),v=a(30),g=a(303),h=a.n(g),y=a(304),b=a.n(y),_=(function(t){function a(){r()(this,a);var o=s()(this,t.call(this));o.onDarknessChange=function(e){1==e?TweenLite.to(o.lines.material.uniforms.globalScale,.5,{value:0,ease:Cubic.easeIn,onComplete:function(){o.remove(o.lines)}}):(o.scale.set(1e-5,1e-5,1e-5),TweenLite.to(o.scale,.6,{delay:1.2,x:1,y:1,z:1,ease:Cubic.easeOut}),TweenLite.to(o.lines.material.uniforms.globalScale,.6,{delay:1.7,value:1,ease:Cubic.easeOut}),o.add(o.lines))},o.onStart=function(){o.scale.set(1e-5,1e-5,1e-5),TweenLite.to(o.scale,.6,{delay:2,x:1,y:1,z:1,ease:Cubic.easeOut}),TweenLite.to(o.lines.material.uniforms.globalScale,.6,{delay:2.4,value:1,ease:Cubic.easeOut})},o.fFishes=p.a.addFolder("Fishes"),o.count=1024,o.divisions=6,o.colorFish=8086501;var n=new e.Texture(v.a.images["fish-long"]);n.needsUpdate=!0;var i=new e.Texture(v.a.images["fish-small-3"]);return i.needsUpdate=!0,o.lines=new u.a(o.count,o.divisions,h.a,b.a),o.lines.frustumCulled=!1,o.lines.material.uniforms.lineWidth.value=16,o.lines.material.uniforms.map={type:"t",value:i},o.lines.material.uniforms.mapLong={type:"t",value:n},o.lines.material.uniforms.time={type:"f",value:0},o.lines.material.uniforms.colorFish={type:"c",value:new e.Color(o.colorFish)},o.lines.material.uniforms.globalScale={type:"f",value:1},o.lines.material.side=e.DoubleSide,o.fFishes.addColor(o,"colorFish").onChange((function(){o.lines.material.uniforms.colorFish.value.setHex(o.colorFish)})),o.lines.customDepthMaterial=null,o.radius=170,o.radiusVariationMin=-10,o.radiusVariationMax=80,o.fishALength=.04*.8,o.customizeGeometry(),o.add(o.lines),o.lines.material.uniforms.globalScale.value=0,f.a.onDarknessChange.add(o.onDarknessChange),f.a.onStart.addOnce(o.onStart),o}return d()(a,t),a.prototype.customizeGeometry=function(){var t=0,n=o*this.fishALength,r=n/this.divisions,s=2*o*Math.random(),a=this.radiusVariationMax-this.radiusVariationMin,d=[r,2*r,3*r],u=this.count*this.divisions;this.aAngles=new Float32Array(2*u),this.aTimes=new Float32Array(2*u),this.aMovsY=new Float32Array(2*u),this.aDivisionsID=new Float32Array(2*u),this.aRadius=new Float32Array(2*u),this.aFishIdx=new Float32Array(2*u),this.aFishLength=new Float32Array(2*u),this.aGlobalScale=new Float32Array(2*u),this.aYRange=new Float32Array(2*u);for(var l=0;l<this.count;l++){var i=1e4*Math.random(),p=1.5+3.25*Math.random();s=2*(2*o*Math.random());for(var m=this.radius+Object(c.b)(this.radiusVariationMin,this.radiusVariationMax,5),f=Object(c.b)(0,2,4)>>0,v=d[f],g=Object(c.b)(.85,2,4),h=26+Object(c.b)(20,200,7),y=0;y<this.divisions;y++)this.aAngles[t]=this.aAngles[t+1]=s,this.aFishIdx[t]=this.aFishIdx[t+1]=f,this.aFishLength[t]=this.aFishLength[t+1]=v,this.aRadius[t]=this.aRadius[t+1]=m,this.aTimes[t]=this.aTimes[t+1]=i,this.aMovsY[t]=this.aMovsY[t+1]=p,this.aDivisionsID[t]=this.aDivisionsID[t+1]=y,this.aGlobalScale[t]=this.aGlobalScale[t+1]=g,this.aYRange[t]=this.aYRange[t+1]=h,t+=2}this.lines.geometry.addAttribute("aMovY",new e.BufferAttribute(this.aMovsY,1)),this.lines.geometry.addAttribute("aAngle",new e.BufferAttribute(this.aAngles,1)),this.lines.geometry.addAttribute("aTime",new e.BufferAttribute(this.aTimes,1)),this.lines.geometry.addAttribute("aDivisionsID",new e.BufferAttribute(this.aDivisionsID,1)),this.lines.geometry.addAttribute("aRadius",new e.BufferAttribute(this.aRadius,1)),this.lines.geometry.addAttribute("aFishIdx",new e.BufferAttribute(this.aFishIdx,1)),this.lines.geometry.addAttribute("aFishLength",new e.BufferAttribute(this.aFishLength,1)),this.lines.geometry.addAttribute("aGlobalScale",new e.BufferAttribute(this.aGlobalScale,1)),this.lines.geometry.addAttribute("aYRange",new e.BufferAttribute(this.aYRange,1))},a.prototype.update=function(e){this.lines.material.uniforms.time.value+=.1*e},a})(e.Group);t.a=_}).call(t,a(28))},function(e,t,a){"use strict";var o=Math.floor;(function(e){var n=a(0),r=a.n(n),i=a(75),s=a.n(i),l=a(76),d=a.n(l),u=a(116),p=(function(t){function a(d,p,f,v){4<arguments.length&&void 0!==arguments[4]?arguments[4]:0;r()(this,a);var g=s()(this,t.call(this));m.call(g),g.linesCount=d,g.lineDivision=p,g.textureWidth=f,g.textureHeight=v,g.lums=[];for(var h=d*p,l=new Float32Array(2*h),y=new Float32Array(6*h),b=new Float32Array(4*h),_=new Float32Array(4*h),S=new Float32Array(4*h),M=new Float32Array(4*h),C=new Uint32Array(6*h),D=void 0,w=void 0,P=void 0,I=void 0,A=0;A<d;A++)for(var i=0;i<p;i++)w=A*p+i,P=2*w,I=4*w,l[P]=1,l[P+1]=-1,M[I]=M[I+2]=w%p/(p-1),M[I+1]=0,M[I+3]=1,b[I]=b[I+2]=o(w%f)/f,b[I+1]=b[I+3]=o(w/f)/v,D=0==i?w:w-1,_[I]=_[I+2]=D%f/f,_[I+1]=_[I+3]=o(D/f)/v,D=i==p-1?w:w+1,S[I]=S[I+2]=D%f/f,S[I+1]=S[I+3]=o(D/f)/v;for(var z=void 0,n=void 0,k=void 0,T=0;T<d;T++)for(var U=0;U<p-1;U++)z=2*U+2*(T*p),n=6*U+6*(T*p),C[n]=z,C[n+1]=z+1,C[n+2]=z+2,C[n+3]=z+2,C[n+4]=z+1,C[n+5]=z+3;for(var O=new e.Color(16777215),c=0;c<d;c++){k=60*Math.random()+120,g.lums.push(k);var E=Object(u.c)({hue:160,sat:120,lum:k});O.setHSL(E.h/255,E.s/255,E.l/255);for(var L=0;L<p;L++)n=6*L+6*(c*p),y[n]=y[n+3]=O.r,y[n+1]=y[n+4]=O.g,y[n+2]=y[n+5]=O.b}var F=new e.BufferAttribute(b,2);F.setDynamic(!0);var B=new e.BufferAttribute(_,2);B.setDynamic(!0);var N=new e.BufferAttribute(S,2);N.setDynamic(!0);var R=new e.BufferAttribute(M,2);R.setDynamic(!0);var H=new e.BufferAttribute(l,1);H.setDynamic(!0);var V=new e.BufferAttribute(y,3);V.setDynamic(!0),g.addAttribute("ID",F),g.addAttribute("prevID",B),g.addAttribute("nextID",N),g.addAttribute("uv",R),g.addAttribute("side",H),g.addAttribute("color",V);var j=new e.BufferAttribute(C,1);return j.setDynamic(!0),g.setIndex(j),g}return d()(a,t),a})(e.BufferGeometry),m=function(){var t=this;this.updateSizes=function(e,a){t.sizes=e;for(var r=t.attributes.side.array,s=t.attributes.uv.array,l=t.attributes.ID.array,d=t.attributes.prevID.array,u=t.attributes.nextID.array,p=void 0,c=void 0,m=void 0,f=void 0,v=0,g=t.textureWidth,h=t.textureHeight,y=0,i;y<e.length;y++){i=e[y];for(var b=0;b<i;b++)c=v+b,m=2*c,f=4*c,r[m]=1,r[m+1]=-1,s[f]=s[f+2]=b/(i-1),s[f+1]=0,s[f+3]=1,l[f]=l[f+2]=o(c%g)/g,l[f+1]=l[f+3]=o(c/g)/h,p=0==b?c:c-1,d[f]=d[f+2]=p%g/g,d[f+1]=d[f+3]=o(p/g)/h,p=b==i-1?c:c+1,u[f]=u[f+2]=p%g/g,u[f+1]=u[f+3]=o(p/g)/h;v+=i}var _,n;v=0;for(var w=new Uint32Array(6*a),S=0,M;S<e.length;S++){M=e[S];for(var C=0;C<M-1;C++)_=2*C+2*v,n=6*C+6*v,w[n]=_,w[n+1]=_+1,w[n+2]=_+2,w[n+3]=_+2,w[n+4]=_+1,w[n+5]=_+3;v+=M}t.attributes.side.needsUpdate=!0,t.attributes.uv.needsUpdate=!0,t.attributes.ID.needsUpdate=!0,t.attributes.prevID.needsUpdate=!0,t.attributes.nextID.needsUpdate=!0,t.index.setArray(w),t.index.needsUpdate=!0},this.updateColor=function(a){var o=t.attributes.color.array,n=t.linesCount,r=t.lineDivision,s=new e.Color,l;a=a||255*Math.random();for(var d=0,i;d<n;d++){i=Object(u.c)({hue:a,sat:120,lum:t.lums[d]}),s.setHSL(i.h/255,i.s/255,i.l/255);for(var p=0;p<r;p++)l=6*p+6*(d*r),o[l]=o[l+3]=s.r,o[l+1]=o[l+4]=s.g,o[l+2]=o[l+5]=s.b}t.attributes.color.needsUpdate=!0},this.updateColorFromArray=function(a){for(var n=t.attributes.color.array,r=t.linesCount,s=t.lineDivision,l=void 0,d=new e.Color,u=0,i;u<r;u++){i=a[o(Math.random()*a.length)],d.set("hsl("+i.h+","+i.s+"%,"+(i.l+o(16*(Math.random()-.5)))+"%)");for(var p=0;p<s;p++)l=6*p+6*(u*s),n[l]=n[l+3]=d.r,n[l+1]=n[l+4]=d.g,n[l+2]=n[l+5]=d.b}t.attributes.color.needsUpdate=!0}};t.a=p}).call(t,a(28))},function(e,t){"use strict";t.a=function(e){for(var t=2,a=2,o=0;t*a<e;)o++,0==o%2?a*=2:t*=2;return{width:t,height:a}}},function(e){e.exports="precision highp float;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform sampler2D positions;\n\nattribute mediump vec2 ID;\nattribute mediump vec2 prevID;\nattribute mediump vec2 nextID;\nattribute lowp float side;\nattribute lowp vec3 color;\nattribute lowp vec2 uv;\n\nuniform lowp vec2 resolution;\nvarying lowp vec4 vColor;\nuniform mediump float lineWidth;\n\nvec2 fix( vec4 i, float aspect ) {\n\tvec2 res = i.xy / i.w;\n\tres.x *= aspect;\n\treturn res;\n}\n\nvoid main() {\n\tvColor = vec4(color,1.);\n\n\tfloat aspect = resolution.x / resolution.y;\n\n\tmat4 m = projectionMatrix * modelViewMatrix;\n\tvec4 finalPosition = m * vec4( texture2D(positions,ID).rgb, 1.0 );\n\tvec4 prevPos = m * vec4( texture2D(positions,prevID).rgb, 1.0 );\n\tvec4 nextPos = m * vec4( texture2D(positions,nextID).rgb, 1.0 );\n\n\tvec2 prevP = fix( prevPos, aspect );\n\tvec2 nextP = fix( nextPos, aspect );\n\n\tvec2 dir = normalize( nextP - prevP );\n\tfinalPosition.xy += vec2( -dir.y/aspect, dir.x ) * lineWidth * side * texture2D(positions,ID).a;\n\t// needed to received shadow\n\t// finalPosition = inverse( m ) * finalPosition;\n\t// vec4 worldPosition = modelMatrix * finalPosition;\n\n\tgl_Position = finalPosition;\n}\n\n// needed to received shadow..\n// mat4 inverse(mat4 m) {\n//   float\n// \t  a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n// \t  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n// \t  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n// \t  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n// \t  b00 = a00 * a11 - a01 * a10,\n// \t  b01 = a00 * a12 - a02 * a10,\n// \t  b02 = a00 * a13 - a03 * a10,\n// \t  b03 = a01 * a12 - a02 * a11,\n// \t  b04 = a01 * a13 - a03 * a11,\n// \t  b05 = a02 * a13 - a03 * a12,\n// \t  b06 = a20 * a31 - a21 * a30,\n// \t  b07 = a20 * a32 - a22 * a30,\n// \t  b08 = a20 * a33 - a23 * a30,\n// \t  b09 = a21 * a32 - a22 * a31,\n// \t  b10 = a21 * a33 - a23 * a31,\n// \t  b11 = a22 * a33 - a23 * a32,\n\n// \t  det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n//   return mat4(\n// \t  a11 * b11 - a12 * b10 + a13 * b09,\n// \t  a02 * b10 - a01 * b11 - a03 * b09,\n// \t  a31 * b05 - a32 * b04 + a33 * b03,\n// \t  a22 * b04 - a21 * b05 - a23 * b03,\n// \t  a12 * b08 - a10 * b11 - a13 * b07,\n// \t  a00 * b11 - a02 * b08 + a03 * b07,\n// \t  a32 * b02 - a30 * b05 - a33 * b01,\n// \t  a20 * b05 - a22 * b02 + a23 * b01,\n// \t  a10 * b10 - a11 * b08 + a13 * b06,\n// \t  a01 * b08 - a00 * b10 - a03 * b06,\n// \t  a30 * b04 - a31 * b02 + a33 * b00,\n// \t  a21 * b02 - a20 * b04 - a23 * b00,\n// \t  a11 * b07 - a10 * b09 - a12 * b06,\n// \t  a00 * b09 - a01 * b07 + a02 * b06,\n// \t  a31 * b01 - a30 * b03 - a32 * b00,\n// \t  a20 * b03 - a21 * b01 + a22 * b00) / det;\n// }\n"},function(e){e.exports="precision highp float;\n\nvarying lowp vec4 vColor;\n\nvoid main() {\n\tgl_FragColor = vec4(vColor);\n}\n"},function(e){e.exports="#include <common>\n#include <logdepthbuf_pars_vertex>\n\n\nattribute mediump vec2 ID;\nattribute mediump vec2 prevID;\nattribute mediump vec2 nextID;\nattribute lowp float side;\n\nuniform lowp vec2 resolution;\nuniform mediump float lineWidth;\nuniform sampler2D positions;\n\nvarying float alpha;\n\nvec2 fix( vec4 i, float aspect ) {\n\tvec2 res = i.xy / i.w;\n\tres.x *= aspect;\n\treturn res;\n}\n\nvoid main() {\n\tfloat aspect = resolution.x / resolution.y;\n\n\talpha = texture2D(positions,ID).a;\n\tmat4 m = projectionMatrix * modelViewMatrix;\n\tvec4 finalPosition = m * vec4( texture2D(positions,ID).rgb, 1.0 );\n\tvec4 prevPos = m * vec4( texture2D(positions,prevID).rgb, 1.0 );\n\tvec4 nextPos = m * vec4( texture2D(positions,nextID).rgb, 1.0 );\n\n\tvec2 prevP = fix( prevPos, aspect );\n\tvec2 nextP = fix( nextPos, aspect );\n\n\tvec2 dir = normalize( nextP - prevP );\n\tfinalPosition.xy += vec2( -dir.y/aspect, dir.x ) * lineWidth * side;\n\tgl_Position = finalPosition;\n\t#include <logdepthbuf_vertex>\n}\n"},function(e){e.exports="#define DEPTH_PACKING 0\n#include <common>\n#include <packing>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying lowp float alpha;\nuniform float alphaTest;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif(alpha<alphaTest) discard;\n\t#include <logdepthbuf_fragment>\n\t#include <encodings_fragment>\n\n}\n"},function(e){e.exports="precision highp float;\n\n#define PI 3.1415926535897932384626433832795\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelViewMatrix;\n\n// uniform sampler2D positions;\nuniform vec2 growSide;\n\nattribute mediump vec2 ID;\nattribute mediump vec2 prevID;\nattribute mediump vec2 nextID;\nattribute lowp float side;\nattribute lowp vec3 color;\nattribute highp vec2 uv;\nattribute lowp float aAngle;\nattribute lowp float aTime;\nattribute lowp float aMovY;\nattribute lowp float aDivisionsID;\nattribute lowp float aRadius;\nattribute lowp float aFishIdx;\nattribute lowp float aFishLength;\nattribute lowp float aGlobalScale;\nattribute lowp float aYRange;\n// attribute lowp float aDivisionsID;\n\nuniform lowp vec2 resolution;\nuniform mediump float lineWidth;\nuniform mediump float time;\nuniform mediump float globalScale;\n\nvarying lowp float vOpacity;\n// varying lowp vec4 vColor;\nvarying highp vec2 vUv;\n\nvarying float vFishIdx;\n\nvec2 fix( vec4 i, float aspect ) {\n\tvec2 res = i.xy / i.w;\n\tres.x *= aspect;\n\treturn res;\n}\n\nfloat rand(vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat range( float oldValue, float oldMin, float oldMax, float newMin, float newMax, bool clamped ) {\n\tfloat oldRange = ( oldMax - oldMin );\n\tfloat newRange = newMax - newMin;\n\tfloat newValue = ( ( ( oldValue - oldMin ) * newRange ) / oldRange ) + newMin;\n\tif( clamped ) {\n\t\treturn clamp( newValue, newMin, newMax );\n\t}\n\treturn newValue;\n}\n\nvoid main() {\n\t// vColor = vec4(color,1.);\n\tvUv = uv;\n\n\tvFishIdx = aFishIdx;\n\n\tfloat aspect = resolution.x / resolution.y;\n\n\tmat4 m = projectionMatrix * modelViewMatrix;\n\n\t// vec3 fpos = texture2D(positions,ID).rgb;\n\t// vec3 ppos = texture2D(positions,prevID).rgb;\n\t// vec3 npos = texture2D(positions,nextID).rgb;\n\n\tfloat a = aAngle + time * .005 + aTime;\n\tfloat aMod = a = mod( a, PI * 4. );\n\n\tfloat scale = 1.;\n\tscale -= 1. - smoothstep( 0., PI * .5, aMod );\n\tscale -= smoothstep( PI * 4. - PI * .5, PI * 4., aMod );\n\tscale *= aGlobalScale;\n\tscale *= globalScale;\n\n\tfloat opacity = 1.;\n\topacity -= 1. - smoothstep( 0., PI * .2, aMod );\n\topacity -= smoothstep( PI * 4. - PI * .2, PI * 4., aMod );\n\tvOpacity = opacity;\n\n\t// float pa = a + ppos.z * ppos.y * scale;\n\t// vec3 nppos = vec3( 0. );\n\t// nppos.x = cos( pa ) * ppos.x; \n\t// nppos.y = 10.;\n\t// nppos.z = sin( pa ) * ppos.x;\n\n\tfloat fa = a + aDivisionsID * aFishLength * scale;\n\tvec3 nfpos = vec3( 0. );\n\tnfpos.x = cos( fa ) * aRadius; \n\tnfpos.y = 10.;\n\tnfpos.z = sin( fa ) * aRadius; \n\n\t// float na = a + npos.z * npos.y * scale;\n\t// vec3 nnpos = vec3( 0. );\n\t// nnpos.x = cos( na ) * npos.x; \n\t// nnpos.y = 10.;\n\t// nnpos.z = sin( na ) * npos.x; \n\n\t// float pMovY = sin( ( pa + 10. + time * .005 + aTime ) * aMovY ) * aMovY * 2.;\n\tfloat fMovX = sin( ( fa + 10. + time * .0075 + aTime ) * aMovY ) * aMovY * 2.5;\n\tfloat fMovY = sin( ( fa + 10. + time * .0025 + aTime ) * aMovY ) * aMovY * 2.;\n\t// float nMovY = sin( ( na + 10. + time * .005 + aTime ) * aMovY ) * aMovY * 2.;\n\n\tfloat rd = rand( vec2( aTime ) ) * aYRange - aYRange * .5;\n\tfloat aRanged = range( aMod, 0., PI * 4., 0., 550., true );\n\tnfpos.y += aRanged + rd;\n\t// nppos.y += aRanged + rd;\n\t// nnpos.y += aRanged + rd;\n\n\tnfpos.y += .5 * aDivisionsID;\n\n\n\t// vec2 prevP = fix( vec4( nppos, 1. ), aspect );\n\t// vec2 nextP = fix( vec4( nnpos, 1. ), aspect );\n \n\t// vec2 dir = normalize( nextP - prevP );\n\t// nfpos.xy += vec2( -dir.y/aspect, dir.x )  * lineWidth * scale * side * texture2D(positions,ID).a;\n\tnfpos.x += fMovX * .5;\n\tnfpos.y += fMovY;\n\tnfpos.z -= fMovX * .5;\n\t// nppos.y += pMovY;\n\t// nnpos.y += nMovY;\n\n\tvec4 finalPosition = m * vec4( nfpos, 1.0 );\n\t// vec4 prevPos = m * vec4( nppos, 1.0 );\n\t// vec4 nextPos = m * vec4( nnpos, 1.0 );\n\n\t// vec2 prevP = fix( prevPos, aspect );\n\t// vec2 nextP = fix( nextPos, aspect );\n \n\t// vec2 dir = normalize( nextP - prevP );\n\tfinalPosition.xy += vec2( .01, 1. / aspect ) * lineWidth * ( aFishIdx * .5 + 1. ) * scale * side;\n\n\t// needed to received shadow\n\t// finalPosition = inverse( m ) * finalPosition;\n\t// vec4 worldPosition = modelMatrix * finalPosition;\n\n\tgl_Position = finalPosition;\n}\n\n// needed to received shadow..\n// mat4 inverse(mat4 m) {\n//   float\n// \t  a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n// \t  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n// \t  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n// \t  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n// \t  b00 = a00 * a11 - a01 * a10,\n// \t  b01 = a00 * a12 - a02 * a10,\n// \t  b02 = a00 * a13 - a03 * a10,\n// \t  b03 = a01 * a12 - a02 * a11,\n// \t  b04 = a01 * a13 - a03 * a11,\n// \t  b05 = a02 * a13 - a03 * a12,\n// \t  b06 = a20 * a31 - a21 * a30,\n// \t  b07 = a20 * a32 - a22 * a30,\n// \t  b08 = a20 * a33 - a23 * a30,\n// \t  b09 = a21 * a32 - a22 * a31,\n// \t  b10 = a21 * a33 - a23 * a31,\n// \t  b11 = a22 * a33 - a23 * a32,\n\n// \t  det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n//   return mat4(\n// \t  a11 * b11 - a12 * b10 + a13 * b09,\n// \t  a02 * b10 - a01 * b11 - a03 * b09,\n// \t  a31 * b05 - a32 * b04 + a33 * b03,\n// \t  a22 * b04 - a21 * b05 - a23 * b03,\n// \t  a12 * b08 - a10 * b11 - a13 * b07,\n// \t  a00 * b11 - a02 * b08 + a03 * b07,\n// \t  a32 * b02 - a30 * b05 - a33 * b01,\n// \t  a20 * b05 - a22 * b02 + a23 * b01,\n// \t  a10 * b10 - a11 * b08 + a13 * b06,\n// \t  a01 * b08 - a00 * b10 - a03 * b06,\n// \t  a30 * b04 - a31 * b02 + a33 * b00,\n// \t  a21 * b02 - a20 * b04 - a23 * b00,\n// \t  a11 * b07 - a10 * b09 - a12 * b06,\n// \t  a00 * b09 - a01 * b07 + a02 * b06,\n// \t  a31 * b01 - a30 * b03 - a32 * b00,\n// \t  a20 * b03 - a21 * b01 + a22 * b00) / det;\n// }\n"},function(e){e.exports="precision highp float;\n\nuniform sampler2D map;\nuniform sampler2D mapLong;\nuniform vec3 colorFish;\n\n// varying lowp vec4 vColor;\nvarying lowp float vOpacity;\nvarying highp vec2 vUv;\n\nvarying float vFishIdx;\n\nvoid main() {\n\n\tfloat uvCorrected = 1. - vUv.y;\n\t// if( gl_FrontFacing ) {\n\t// \tuvCorrected = 1. - vUv.y;\n\t// }\n\tvec4 texture = texture2D( mapLong, vec2( vUv.x, uvCorrected ) );\n\tif( vFishIdx == 0. ) {\n\t\ttexture = texture2D( map, vec2( vUv.x, uvCorrected ) );\n\t}\n\n\tfloat a = texture.a * vOpacity;\n\tif( a <= 0.9 ) {\n\t\tdiscard;\n\t}\n\n\tvec4 colorFinal = vec4( 1. );\n\tcolorFinal.rgb = texture.rgb * colorFish;\n\n\t// gl_FragColor = vec4(vec3( 1., 0., 1. ) * vOpacity, vOpacity);\n\tgl_FragColor = colorFinal * vOpacity;\n\t// gl_FragColor = vec4( 1., 0, 1., 1. );\n}\n"},function(e,t,a){"use strict";var o=Math.PI;(function(e){var n=a(0),r=a.n(n),i=a(75),s=a.n(i),l=a(76),d=a.n(l),u=a(117),p=a(86),c=a(32),m=a(81),f=a(29),v=a(30),g=a(306),h=a.n(g),y=a(307),b=a.n(y),_=(function(t){function a(){r()(this,a);var o=s()(this,t.call(this));o.onDarknessChange=function(e){1==e?(TweenLite.to(o.lines.material.uniforms.globalScale,.6,{delay:1.4,value:1,ease:Cubic.easeOut}),o.add(o.lines)):TweenLite.to(o.lines.material.uniforms.globalScale,.5,{value:0,ease:Cubic.easeIn,onComplete:function(){o.remove(o.lines)}})},o.fFishes=p.a.addFolder("Fishes Dark"),o.count=1024,o.divisions=6,o.colorFish=16777215;var n=new e.Texture(v.a.images["fish-long"]);n.needsUpdate=!0;var i=new e.Texture(v.a.images["fish-small-3"]);return i.needsUpdate=!0,o.lines=new u.a(o.count,o.divisions,h.a,b.a),o.lines.frustumCulled=!1,o.lines.material.uniforms.lineWidth.value=26*1.1,o.lines.material.uniforms.map={type:"t",value:i},o.lines.material.uniforms.mapLong={type:"t",value:n},o.lines.material.uniforms.time={type:"f",value:0},o.lines.material.uniforms.colorFish={type:"c",value:new e.Color(o.colorFish)},o.lines.material.uniforms.globalScale={type:"f",value:0},o.lines.material.side=e.DoubleSide,o.fFishes.addColor(o,"colorFish").onChange((function(){o.lines.material.uniforms.colorFish.value.setHex(o.colorFish)})),o.lines.customDepthMaterial=null,o.radius=900,o.radiusVariationMin=-50,o.radiusVariationMax=350,o.fishALength=.01*1.1,o.customizeGeometry(),o.position.y=200,f.a.onDarknessChange.add(o.onDarknessChange),o}return d()(a,t),a.prototype.customizeGeometry=function(){var t=0,n=o*this.fishALength,r=n/this.divisions,s=2*o*Math.random(),a=this.radiusVariationMax-this.radiusVariationMin,d=[r,2*r,3*r],u=this.count*this.divisions;this.aAngles=new Float32Array(2*u),this.aTimes=new Float32Array(2*u),this.aMovsY=new Float32Array(2*u),this.aDivisionsID=new Float32Array(2*u),this.aRadius=new Float32Array(2*u),this.aFishIdx=new Float32Array(2*u),this.aFishLength=new Float32Array(2*u),this.aGlobalScale=new Float32Array(2*u),this.aYRange=new Float32Array(2*u);for(var l=0;l<this.count;l++){var i=1e4*Math.random(),p=1.5+3.25*Math.random();s=2*(2*o*Math.random());for(var m=this.radius+Object(c.b)(this.radiusVariationMin,this.radiusVariationMax,5),f=Object(c.b)(0,2,4)>>0,v=d[f],g=Object(c.b)(.85,2,4),h=50+Object(c.b)(300,600,7),y=0;y<this.divisions;y++)this.aAngles[t]=this.aAngles[t+1]=s,this.aFishIdx[t]=this.aFishIdx[t+1]=f,this.aFishLength[t]=this.aFishLength[t+1]=v,this.aRadius[t]=this.aRadius[t+1]=m,this.aTimes[t]=this.aTimes[t+1]=i,this.aMovsY[t]=this.aMovsY[t+1]=p,this.aDivisionsID[t]=this.aDivisionsID[t+1]=y,this.aGlobalScale[t]=this.aGlobalScale[t+1]=g,this.aYRange[t]=this.aYRange[t+1]=h,t+=2}this.lines.geometry.addAttribute("aMovY",new e.BufferAttribute(this.aMovsY,1)),this.lines.geometry.addAttribute("aAngle",new e.BufferAttribute(this.aAngles,1)),this.lines.geometry.addAttribute("aTime",new e.BufferAttribute(this.aTimes,1)),this.lines.geometry.addAttribute("aDivisionsID",new e.BufferAttribute(this.aDivisionsID,1)),this.lines.geometry.addAttribute("aRadius",new e.BufferAttribute(this.aRadius,1)),this.lines.geometry.addAttribute("aFishIdx",new e.BufferAttribute(this.aFishIdx,1)),this.lines.geometry.addAttribute("aFishLength",new e.BufferAttribute(this.aFishLength,1)),this.lines.geometry.addAttribute("aGlobalScale",new e.BufferAttribute(this.aGlobalScale,1)),this.lines.geometry.addAttribute("aYRange",new e.BufferAttribute(this.aYRange,1))},a.prototype.update=function(e){this.lines.material.uniforms.time.value+=.1*e},a})(e.Group);t.a=_}).call(t,a(28))},function(e){e.exports="precision highp float;\n\n#define PI 3.1415926535897932384626433832795\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelMatrix;\nuniform mat4 viewMatrix;\nuniform mat4 modelViewMatrix;\n\n// uniform sampler2D positions;\nuniform vec2 growSide;\n\nattribute mediump vec2 ID;\nattribute mediump vec2 prevID;\nattribute mediump vec2 nextID;\nattribute lowp float side;\nattribute lowp vec3 color;\nattribute highp vec2 uv;\nattribute lowp float aAngle;\nattribute lowp float aTime;\nattribute lowp float aMovY;\nattribute lowp float aDivisionsID;\nattribute lowp float aRadius;\nattribute lowp float aFishIdx;\nattribute lowp float aFishLength;\nattribute lowp float aGlobalScale;\nattribute lowp float aYRange;\n// attribute lowp float aDivisionsID;\n\nuniform lowp vec2 resolution;\nuniform mediump float lineWidth;\nuniform mediump float time;\nuniform mediump float globalScale;\n\nvarying lowp float vOpacity;\n// varying lowp vec4 vColor;\nvarying highp vec2 vUv;\n\nvarying float vFishIdx;\n\nvec2 fix( vec4 i, float aspect ) {\n\tvec2 res = i.xy / i.w;\n\tres.x *= aspect;\n\treturn res;\n}\n\nfloat rand(vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat range( float oldValue, float oldMin, float oldMax, float newMin, float newMax, bool clamped ) {\n\tfloat oldRange = ( oldMax - oldMin );\n\tfloat newRange = newMax - newMin;\n\tfloat newValue = ( ( ( oldValue - oldMin ) * newRange ) / oldRange ) + newMin;\n\tif( clamped ) {\n\t\treturn clamp( newValue, newMin, newMax );\n\t}\n\treturn newValue;\n}\n\nvoid main() {\n\t// vColor = vec4(color,1.);\n\tvUv = uv;\n\n\tvFishIdx = aFishIdx;\n\n\tfloat aspect = resolution.x / resolution.y;\n\n\tmat4 m = projectionMatrix * modelViewMatrix;\n\n\t// vec3 fpos = texture2D(positions,ID).rgb;\n\t// vec3 ppos = texture2D(positions,prevID).rgb;\n\t// vec3 npos = texture2D(positions,nextID).rgb;\n\n\tfloat piValue = PI * 3.;\n\n\tfloat a = aAngle + time * .0025 + aTime;\n\tfloat aMod = a = mod( a, piValue );\n\n\tfloat scale = 1.;\n\tscale -= 1. - smoothstep( 0., PI * .5, aMod );\n\tscale -= smoothstep( piValue - PI * .5, piValue, aMod );\n\tscale *= aGlobalScale;\n\tscale *= globalScale;\n\n\tfloat opacity = 1.;\n\topacity -= 1. - smoothstep( 0., PI * .2, aMod );\n\topacity -= smoothstep( piValue - PI * .2, piValue, aMod );\n\tvOpacity = opacity;\n\n\t// float pa = a + ppos.z * ppos.y * scale;\n\t// vec3 nppos = vec3( 0. );\n\t// nppos.x = cos( pa ) * ppos.x; \n\t// nppos.y = 10.;\n\t// nppos.z = sin( pa ) * ppos.x;\n\n\tfloat fa = a + aDivisionsID * aFishLength * scale;\n\tvec3 nfpos = vec3( 0. );\n\tnfpos.x = cos( fa ) * aRadius; \n\tnfpos.y = 10.;\n\tnfpos.z = sin( fa ) * aRadius; \n\n\t// float na = a + npos.z * npos.y * scale;\n\t// vec3 nnpos = vec3( 0. );\n\t// nnpos.x = cos( na ) * npos.x; \n\t// nnpos.y = 10.;\n\t// nnpos.z = sin( na ) * npos.x; \n\n\t// float pMovY = sin( ( pa + 10. + time * .005 + aTime ) * aMovY ) * aMovY * 2.;\n\tfloat fMovX = sin( ( fa + 10. + time * .0075 + aTime ) * aMovY ) * aMovY * 4.5;\n\tfloat fMovY = sin( ( fa + 10. + time * .0025 + aTime ) * aMovY ) * aMovY * 4.;\n\t// float nMovY = sin( ( na + 10. + time * .005 + aTime ) * aMovY ) * aMovY * 2.;\n\n\tfloat rd = rand( vec2( aTime ) ) * aYRange - aYRange * .5;\n\tfloat aRanged = range( aMod, 0., piValue, 0., 3000., true );\n\tnfpos.y += aRanged + rd;\n\t// nppos.y += aRanged + rd;\n\t// nnpos.y += aRanged + rd;\n\n\tnfpos.y += 2.45 * aDivisionsID;\n\n\n\t// vec2 prevP = fix( vec4( nppos, 1. ), aspect );\n\t// vec2 nextP = fix( vec4( nnpos, 1. ), aspect );\n \n\t// vec2 dir = normalize( nextP - prevP );\n\t// nfpos.xy += vec2( -dir.y/aspect, dir.x )  * lineWidth * scale * side * texture2D(positions,ID).a;\n\tnfpos.x += fMovX * .5;\n\tnfpos.y += fMovY;\n\tnfpos.z -= fMovX * .5;\n\t// nppos.y += pMovY;\n\t// nnpos.y += nMovY;\n\n\tvec4 finalPosition = m * vec4( nfpos, 1.0 );\n\t// vec4 prevPos = m * vec4( nppos, 1.0 );\n\t// vec4 nextPos = m * vec4( nnpos, 1.0 );\n\n\t// vec2 prevP = fix( prevPos, aspect );\n\t// vec2 nextP = fix( nextPos, aspect );\n \n\t// vec2 dir = normalize( nextP - prevP );\n\tfinalPosition.xy += vec2( .08, 1. / aspect ) * lineWidth * ( aFishIdx * .5 + 1. ) * scale * side;\n\n\t// needed to received shadow\n\t// finalPosition = inverse( m ) * finalPosition;\n\t// vec4 worldPosition = modelMatrix * finalPosition;\n\n\tgl_Position = finalPosition;\n}\n\n// needed to received shadow..\n// mat4 inverse(mat4 m) {\n//   float\n// \t  a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],\n// \t  a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],\n// \t  a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],\n// \t  a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],\n\n// \t  b00 = a00 * a11 - a01 * a10,\n// \t  b01 = a00 * a12 - a02 * a10,\n// \t  b02 = a00 * a13 - a03 * a10,\n// \t  b03 = a01 * a12 - a02 * a11,\n// \t  b04 = a01 * a13 - a03 * a11,\n// \t  b05 = a02 * a13 - a03 * a12,\n// \t  b06 = a20 * a31 - a21 * a30,\n// \t  b07 = a20 * a32 - a22 * a30,\n// \t  b08 = a20 * a33 - a23 * a30,\n// \t  b09 = a21 * a32 - a22 * a31,\n// \t  b10 = a21 * a33 - a23 * a31,\n// \t  b11 = a22 * a33 - a23 * a32,\n\n// \t  det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n//   return mat4(\n// \t  a11 * b11 - a12 * b10 + a13 * b09,\n// \t  a02 * b10 - a01 * b11 - a03 * b09,\n// \t  a31 * b05 - a32 * b04 + a33 * b03,\n// \t  a22 * b04 - a21 * b05 - a23 * b03,\n// \t  a12 * b08 - a10 * b11 - a13 * b07,\n// \t  a00 * b11 - a02 * b08 + a03 * b07,\n// \t  a32 * b02 - a30 * b05 - a33 * b01,\n// \t  a20 * b05 - a22 * b02 + a23 * b01,\n// \t  a10 * b10 - a11 * b08 + a13 * b06,\n// \t  a01 * b08 - a00 * b10 - a03 * b06,\n// \t  a30 * b04 - a31 * b02 + a33 * b00,\n// \t  a21 * b02 - a20 * b04 - a23 * b00,\n// \t  a11 * b07 - a10 * b09 - a12 * b06,\n// \t  a00 * b09 - a01 * b07 + a02 * b06,\n// \t  a31 * b01 - a30 * b03 - a32 * b00,\n// \t  a20 * b03 - a21 * b01 + a22 * b00) / det;\n// }\n"},function(e){e.exports="precision highp float;\n\nuniform sampler2D map;\nuniform sampler2D mapLong;\nuniform vec3 colorFish;\n\n// varying lowp vec4 vColor;\nvarying lowp float vOpacity;\nvarying highp vec2 vUv;\n\nvarying float vFishIdx;\n\nvoid main() {\n\n\tfloat uvCorrected = 1. - vUv.y;\n\t// if( gl_FrontFacing ) {\n\t// \tuvCorrected = 1. - vUv.y;\n\t// }\n\tvec4 texture = texture2D( mapLong, vec2( vUv.x, uvCorrected ) );\n\tif( vFishIdx == 0. ) {\n\t\ttexture = texture2D( map, vec2( vUv.x, uvCorrected ) );\n\t}\n\n\tfloat a = texture.a * vOpacity;\n\tif( a <= 0.9 ) {\n\t\tdiscard;\n\t}\n\n\tvec4 colorFinal = vec4( 1. );\n\tcolorFinal.rgb = texture.rgb * colorFish;\n\n\t// gl_FragColor = vec4(vec3( 1., 0., 1. ) * vOpacity, vOpacity);\n\tgl_FragColor = colorFinal * vOpacity;\n\t// gl_FragColor = vec4( 1., 0, 1., 1. );\n}\n"},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(5),c=a(79),m=a(86),f=a(309),v=a.n(f),g=a(310),h=a.n(g),y=a(29),b=(function(t){function a(){n()(this,a);var o=new e.RawShaderMaterial({uniforms:{opacity:{value:1},colorTop:{type:"c",value:new e.Color(16524205)},colorBottom:{type:"c",value:new e.Color(3469241)}},vertexShader:v.a,fragmentShader:h.a,side:e.BackSide,transparent:!0,wireframe:!1}),r=m.a.addFolder("Sky");r.addColor(o.uniforms.colorTop,"value").name("colorTop"),r.addColor(o.uniforms.colorBottom,"value").name("colorBottom");var i=new e.SphereBufferGeometry(1,32,32),s=l()(this,t.call(this,i,o));return s.onStart=function(){TweenLite.to(s,1,{delay:1.4,opacity:1,ease:Power2.easeIn})},s.opacity=0,s.renderOrder=-1,s.radius=2e3,y.a.onStart.add(s.onStart),s}return u()(a,t),a.prototype.update=function(){this.scale.set(this.radius,this.radius,this.radius)},i()(a,[{key:"opacity",set:function(e){this.material.uniforms.opacity.value=e,this.visible=.01<e},get:function(){return this.material.uniforms.opacity.value}}]),a})(e.Mesh);t.a=b}).call(t,a(28))},function(e){e.exports="precision highp float;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform vec3 colorTop;\nuniform vec3 colorBottom;\n\nattribute vec3 position;\n\nvarying vec3 vColor;\n\nvoid main() {\n\n\t//fade bottom to top\n\tvColor = mix(colorBottom,colorTop,position.y);\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n}\n"},function(e){e.exports="precision highp float;\n\nvarying vec3 vColor;\nuniform float opacity;\n\nvoid main() {\n\n\tgl_FragColor = vec4( vColor, opacity );\n\n}\n"},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(5),u=a(79),p=a(29),c=a(30),m=(function(t){function o(){n()(this,o);var r=new e.Texture(c.a.images["001"],null,e.MirroredRepeatWrapping,e.MirroredRepeatWrapping),s=new e.Texture(c.a.images["002"],null,e.MirroredRepeatWrapping,e.MirroredRepeatWrapping);r.needsUpdate=!0,s.needsUpdate=!0;var l=new e.SphereBufferGeometry(1,16,5),d=new e.RawShaderMaterial({vertexShader:a(312),fragmentShader:a(313),uniforms:{light1:{type:"v3",value:new e.Color(6949386)},light2:{type:"v3",value:new e.Color(5913450)},light3:{type:"v3",value:new e.Color(14958142)},light1pos:{type:"v3",value:new e.Vector3(.87,.46,-.2)},light2pos:{type:"v3",value:new e.Vector3(-1.25,.2,-.07)},light3pos:{type:"v3",value:new e.Vector3},baseColor:{type:"v3",value:new e.Color(1967909)},fogColor:{type:"v3",value:p.a.darkFog},brightness:{type:"f",value:1},time:{type:"f",value:123},texture:{type:"t",value:r},texture2:{type:"t",value:s}},side:e.BackSide,depthTest:!1}),u=p.a.darkgui.addFolder("SKY");u.addColor(d.uniforms.baseColor,"value").name("baseColor"),u.addColor(d.uniforms.light1,"value").name("light1"),u.addColor(d.uniforms.light2,"value").name("light2"),u.addColor(d.uniforms.light3,"value").name("light3"),u.add(d.uniforms.light1pos,"value",-1,1),u.add(d.uniforms.light2pos,"value",-1,1),u.add(d.uniforms.light3pos,"value",-1,1);var m=i()(this,t.call(this,l,d));return m.radius=1e3*p.a.darkScale,m.scale.multiplyScalar(m.radius),m.scale.y*=.9,m.position.y-=10,m}return l()(o,t),o.prototype.update=function(e){this.material.uniforms.time.value+=3e-6*e},o})(e.Mesh);t.a=m}).call(t,a(28))},function(e){e.exports="precision highp float;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nattribute vec3 position;\nattribute vec2 uv;\nattribute vec3 normal;\n\n// uniform vec3 lightPos[];\n// uniform vec3 lightColor[];\n\nuniform float time;\nuniform vec3 light1;\nuniform vec3 light2;\nuniform vec3 light3;\nuniform vec3 light1pos;\nuniform vec3 light2pos;\nuniform vec3 light3pos;\n\nuniform vec3 baseColor;\nuniform float brightness;\nuniform vec3 fogColor;\n\nvarying lowp vec3 vColor;\nvarying highp vec2 vUv;\nvarying highp float vP;\n\nvec3 light(vec3 lightColor, vec3 lightPos, float intensity, vec3 pos){\n\tfloat d = smoothstep(0., distance(lightPos,pos),intensity);\n\treturn lightColor*d;\n}\n\nvoid main() {\n\tvColor = baseColor;\n\t//mirror x\n\tvUv = uv;//vec2( abs(1.-(uv.x-.5)*2.)/10., uv.y);\n\n\t//baselight\n\tvColor += light(light1,light1pos,.35,position);\n\tvColor += light(light2,light2pos,.35,position);\n\tvColor += light(light3,light3pos,.35,position);\n\t// vColor = normalize(vColor);\n\t//fade bottom to top\n\tvP = max(position.y-0.21,0.)*2.;\n\tvColor = mix(fogColor,vColor,vP);\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"},function(e){e.exports="precision highp float;\n\n// varying vec2 vUv;\n// varying vec3 vPos;\nvarying lowp vec3 vColor;\nvarying highp vec2 vUv;\nvarying highp float vP;\n\nuniform float time;\nuniform sampler2D texture;\nuniform sampler2D texture2;\n\nvoid main(void) {\n\tvec3 t = texture2D(texture,vec2(vUv.x/2.,vUv.y)+vec2(time,0.)).rgb;\n\tvec3 t2 = texture2D(texture,vec2(vUv.x/3.,vUv.y)+vec2(time*3.5,0.)).rgb;\n\t// t2 = mix(t2,vec3(.5),smoothstep(0.3,.5,vUv.x)+(1.-smoothstep(.5,.7,vUv.x)));\n\tt += t2*.7;\n\tt = max(vec3(0.3),t);\n\tt = mix(t,vec3(.2),smoothstep(0.8,1.,vUv.x)+(1.-smoothstep(0.,.2,vUv.x)));\n\t// t2 = mix(t2,vec3(.4),smoothstep(0.8,1.,vUv.x)+(1.-smoothstep(0.,.2,vUv.x)));\n\n\n\tvec3 color = mix(vColor,vColor*t,vP);\n\tgl_FragColor = vec4(color, 1.0);\n}\n"},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(75),l=a.n(s),d=a(76),u=a.n(d),p=a(29),c=a(30),m=(function(t){function o(){n()(this,o);var r=new e.CircleBufferGeometry(1,16),i=new e.Texture(c.a.images.transition_ground);i.needsUpdate=!0,r.applyMatrix(new e.Matrix4().makeRotationX(-Math.PI/2));var s=new e.RawShaderMaterial({fragmentShader:a(315),vertexShader:a(316),fog:!0,transparent:!0,depthWrite:!1,uniforms:{fogDensity:{value:25e-5},fogNear:{value:1500},fogFar:{value:2e3},fogColor:{value:new e.Color(10036751)},color:{value:new e.Color(16777215)},transition:{value:0},transitionTexture:{value:i}}});s.defines={USE_FOG:!0,FOG_EXP2:!1};var d=l()(this,t.call(this,r,s));return d.scale.multiplyScalar(1e3*p.a.darkScale),d.position.y-=10,d.renderOrder=-1,d}return u()(o,t),o.prototype.update=function(){this.visible=0!=this.material.uniforms.transition.value},i()(o,[{key:"transition",set:function(e){this.material.uniforms.transition.value=e},get:function(){return this.material.uniforms.transition.value}}]),o})(e.Mesh);t.a=m}).call(t,a(28))},function(e){e.exports="precision highp float;\n\nuniform vec3 color;\nuniform sampler2D transitionTexture;\nuniform float transition;\n\nvarying vec2 vUv;\n\n#include <common>\n#include <fog_pars_fragment>\n\nvoid main() {\n\t\n\tfloat t = texture2D(transitionTexture,vUv).r;\n\tfloat alpha = 1.-smoothstep(transition-.05, transition, t);\n\tgl_FragColor = vec4(color, alpha*transition*(1.-smoothstep(.7,.9,t)));\n\t#include <fog_fragment>\n}\n"},function(e){e.exports="precision highp float;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec2 vUv;\n\n#include <fog_pars_vertex>\n\nvoid main(void) {\n\tvUv = uv;\n\t\n\t//need for fog\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\t\n\t//modify from original threejs to also account position x\n\t#ifdef USE_FOG\n\tfogDepth = -mvPosition.z+abs(mvPosition.x)*.35;\n\t#endif\n\t\n\tgl_Position = projectionMatrix * mvPosition;\n}\n"},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(318),u=a(321),p=a(333),c=(function(e){function t(){n()(this,t);var a=i()(this,e.call(this));return a.floor=new d.a(2e3,2e3),a.floor.rotation.x=.5*-Math.PI,a.add(a.floor),a.particles=new p.a,a.add(a.particles),a.grass=new u.a(a.floor),a.add(a.grass),a}return l()(t,e),t.prototype.update=function(){this.grass.update(),this.particles.update()},t})(e.Group);t.a=c}).call(t,a(28))},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(86),u=a(319),p=a.n(u),c=a(320),m=a.n(c),f=a(30),v=a(29),g=(function(a){function o(r,s){n()(this,o);var l=new e.PlaneBufferGeometry(r,s,1,1),u=new e.Texture(f.a.images.vegetal_floor);u.needsUpdate=!0,u.wrapS=e.RepeatWrapping,u.wrapT=e.RepeatWrapping,u.repeat.set(1,1);var c={colorA:{type:"c",value:new e.Color(16522066)},colorB:{type:"c",value:new e.Color(2322411)},tAlphaMap:{type:"t",value:u},toColor:{type:"f",value:1},alpha:{type:"f",value:1}},g=new e.RawShaderMaterial({uniforms:c,vertexShader:p.a,fragmentShader:m.a,transparent:!0}),h=i()(this,a.call(this,l,g));return h.onStart=function(){TweenLite.to(h.material.uniforms.alpha,1,{delay:.25,value:1,ease:Quad.easeIn})},h.onDarknessChange=function(e){1==e?TweenLite.to(h.material.uniforms.alpha,.6,{delay:.6,value:0,ease:Quad.easeOut}):TweenLite.to(h.material.uniforms.alpha,.4,{delay:1,value:1,ease:Quad.easeOut})},h.colorA=c.colorA.value.getHex(),h.colorB=c.colorB.value.getHex(),h.fFloor=d.a.addFolder("Floor"),h.fFloor.addColor(h,"colorA").onChange((function(){c.colorA.value.setHex(h.colorA)})),h.fFloor.addColor(h,"colorB").onChange((function(){c.colorB.value.setHex(h.colorB)})),h.material.uniforms.alpha.value=0,v.a.onDarknessChange.add(h.onDarknessChange),v.a.onStart.addOnce(h.onStart),h}return l()(o,a),o.prototype.show=function(){TweenLite.to(this.material.uniforms.alpha,1,{value:1,ease:Cubic.easeInOut})},o.prototype.showColors=function(){TweenLite.to(this.material.uniforms.toColor,1,{value:1,ease:Cubic.easeInOut})},o})(e.Mesh);t.a=g}).call(t,a(28))},function(e){e.exports="precision highp float;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n  vUv = uv;\n\n  vec3 pos = position;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\n\n}\n"},function(e){e.exports="precision highp float;\n\nuniform vec3 colorA;\nuniform vec3 colorB;\nuniform sampler2D tAlphaMap;\nuniform float toColor;\nuniform float alpha;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 alphaMap = texture2D( tAlphaMap, vUv );\n\n  vec2 center = vec2( .5 );\n  float dist = 1. - distance( center, vUv ) * 2.;\n\n  // gl_FragColor = vec4( colorA * toColor + vec3( 1. ) * ( 1. - toColor ), dist * alphaMap.r * 2. * alpha );\n\tfloat aMap = alphaMap.r * 1.5;\n\tvec3 color = colorA * aMap * 2. + colorB * ( 1. - aMap );\n\tfloat a = dist * alpha * alphaMap.r * 2.1;\n  gl_FragColor = vec4( color, a );\n}\n"},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(5),u=a(79),p=a(322),c=a(82),m=a(323),f=a(324),v=a(325),g=a(29),h=(function(e){function t(a){n()(this,t);var o=i()(this,e.call(this));return o.showDetails=function(){o.grassModel.showDetails()},o.showGradients=function(){o.grassModel.showGradients()},o.showColors=function(){o.grassModel.showColors()},o.addWind=function(){o.grassModel.addWind()},o.activateMouse=function(){o.grassModel.activateMouse()},o.onMouseMove=function(t){if(o.canUpdate){o.mouseChecker.setMouse(t.x,t.y);var e=o.mouseChecker.getIntersectForObject(o.floor);o.grassModel.updateMouse(e)}},o.update=function(){o.canUpdate&&o.grassModel.update()},o.onStart=function(){o.grassModel.show()},o.floor=a,g.a.onStart.addOnce(o.onStart),o.init(),o}return l()(t,e),t.prototype.init=function(){this.grassInfos=new m.a,this.grassData=new f.a(this.grassInfos.data,256,256),this.grassModel=new v.a(this.grassData),this.add(this.grassModel),this.canUpdate=!0,this.mouseChecker=new p.a,this.showDetails(),this.showGradients(),this.showColors(),this.addWind(),this.activateMouse(),this.play()},t.prototype.play=function(){c.a.onMove.add(this.onMouseMove)},t.prototype.stop=function(){c.a.onMove.remove(this.onMouseMove)},t})(e.Group);t.a=h}).call(t,a(28))},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(77),i=a.n(r),s=a(5),l=a(79),d=(function(){function t(){var a=!!(0<arguments.length&&void 0!==arguments[0])&&arguments[0];n()(this,t),this.ray=new e.Raycaster,this.mouse=new e.Vector2,this.dummy=a?null:new e.Vector3(-9999,-9999,-9999)}return t.prototype.setMouse=function(e,t){this.mouse.x=2*(e/s.a.width)-1,this.mouse.y=2*-(t/s.a.height)+1},t.prototype.getIntersectForObject=function(e){this.ray.setFromCamera(this.mouse,l.a.camera);var t=this.ray.intersectObject(e);return t.length?t[0].point:this.dummy},i()(t,[{key:"x",set:function(){this.mouse.x=x}},{key:"y",set:function(){this.mouse.x=x}}]),t})();t.a=d}).call(t,a(28))},function(e,t,a){"use strict";var o=a(0),n=a.n(o),r=a(37),i=a(81),s=a(30),l=(function(){function e(){n()(this,e);var t=this.parse(s.a.images.grass_map,this.getScaledStr);this.jitter(t,2),this.build(t,4.5,1.15),this.data=t}return e.prototype.getScaledStr=function(e){return 24*Math.max(.1,Math.min(e/255,1))},e.prototype.parse=function(e,t){var a=document.createElement("canvas");a.width=e.width,a.height=e.height;var o=a.getContext("2d");o.drawImage(e,0,0,a.width,a.height);for(var r=[],s=o.getImageData(0,0,a.width,a.height).data,l=0,i=s.length,n;l<i;l+=4)if(n=(s[l+0]+s[l+1]+s[l+2])/3,!(14>=n)){var d=l/4,u=d%a.width,p=Math.floor(d/a.width),c=t?t(n):1;r.push({x:u,y:p,ox:u,oy:p,str:c,isDetail:!1})}return r},e.prototype.build=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,o=!!(3<arguments.length&&void 0!==arguments[3])&&arguments[3],s=256,l=256,d=0,i=e.length,n;d<i;d++){n=e[d],n.x=n.x*t+n.x*a-(s*t+s*a)/2,n.y=n.y*t+n.y*a-(l*t+l*a)/2;var u=1*n.str;n.h=u+Object(r.a)()*(2*u)-.3*u,n.isDetail=o}},e.prototype.jitter=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,o=0,i=e.length;o<i;o++){var n=2*(Object(r.a)()*Math.PI),a=Object(r.a)()*t,s=e[o];s.x+=Math.cos(n)*a,s.y+=Math.sin(n)*a}},e})();t.a=l},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=(function(){function t(e,a,o){n()(this,t),this.reset(e,a,o)}return t.prototype.reset=function(t,a,o){this.dataOrigin=t,this.width=a,this.height=o,this.count=this.width*this.height>>0,this.count4=this.count<<2;var r=0,s=new Float32Array(this.count4).fill(0);this.textureMain=new e.DataTexture(s,this.width,this.height,e.RGBAFormat,e.FloatType);for(var l=0,i=t.length,n;l<i;l++)n=t[l],this.textureMain.image.data[r+0]=n.x,this.textureMain.image.data[r+1]=n.y,this.textureMain.image.data[r+2]=n.isDetail?1:0,this.textureMain.image.data[r+3]=n.h,r+=4;this.textureMain.needsUpdate=!0},t})();t.a=r}).call(t,a(28))},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(326),u=a(327),p=(function(t){function a(o){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;n()(this,a);var s=new d.a(o),l=new u.a(r),p=i()(this,t.call(this,s,l));return l.init(o),p.mouse=new e.Vector3,p.toMouse=new e.Vector3,p.mouseInitiated=!1,p.frustumCulled=!1,p}return l()(a,t),a.prototype.updateMouse=function(e){if(!this.mouseInitiated)return this.mouse.copy(e),this.toMouse.copy(e),void(this.mouseInitiated=!0);var t=e.x-this.mouse.x,a=e.y-this.mouse.y,o=e.z-this.mouse.z,n=Math.sqrt(t*t+a*a+o*o);this.toMouse.copy(e),this.material.setSimData(Math.min(n/100,1))},a.prototype.update=function(){this.mouse.lerp(this.toMouse,.394),this.material.setMouse(this.mouse),this.material.update()},a.prototype.show=function(){this.material.show()},a.prototype.showDetails=function(){this.material.showDetails()},a.prototype.showGradients=function(){this.material.showGradients()},a.prototype.showColors=function(){this.material.showColors()},a.prototype.addWind=function(){this.material.addWind()},a.prototype.activateMouse=function(){this.material.activateMouse()},a})(e.Mesh);t.a=p}).call(t,a(28))},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(37),u=(function(t){function a(e){n()(this,a);var o=i()(this,t.call(this));return o.data=e,o.dataOrigin=e.dataOrigin,o.count=o.data.count,o.init(),o}return l()(a,t),a.prototype.init=function(){for(var t=this.count<<1,a=this.count<<2,o=2,r=o-1,u=this.count*o,l=new e.Color(12370277),p=l.getHSL(),c=new e.Color,m={ox:0,oy:0},f=0,v=0,g=0,b=new Float32Array(2*(2*u)),_=new Float32Array(2*(3*u)),w=new Float32Array(2*(4*u)),S=0;S<this.count;S++){var i=1e4*Object(d.a)(),M=.2*Object(d.a)()-.1,C=p.h+.1*Object(d.a)()-.05,h=p.s+.05*Object(d.a)()-.025,s=p.l+.05*Object(d.a)()-.025;c.setHSL(C,h,s);for(var D=this.dataOrigin[S]||m,P=0,k;P<o;P++){k=P/r;for(var I=0;2>I;I++)w[g+0]=i,w[g+1]=S/(this.count-1),w[g+2]=k,w[g+3]=M,_[v+0]=c.r,_[v+1]=c.g,_[v+2]=c.b,b[f+0]=D.ox/256,b[f+1]=D.oy/256,f+=2,v+=3,g+=4}}var A=0,z=0;f=0;for(var y=new Float32Array(2*a),T=0;T<a;T++){for(var U=0;4>U;U++)y[f+0]=A/(this.data.width-1),y[f+1]=z/(this.data.height-1),f+=2,g+=4;A+=1,A>this.data.width-1&&(A=0,z+=1)}f=0;for(var O=new Float32Array(2*u),E=0,L=O.length;E<L;E++)O[f+0]=1,O[f+1]=-1,f+=2;f=0;for(var n=0,F=new Uint32Array(6*u),B=0;B<this.count;B++){for(var N=0;N<r;N++)F[n+0]=f,F[n+1]=F[n+4]=f+1,F[n+2]=F[n+3]=f+2,F[n+5]=f+3,f+=2,n+=6;f+=2,n+=6}this.addAttribute("dataVertices",new e.BufferAttribute(w,4)),this.addAttribute("uvDataTextures",new e.BufferAttribute(y,2)),this.addAttribute("uvMaps",new e.BufferAttribute(b,2)),this.addAttribute("color",new e.BufferAttribute(_,3)),this.addAttribute("side",new e.BufferAttribute(O,1)),this.setIndex(new e.BufferAttribute(F,1))},a})(e.BufferGeometry);t.a=u}).call(t,a(28))},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(79),u=a(86),p=a(29),c=a(328),m=a.n(c),f=a(329),v=a.n(f),g=a(330),h=a(30),y=(function(t){function a(){n()(this,a);var o=new g.a,r=new e.Texture(h.a.images.grass_opacity);r.needsUpdate=!0;var s={tDataMain:{type:"t",value:null},tDataSim:{type:"t",value:null},toHideDetail:{type:"f",value:1},resolution:{type:"v2",value:d.a.resolution},colorBottom:{type:"v3",value:new e.Color(16699696)},colorTop:{type:"v3",value:new e.Color(16708008)},colorOver:{type:"v3",value:new e.Color(3211003)},toColorStylax:{type:"f",value:0},toGradient:{type:"f",value:0},toMaxHeight:{type:"f",value:0},mapOpacity:{type:"t",value:r},globalAlpha:{type:"f",value:0}},l=i()(this,t.call(this,{uniforms:s,vertexShader:m.a,fragmentShader:v.a,side:e.DoubleSide,type:"GrassMaterial",transparent:!0}));return l.onDarknessChange=function(e){1==e?(TweenLite.to(l.uniforms.toMaxHeight,1,{value:0,ease:Power3.easeIn,onComplete:function(){l.isHidden=!0}}),l.simulations.removeWind()):(TweenLite.to(l.uniforms.toMaxHeight,2,{delay:1,value:1,ease:Cubic.easeOut}),l.simulations.addWind(),l.isHidden=!1)},l.colorBottom=s.colorBottom.value.getHex(),l.colorTop=s.colorTop.value.getHex(),l.colorOver=s.colorOver.value.getHex(),l.fGrass=u.a.addFolder("Grass"),l.fGrass.addColor(l,"colorBottom").onChange((function(){s.colorBottom.value.setHex(l.colorBottom)})),l.fGrass.addColor(l,"colorTop").onChange((function(){s.colorTop.value.setHex(l.colorTop)})),l.isHidden=!1,l.simulations=o,p.a.onDarknessChange.add(l.onDarknessChange),l}return l()(a,t),a.prototype.init=function(e){this.simulations.init(e),this.uniforms.tDataMain.value=e.textureMain,this.uniforms.tDataSim.value=this.simulations.dispSim.getTexture()},a.prototype.update=function(){if(!this.isHidden){this.simulations.update(),this.uniforms.tDataSim.value=this.simulations.dispSim.getTexture();var e=this.uniforms.colorOver.value.getHSL();this.uniforms.colorOver.value.setHSL(e.h+.005,e.s,e.l)}},a.prototype.setSimData=function(e){this.simulations.setSimData(e)},a.prototype.setMouse=function(e){this.simulations.setMouse(e)},a.prototype.show=function(){TweenLite.to(this.uniforms.toMaxHeight,1,{delay:.6,value:1,ease:Quad.easeOut}),TweenLite.to(this.uniforms.globalAlpha,1,{delay:.6,value:1,ease:Quad.easeIn})},a.prototype.showDetails=function(){TweenLite.to(this.uniforms.toHideDetail,1,{value:0,ease:Cubic.easeInOut})},a.prototype.showGradients=function(){TweenLite.to(this.uniforms.toGradient,1,{value:1,ease:Cubic.easeInOut})},a.prototype.showColors=function(){TweenLite.to(this.uniforms.toColorStylax,.6,{value:1,ease:Cubic.easeOut})},a.prototype.addWind=function(){this.simulations.addWind()},a.prototype.activateMouse=function(){this.simulations.activateMouse()},a})(e.RawShaderMaterial);t.a=y}).call(t,a(28))},function(e){e.exports="precision highp float;\n\n#ifndef PI\n#define PI 3.141592653589793\n#endif\n\n#ifndef HALF_PI\n#define HALF_PI 1.5707963267948966\n#endif\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nuniform sampler2D tDataMain;\nuniform sampler2D tDataSim;\nuniform vec2 resolution;\nuniform float toHideDetail;\nuniform float toMaxHeight;\n\nattribute vec4 dataVertices;\nattribute vec2 uvDataTextures;\nattribute vec2 uvMaps;\nattribute float side;\n\nvarying float vPercentHeight;\nvarying vec2 vUvDataTextures;\nvarying float vRedValue;\n// varying float vDistCenter;\n\nvec2 fix( vec4 i, float aspect ) {\n\tvec2 res = i.xy / i.w;\n\tres.x *= aspect;\n\treturn res;\n}\n\nfloat quadraticOut(float t) {\n  return -t * (t - 2.0);\n}\n\nfloat quadraticIn(float t) {\n  return t * t;\n}\n\nfloat sineIn(float t) {\n  return sin((t - 1.0) * HALF_PI) + 1.0;\n}\n\n\nvoid main() {\n\tvUvDataTextures = uvMaps;\n\n  float aspect = resolution.x / resolution.y;\n\n  float uvDataX = dataVertices.y;\n\n  vec4 dataMain = texture2D( tDataMain, uvDataTextures );\n  vec3 posBase = vec3( dataMain.r, 0., dataMain.g );\t\n\n\tfloat height = dataVertices.z * dataMain.a;\n  posBase.y += height;\n\tposBase.y *= toMaxHeight;\n\n\tfloat easedDataZ = sineIn( dataVertices.z );\n\tvPercentHeight = quadraticIn( dataVertices.z );\n\n\t// Apply simulation\n\tvec4 sim = texture2D( tDataSim, uvDataTextures );\n\t\n\tposBase.x += sim.x * easedDataZ;\n\tposBase.y += sim.y * quadraticOut( dataVertices.z ) * quadraticOut( dataVertices.z ) * dataMain.a * .9;\n\tposBase.z += sim.z * easedDataZ;\n\n\tvRedValue = sineIn( smoothstep( 0., 1., 1. - sim.w / .1 ) );\n\n  vec2 dir = vec2( 0., 1. );\n\n\t// Apply projection\n  mat4 m = projectionMatrix * modelViewMatrix;\n  vec4 pos = m * vec4( posBase, 1. );\n\n\t// Displace vertices (left/right) to create width\n  pos.xy += vec2( -dir.y / aspect, dir.x ) * side * .8;\n\n  gl_Position = pos;\n\n}\n"},function(e){e.exports="precision highp float;\n\nuniform vec3 colorBottom;\nuniform vec3 colorTop;\nuniform vec3 colorOver;\nuniform float toColorStylax;\nuniform float toGradient;\nuniform float globalAlpha;\nuniform sampler2D mapOpacity;\n\nvarying vec2 vUvDataTextures;\nvarying float vPercentHeight;\nvarying float vRedValue;\n\nvoid main() {\n\n\tvec4 opacityData = texture2D( mapOpacity, vUvDataTextures );\n\n\tvec2 center = vec2( .5 );\n  float dist = 1. - distance( center, vUvDataTextures ) * 7.;\n\tdist = max( 0., dist );\n\t// dist *= 4.;\n\n\tfloat redValue = vRedValue;\n\tvec3 newColorTop = ( 1. - redValue ) * colorTop + redValue * colorOver;\n  vec3 color = newColorTop * vPercentHeight + colorBottom * ( 1. - vPercentHeight );\n\tcolor += color * dist * 2.;\n  gl_FragColor = vec4( color, ( vPercentHeight * toGradient + 1. * ( 1. - toGradient ) ) * opacityData.r * globalAlpha);\n  // gl_FragColor = vec4( 1., 0., 1., 1. );\n\n}\n"},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(331),i=a(332),s=a.n(i),l=(function(){function t(){n()(this,t),this.simData={areaBase:50,areaBracket:60},this.toArea=this.simData.areaBase,this.mouseActivated=!1}return t.prototype.init=function(t){this.data=t,this.uniformsDispSim={time:{type:"f",value:0},xzStr:{type:"t",value:2},mouse:{type:"v3",value:new e.Vector3(-9999,-9999)},area:{type:"f",value:this.simData.areaBase},tDataMain:{type:"t",value:this.data.textureMain},activateWind:{type:"f",value:0}},this.dispSim=new r.a(this.data.width,this.data.height,this.uniformsDispSim,s.a)},t.prototype.update=function(){this.uniformsDispSim.time.value+=1,this.mouseActivated?this.uniformsDispSim.area.value+=.1*(this.toArea-this.uniformsDispSim.area.value):this.uniformsDispSim.area.value=0,this.dispSim.update()},t.prototype.setMouse=function(e){this.uniformsDispSim.mouse.value.copy(e)},t.prototype.setSimData=function(e){this.toArea=this.simData.areaBase+this.simData.areaBracket*e},t.prototype.addWind=function(){TweenLite.to(this.uniformsDispSim.activateWind,1,{value:1,ease:Cubic.easeIn})},t.prototype.removeWind=function(){TweenLite.to(this.uniformsDispSim.activateWind,1,{delay:1.6,value:0,ease:Cubic.easeIn})},t.prototype.activateMouse=function(){this.uniformsDispSim.area.value=this.simData.areaBase,this.mouseActivated=!0},t})();t.a=l}).call(t,a(28))},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(79),i=(function(){function t(o,i,s,l){n()(this,t),this.width=o,this.height=i,this.renderer=r.a.renderer;var d={wrapS:e.ClampToEdgeWrapping,wrapT:e.ClampToEdgeWrapping,minFilter:e.NearestFilter,magFilter:e.NearestFilter,format:e.RGBAFormat,type:e.HalfFloatType,encoding:e.LinearEncoding,stencilBuffer:!0,depthBuffer:!1};this.rtCurrent=new e.WebGLRenderTarget(this.width,this.height,d),this.rtCurrent.texture.generateMipmaps=!1,this.rtPrev=new e.WebGLRenderTarget(this.width,this.height,d),this.rtPrev.texture.generateMipmaps=!1,this.scene=new e.Scene,this.orthoCamera=new e.OrthographicCamera(-.5,.5,.5,-.5,0,1),s.tSimCurr={type:"t",value:this.rtCurrent.texture},this.simulationMaterial=new e.ShaderMaterial({uniforms:s,vertexShader:a(99),fragmentShader:l,depthWrite:!1,depthTest:!1}),this.simulationMaterial.type="SimpleFBOMaterial",this.mesh=new e.Mesh(new e.PlaneBufferGeometry(1,1,1,1),this.simulationMaterial),this.scene.add(this.mesh)}return t.prototype.getDebugMesh=function(){return this.debugMesh||(this.debugMesh=this.createDebugMeshCurrent()),this.debugMesh},t.prototype.createDebugMeshCurrent=function(){var t=new e.PlaneBufferGeometry(this.width,this.height),o=new e.ShaderMaterial({uniforms:{t_pos:{type:"t",value:this.rtCurrent.texture}},vertexShader:a(99),fragmentShader:a(118),depthWrite:!1,depthTest:!1,side:e.DoubleSide});return new e.Mesh(t,o)},t.prototype.createDebugMeshPrev=function(){var t=new e.PlaneBufferGeometry(this.width,this.height),o=new e.ShaderMaterial({uniforms:{t_pos:{type:"t",value:this.rtPrev.texture}},vertexShader:a(99),fragmentShader:a(118),depthWrite:!1,depthTest:!1,side:e.DoubleSide});return new e.Mesh(t,o)},t.prototype.update=function(){this.renderer.render(this.scene,this.orthoCamera,this.rtCurrent,!1),this.simulationMaterial.uniforms.tSimCurr.value=this.rtCurrent.texture;var e=this.rtCurrent;this.rtCurrent=this.rtPrev,this.rtPrev=e},t.prototype.getTexture=function(){return this.rtCurrent.texture},t})();t.a=i}).call(t,a(28))},function(e){e.exports="precision highp float;\n\n//\n\n//\n// vec3  psrdnoise(vec2 pos, vec2 per, float rot)\n// vec3  psdnoise(vec2 pos, vec2 per)\n// float psrnoise(vec2 pos, vec2 per, float rot)\n// float psnoise(vec2 pos, vec2 per)\n// vec3  srdnoise(vec2 pos, float rot)\n// vec3  sdnoise(vec2 pos)\n// float srnoise(vec2 pos, float rot)\n// float snoise(vec2 pos)\n//\n// Periodic (tiling) 2-D simplex noise (hexagonal lattice gradient noise)\n// with rotating gradients and analytic derivatives.\n// Variants also without the derivative (no \"d\" in the name), without\n// the tiling property (no \"p\" in the name) and without the rotating\n// gradients (no \"r\" in the name).\n//\n// This is (yet) another variation on simplex noise. It's similar to the\n// version presented by Ken Perlin, but the grid is axis-aligned and\n// slightly stretched in the y direction to permit rectangular tiling.\n//\n// The noise can be made to tile seamlessly to any integer period in x and\n// any even integer period in y. Odd periods may be specified for y, but\n// then the actual tiling period will be twice that number.\n//\n// The rotating gradients give the appearance of a swirling motion, and can\n// serve a similar purpose for animation as motion along z in 3-D noise.\n// The rotating gradients in conjunction with the analytic derivatives\n// can make \"flow noise\" effects as presented by Perlin and Neyret.\n//\n// vec3 {p}s{r}dnoise(vec2 pos {, vec2 per} {, float rot})\n// \"pos\" is the input (x,y) coordinate\n// \"per\" is the x and y period, where per.x is a positive integer\n//    and per.y is a positive even integer\n// \"rot\" is the angle to rotate the gradients (any float value,\n//    where 0.0 is no rotation and 1.0 is one full turn)\n// The first component of the 3-element return vector is the noise value.\n// The second and third components are the x and y partial derivatives.\n//\n// float {p}s{r}noise(vec2 pos {, vec2 per} {, float rot})\n// \"pos\" is the input (x,y) coordinate\n// \"per\" is the x and y period, where per.x is a positive integer\n//    and per.y is a positive even integer\n// \"rot\" is the angle to rotate the gradients (any float value,\n//    where 0.0 is no rotation and 1.0 is one full turn)\n// The return value is the noise value.\n// Partial derivatives are not computed, making these functions faster.\n//\n// Author: Stefan Gustavson (stefan.gustavson@gmail.com)\n// Version 2016-05-10.\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// idea of using a permutation polynomial.\n//\n// Copyright (c) 2016 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/stegu/webgl-noise\n//\n\n//\n// TODO: One-pixel wide artefacts used to occur due to precision issues with\n// the gradient indexing. This is specific to this variant of noise, because\n// one axis of the simplex grid is perfectly aligned with the input x axis.\n// The errors were rare, and they are now very unlikely to ever be visible\n// after a quick fix was introduced: a small offset is added to the y coordinate.\n// A proper fix would involve using round() instead of floor() in selected\n// places, but the quick fix works fine.\n// (If you run into problems with this, please let me know.)\n//\n\n// Modulo 289, optimizes to code without divisions\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n\nfloat mod289(float x) { return x - floor(x * (1.0 / 289.0)) * 289.0; }\n\n// Permutation polynomial (ring size 289 = 17*17)\nvec3 permute(vec3 x) {\n  return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat permute(float x){return mod289(((x*34.0)+1.0)*x);}\n\n// vec3 permute(float x) {\n//   return permute( vec3( x ) );\n// }\n\n// Hashed 2-D gradients with an extra rotation.\n// (The constant 0.0243902439 is 1/41)\nvec2 rgrad2(vec2 p, float rot) {\n#if 0\n// Map from a line to a diamond such that a shift maps to a rotation.\n  float u = permute(permute(p.x) + p.y) * 0.0243902439 + rot; // Rotate by shift\n  u = 4.0 * fract(u) - 2.0;\n  // (This vector could be normalized, exactly or approximately.)\n  return vec2(abs(u)-1.0, abs(abs(u+1.0)-2.0)-1.0);\n#else\n// For more isotropic gradients, sin/cos can be used instead.\n  float u = permute(permute(p.x) + p.y) * 0.0243902439 + rot; // Rotate by shift\n  u = fract(u) * 6.28318530718; // 2*pi\n  return vec2(cos(u), sin(u));\n#endif\n}\n\n//\n// 2-D tiling simplex noise with rotating gradients and analytical derivative.\n// The first component of the 3-element return vector is the noise value,\n// and the second and third components are the x and y partial derivatives.\n//\nvec3 psrdnoise(vec2 pos, vec2 per, float rot) {\n  // Hack: offset y slightly to hide some rare artifacts\n  pos.y += 0.01;\n  // Skew to hexagonal grid\n  vec2 uv = vec2(pos.x + pos.y*0.5, pos.y);\n\n  vec2 i0 = floor(uv);\n  vec2 f0 = fract(uv);\n  // Traversal order\n  vec2 i1 = (f0.x > f0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  // Unskewed grid points in (x,y) space\n  vec2 p0 = vec2(i0.x - i0.y * 0.5, i0.y);\n  vec2 p1 = vec2(p0.x + i1.x - i1.y * 0.5, p0.y + i1.y);\n  vec2 p2 = vec2(p0.x + 0.5, p0.y + 1.0);\n\n  // Integer grid point indices in (u,v) space\n  i1 = i0 + i1;\n  vec2 i2 = i0 + vec2(1.0, 1.0);\n\n  // Vectors in unskewed (x,y) coordinates from\n  // each of the simplex corners to the evaluation point\n  vec2 d0 = pos - p0;\n  vec2 d1 = pos - p1;\n  vec2 d2 = pos - p2;\n\n  // Wrap i0, i1 and i2 to the desired period before gradient hashing:\n  // wrap points in (x,y), map to (u,v)\n  vec3 xw = mod(vec3(p0.x, p1.x, p2.x), per.x);\n  vec3 yw = mod(vec3(p0.y, p1.y, p2.y), per.y);\n  vec3 iuw = xw + 0.5 * yw;\n  vec3 ivw = yw;\n\n  // Create gradients from indices\n  vec2 g0 = rgrad2(vec2(iuw.x, ivw.x), rot);\n  vec2 g1 = rgrad2(vec2(iuw.y, ivw.y), rot);\n  vec2 g2 = rgrad2(vec2(iuw.z, ivw.z), rot);\n\n  // Gradients dot vectors to corresponding corners\n  // (The derivatives of this are simply the gradients)\n  vec3 w = vec3(dot(g0, d0), dot(g1, d1), dot(g2, d2));\n\n  // Radial weights from corners\n  // 0.8 is the square of 2/sqrt(5), the distance from\n  // a grid point to the nearest simplex boundary\n  vec3 t = 0.8 - vec3(dot(d0, d0), dot(d1, d1), dot(d2, d2));\n\n  // Partial derivatives for analytical gradient computation\n  vec3 dtdx = -2.0 * vec3(d0.x, d1.x, d2.x);\n  vec3 dtdy = -2.0 * vec3(d0.y, d1.y, d2.y);\n\n  // Set influence of each surflet to zero outside radius sqrt(0.8)\n  if (t.x < 0.0) {\n    dtdx.x = 0.0;\n    dtdy.x = 0.0;\n\tt.x = 0.0;\n  }\n  if (t.y < 0.0) {\n    dtdx.y = 0.0;\n    dtdy.y = 0.0;\n\tt.y = 0.0;\n  }\n  if (t.z < 0.0) {\n    dtdx.z = 0.0;\n    dtdy.z = 0.0;\n\tt.z = 0.0;\n  }\n\n  // Fourth power of t (and third power for derivative)\n  vec3 t2 = t * t;\n  vec3 t4 = t2 * t2;\n  vec3 t3 = t2 * t;\n\n  // Final noise value is:\n  // sum of ((radial weights) times (gradient dot vector from corner))\n  float n = dot(t4, w);\n\n  // Final analytical derivative (gradient of a sum of scalar products)\n  vec2 dt0 = vec2(dtdx.x, dtdy.x) * 4.0 * t3.x;\n  vec2 dn0 = t4.x * g0 + dt0 * w.x;\n  vec2 dt1 = vec2(dtdx.y, dtdy.y) * 4.0 * t3.y;\n  vec2 dn1 = t4.y * g1 + dt1 * w.y;\n  vec2 dt2 = vec2(dtdx.z, dtdy.z) * 4.0 * t3.z;\n  vec2 dn2 = t4.z * g2 + dt2 * w.z;\n\n  return 11.0*vec3(n, dn0 + dn1 + dn2);\n}\n\n//\n// 2-D tiling simplex noise with fixed gradients\n// and analytical derivative.\n// This function is implemented as a wrapper to \"psrdnoise\",\n// at the minimal cost of three extra additions.\n//\nvec3 psdnoise(vec2 pos, vec2 per) {\n  return psrdnoise(pos, per, 0.0);\n}\n\n//\n// 2-D tiling simplex noise with rotating gradients,\n// but without the analytical derivative.\n//\nfloat psrnoise(vec2 pos, vec2 per, float rot) {\n  // Offset y slightly to hide some rare artifacts\n  pos.y += 0.001;\n  // Skew to hexagonal grid\n  vec2 uv = vec2(pos.x + pos.y*0.5, pos.y);\n\n  vec2 i0 = floor(uv);\n  vec2 f0 = fract(uv);\n  // Traversal order\n  vec2 i1 = (f0.x > f0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  // Unskewed grid points in (x,y) space\n  vec2 p0 = vec2(i0.x - i0.y * 0.5, i0.y);\n  vec2 p1 = vec2(p0.x + i1.x - i1.y * 0.5, p0.y + i1.y);\n  vec2 p2 = vec2(p0.x + 0.5, p0.y + 1.0);\n\n  // Integer grid point indices in (u,v) space\n  i1 = i0 + i1;\n  vec2 i2 = i0 + vec2(1.0, 1.0);\n\n  // Vectors in unskewed (x,y) coordinates from\n  // each of the simplex corners to the evaluation point\n  vec2 d0 = pos - p0;\n  vec2 d1 = pos - p1;\n  vec2 d2 = pos - p2;\n\n  // Wrap i0, i1 and i2 to the desired period before gradient hashing:\n  // wrap points in (x,y), map to (u,v)\n  vec3 xw = mod(vec3(p0.x, p1.x, p2.x), per.x);\n  vec3 yw = mod(vec3(p0.y, p1.y, p2.y), per.y);\n  vec3 iuw = xw + 0.5 * yw;\n  vec3 ivw = yw;\n\n  // Create gradients from indices\n  vec2 g0 = rgrad2(vec2(iuw.x, ivw.x), rot);\n  vec2 g1 = rgrad2(vec2(iuw.y, ivw.y), rot);\n  vec2 g2 = rgrad2(vec2(iuw.z, ivw.z), rot);\n\n  // Gradients dot vectors to corresponding corners\n  // (The derivatives of this are simply the gradients)\n  vec3 w = vec3(dot(g0, d0), dot(g1, d1), dot(g2, d2));\n\n  // Radial weights from corners\n  // 0.8 is the square of 2/sqrt(5), the distance from\n  // a grid point to the nearest simplex boundary\n  vec3 t = 0.8 - vec3(dot(d0, d0), dot(d1, d1), dot(d2, d2));\n\n  // Set influence of each surflet to zero outside radius sqrt(0.8)\n  t = max(t, 0.0);\n\n  // Fourth power of t\n  vec3 t2 = t * t;\n  vec3 t4 = t2 * t2;\n\n  // Final noise value is:\n  // sum of ((radial weights) times (gradient dot vector from corner))\n  float n = dot(t4, w);\n\n  // Rescale to cover the range [-1,1] reasonably well\n  return 11.0*n;\n}\n\n//\n// 2-D tiling simplex noise with fixed gradients,\n// without the analytical derivative.\n// This function is implemented as a wrapper to \"psrnoise\",\n// at the minimal cost of three extra additions.\n//\nfloat psnoise(vec2 pos, vec2 per) {\n  return psrnoise(pos, per, 0.0);\n}\n\n//\n// 2-D non-tiling simplex noise with rotating gradients and analytical derivative.\n// The first component of the 3-element return vector is the noise value,\n// and the second and third components are the x and y partial derivatives.\n//\nvec3 srdnoise(vec2 pos, float rot) {\n  // Offset y slightly to hide some rare artifacts\n  pos.y += 0.001;\n  // Skew to hexagonal grid\n  vec2 uv = vec2(pos.x + pos.y*0.5, pos.y);\n\n  vec2 i0 = floor(uv);\n  vec2 f0 = fract(uv);\n  // Traversal order\n  vec2 i1 = (f0.x > f0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  // Unskewed grid points in (x,y) space\n  vec2 p0 = vec2(i0.x - i0.y * 0.5, i0.y);\n  vec2 p1 = vec2(p0.x + i1.x - i1.y * 0.5, p0.y + i1.y);\n  vec2 p2 = vec2(p0.x + 0.5, p0.y + 1.0);\n\n  // Integer grid point indices in (u,v) space\n  i1 = i0 + i1;\n  vec2 i2 = i0 + vec2(1.0, 1.0);\n\n  // Vectors in unskewed (x,y) coordinates from\n  // each of the simplex corners to the evaluation point\n  vec2 d0 = pos - p0;\n  vec2 d1 = pos - p1;\n  vec2 d2 = pos - p2;\n\n  vec3 x = vec3(p0.x, p1.x, p2.x);\n  vec3 y = vec3(p0.y, p1.y, p2.y);\n  vec3 iuw = x + 0.5 * y;\n  vec3 ivw = y;\n\n  // Avoid precision issues in permutation\n  iuw = mod289(iuw);\n  ivw = mod289(ivw);\n\n  // Create gradients from indices\n  vec2 g0 = rgrad2(vec2(iuw.x, ivw.x), rot);\n  vec2 g1 = rgrad2(vec2(iuw.y, ivw.y), rot);\n  vec2 g2 = rgrad2(vec2(iuw.z, ivw.z), rot);\n\n  // Gradients dot vectors to corresponding corners\n  // (The derivatives of this are simply the gradients)\n  vec3 w = vec3(dot(g0, d0), dot(g1, d1), dot(g2, d2));\n\n  // Radial weights from corners\n  // 0.8 is the square of 2/sqrt(5), the distance from\n  // a grid point to the nearest simplex boundary\n  vec3 t = 0.8 - vec3(dot(d0, d0), dot(d1, d1), dot(d2, d2));\n\n  // Partial derivatives for analytical gradient computation\n  vec3 dtdx = -2.0 * vec3(d0.x, d1.x, d2.x);\n  vec3 dtdy = -2.0 * vec3(d0.y, d1.y, d2.y);\n\n  // Set influence of each surflet to zero outside radius sqrt(0.8)\n  if (t.x < 0.0) {\n    dtdx.x = 0.0;\n    dtdy.x = 0.0;\n\tt.x = 0.0;\n  }\n  if (t.y < 0.0) {\n    dtdx.y = 0.0;\n    dtdy.y = 0.0;\n\tt.y = 0.0;\n  }\n  if (t.z < 0.0) {\n    dtdx.z = 0.0;\n    dtdy.z = 0.0;\n\tt.z = 0.0;\n  }\n\n  // Fourth power of t (and third power for derivative)\n  vec3 t2 = t * t;\n  vec3 t4 = t2 * t2;\n  vec3 t3 = t2 * t;\n\n  // Final noise value is:\n  // sum of ((radial weights) times (gradient dot vector from corner))\n  float n = dot(t4, w);\n\n  // Final analytical derivative (gradient of a sum of scalar products)\n  vec2 dt0 = vec2(dtdx.x, dtdy.x) * 4.0 * t3.x;\n  vec2 dn0 = t4.x * g0 + dt0 * w.x;\n  vec2 dt1 = vec2(dtdx.y, dtdy.y) * 4.0 * t3.y;\n  vec2 dn1 = t4.y * g1 + dt1 * w.y;\n  vec2 dt2 = vec2(dtdx.z, dtdy.z) * 4.0 * t3.z;\n  vec2 dn2 = t4.z * g2 + dt2 * w.z;\n\n  return 11.0*vec3(n, dn0 + dn1 + dn2);\n}\n\n//\n// 2-D non-tiling simplex noise with fixed gradients and analytical derivative.\n// This function is implemented as a wrapper to \"srdnoise\",\n// at the minimal cost of three extra additions.\n//\nvec3 sdnoise(vec2 pos) {\n  return srdnoise(pos, 0.0);\n}\n\n//\n// 2-D non-tiling simplex noise with rotating gradients,\n// without the analytical derivative.\n//\nfloat srnoise(vec2 pos, float rot) {\n  // Offset y slightly to hide some rare artifacts\n  pos.y += 0.001;\n  // Skew to hexagonal grid\n  vec2 uv = vec2(pos.x + pos.y*0.5, pos.y);\n\n  vec2 i0 = floor(uv);\n  vec2 f0 = fract(uv);\n  // Traversal order\n  vec2 i1 = (f0.x > f0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n\n  // Unskewed grid points in (x,y) space\n  vec2 p0 = vec2(i0.x - i0.y * 0.5, i0.y);\n  vec2 p1 = vec2(p0.x + i1.x - i1.y * 0.5, p0.y + i1.y);\n  vec2 p2 = vec2(p0.x + 0.5, p0.y + 1.0);\n\n  // Integer grid point indices in (u,v) space\n  i1 = i0 + i1;\n  vec2 i2 = i0 + vec2(1.0, 1.0);\n\n  // Vectors in unskewed (x,y) coordinates from\n  // each of the simplex corners to the evaluation point\n  vec2 d0 = pos - p0;\n  vec2 d1 = pos - p1;\n  vec2 d2 = pos - p2;\n\n  // Wrap i0, i1 and i2 to the desired period before gradient hashing:\n  // wrap points in (x,y), map to (u,v)\n  vec3 x = vec3(p0.x, p1.x, p2.x);\n  vec3 y = vec3(p0.y, p1.y, p2.y);\n  vec3 iuw = x + 0.5 * y;\n  vec3 ivw = y;\n\n  // Avoid precision issues in permutation\n  iuw = mod289(iuw);\n  ivw = mod289(ivw);\n\n  // Create gradients from indices\n  vec2 g0 = rgrad2(vec2(iuw.x, ivw.x), rot);\n  vec2 g1 = rgrad2(vec2(iuw.y, ivw.y), rot);\n  vec2 g2 = rgrad2(vec2(iuw.z, ivw.z), rot);\n\n  // Gradients dot vectors to corresponding corners\n  // (The derivatives of this are simply the gradients)\n  vec3 w = vec3(dot(g0, d0), dot(g1, d1), dot(g2, d2));\n\n  // Radial weights from corners\n  // 0.8 is the square of 2/sqrt(5), the distance from\n  // a grid point to the nearest simplex boundary\n  vec3 t = 0.8 - vec3(dot(d0, d0), dot(d1, d1), dot(d2, d2));\n\n  // Set influence of each surflet to zero outside radius sqrt(0.8)\n  t = max(t, 0.0);\n\n  // Fourth power of t\n  vec3 t2 = t * t;\n  vec3 t4 = t2 * t2;\n\n  // Final noise value is:\n  // sum of ((radial weights) times (gradient dot vector from corner))\n  float n = dot(t4, w);\n\n  // Rescale to cover the range [-1,1] reasonably well\n  return 11.0*n;\n}\n\n//\n// 2-D non-tiling simplex noise with fixed gradients,\n// without the analytical derivative.\n// This function is implemented as a wrapper to \"srnoise\",\n// at the minimal cost of three extra additions.\n// Note: if this kind of noise is all you want, there are faster\n// GLSL implementations of non-tiling simplex noise out there.\n// This one is included mainly for completeness and compatibility\n// with the other functions in the file.\n//\nfloat snoise(vec2 pos) {\n  return srnoise(pos, 0.0);\n}\n\n\n//\n\nuniform float time;\nuniform sampler2D tDataMain;\nuniform sampler2D tSimCurr;\nuniform sampler2D tSimPrev;\nuniform vec3 mouse;\nuniform float friction;\nuniform float area;\nuniform float activateWind;\nuniform float activateMouse;\nuniform float activateRandom;\n\nvarying vec2 vUv;\n\nconst vec3 pa = vec3(1., 57., 21.);\nconst vec4 pb = vec4(0., 57., 21., 78.);\n\nfloat perlin(vec3 p) {\n\tvec3 i = floor(p);\n\tvec4 a = dot( i, pa ) + pb;\n\tvec3 f = cos((p-i)*acos(-1.))*(-.5)+.5;\n\ta = mix(sin(cos(a)*a),sin(cos(1.+a)*(1.+a)), f.x);\n\ta.xy = mix(a.xz, a.yw, f.y);\n\treturn mix(a.x, a.y, f.z);\n}\n\n\nfloat rand(vec2 co){\n  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);\n}\n\nfloat quadraticInOut(float t) {\n  float p = 2.0 * t * t;\n  return t < 0.5 ? p : -p + (4.0 * t) - 1.0;\n}\n\nfloat quadraticOut(float t) {\n  return -t * (t - 2.0);\n}\n\nvoid main() {\n\n  vec4 data = texture2D( tDataMain, vUv );\n  float xBase = data.r;\n  float zBase = data.g;\n\tfloat h = data.a;\n\n  vec3 currPos = vec3( 0. );\n  currPos.x = xBase;\n  currPos.z = zBase;\n\n  float windPercent = min( snoise( vec2( currPos.x * currPos.z, time * .001 ) ), 1. );\n  float windValue = 1.17 * windPercent * ( h / 35. );\n\n  float dx = currPos.x - mouse.x;\n  float dz = currPos.z - mouse.z;\n  float dist = distance( currPos, mouse );\n  float a = atan( dz, dx );\n\n  vec4 simCurr = texture2D( tSimCurr, vUv );\n  float percentStr = 1. - min( dist / area, 1. );\n  float percentStrEasedInOut = quadraticInOut( percentStr );\n  float percentStrEasedOut = quadraticOut( percentStr );\n  float frictionCurr = max( .0025, min( simCurr.w + percentStrEasedInOut * .9, .98 ) );\n\tfloat radiusXZ = 20. * percentStrEasedInOut;\n\tfloat xNewSim = radiusXZ * cos( a );\n\tfloat yNewSim = -percentStr * percentStrEasedOut;\n\tfloat zNewSim = radiusXZ * sin( a );\n\n  float xSim = simCurr.x + ( xNewSim - simCurr.x ) * frictionCurr;\n  float ySim = simCurr.y + ( yNewSim - simCurr.y ) * frictionCurr;\n  float zSim = simCurr.z + ( zNewSim - simCurr.z ) * frictionCurr;\n  float wSim = simCurr.w + ( .1 - frictionCurr ) * .257;\n\n\txSim += windValue * activateWind;\n\tzSim += windValue * activateWind;\n\n  gl_FragColor = vec4( xSim, ySim, zSim, wSim );\n\n}\n"},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(334),u=a.n(d),p=a(335),c=a.n(p),m=a(32),f=a(30),v=a(29),g=(function(t){function a(){n()(this,a);var o=i()(this,t.call(this));return o.onDarknessChange=function(e){1==e?TweenLite.to(o.material.uniforms.opacity,1,{value:0,ease:Cubic.easeIn}):TweenLite.to(o.material.uniforms.opacity,1,{delay:2,value:1,ease:Cubic.easeOut})},o.onStart=function(){TweenLite.to(o.material.uniforms.opacity,1,{delay:.1,value:1,ease:Quad.easeIn})},o.countParticles=500,o.createGeometry(),o.createMaterial(),o.material.uniforms.opacity.value=0,o.particles=new e.Points(o.geometry,o.material),o.add(o.particles),o}return l()(a,t),a.prototype.createGeometry=function(){for(var t=0,a=new Float32Array(3*this.countParticles),o=new Float32Array(this.countParticles),n=new Float32Array(this.countParticles),r=new Float32Array(this.countParticles),s=new Float32Array(this.countParticles),l=new Float32Array(this.countParticles),d=0;d<this.countParticles;d++)a[t+0]=2e3*Math.random()-1e3,a[t+1]=0,a[t+2]=2e3*Math.random()-1e3,n[d]=Object(m.b)(50,200,3),r[d]=1e3*Math.random(),s[d]=.2*Math.random()+.05,l[d]=Object(m.b)(4,10,6),o[d]=1*Math.random(),t+=3;this.geometry=new e.BufferGeometry,this.geometry.addAttribute("position",new e.BufferAttribute(a,3)),this.geometry.addAttribute("yMax",new e.BufferAttribute(n,1)),this.geometry.addAttribute("aTime",new e.BufferAttribute(r,1)),this.geometry.addAttribute("aSpeed",new e.BufferAttribute(s,1)),this.geometry.addAttribute("aRadiusMov",new e.BufferAttribute(l,1)),this.geometry.addAttribute("scale",new e.BufferAttribute(o,1)),v.a.onDarknessChange.add(this.onDarknessChange),v.a.onStart.addOnce(this.onStart)},a.prototype.createMaterial=function(){var t=new e.Texture(f.a.images.circle);t.needsUpdate=!0,this.uniforms={sizeBase:{type:"f",value:10},time:{type:"f",value:0},map:{type:"t",value:t},opacity:{type:"f",value:1}},this.material=new e.RawShaderMaterial({uniforms:this.uniforms,vertexShader:u.a,fragmentShader:c.a,transparent:!0})},a.prototype.update=function(){this.uniforms.time.value+=1},a})(e.Group);t.a=g}).call(t,a(28))},function(e){e.exports="precision highp float;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform float time;\nuniform float sizeBase;\n\nattribute vec3 position;\nattribute float scale;\nattribute float aTime;\nattribute float aSpeed;\nattribute float aRadiusMov;\nattribute float yMax;\n\nvarying float vOpacity;\n\nfloat quadraticIn(float t) {\n  return t * t;\n}\n\nvoid main() {\n\n\tvec3 pos = position;\n\tfloat y = aTime + time * aSpeed;\n\ty = mod( y, yMax );\n\tpos.y += y;\n\n\tpos.x += sin( aTime + time * aSpeed * .05 ) * aRadiusMov;\n\tpos.z += cos( aTime + time * aSpeed * .025 ) * aRadiusMov;\n\t\n\tvOpacity = 1.;\n\tvOpacity -= 1. - smoothstep( 0., 20., pos.y );\n\tvOpacity -= smoothstep( yMax * .85, yMax, pos.y );\n\n\tvec2 center = vec2( 0. );\n  float dist = 1. - quadraticIn( distance( center, vec2( pos.x, pos.z ) ) / 1000. );\n\tvOpacity *= dist;\n\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\n\n\tgl_PointSize = sizeBase * scale;\n\n}\n"},function(e){e.exports="precision highp float;\n\nuniform sampler2D map;\nuniform float opacity;\n\nvarying float vOpacity;\n\nvoid main() {\n\n\tvec4 colorFinal = texture2D( map, gl_PointCoord );\n\tcolorFinal.a *= vOpacity;\n\tif( colorFinal.a <= 0.1 ) {\n\t\tdiscard;\n\t}\n\tgl_FragColor = colorFinal * opacity;\n\n}\n"},function(e,t,a){"use strict";var o=Math.sqrt;(function(e){var n=a(0),r=a.n(n),i=a(77),s=a.n(i),l=a(75),d=a.n(l),u=a(76),p=a.n(u),c=a(337),m=a(338),f=a(341),v=a(344),g=a(32),h=a(29),y=(function(t){function n(){r()(this,n);var s=d()(this,t.call(this));s.buildings=[];var l=s.getBorder(1e3,1e3),u=s.getBorder(120,30);s.quadtree(0,l.topLeft.x,l.topLeft.y,u.topRight.x,u.topRight.y),s.quadtree(0,u.topRight.x,l.topLeft.y,l.topRight.x,u.bottomRight.y),s.quadtree(0,u.bottomLeft.x,u.bottomLeft.y,l.bottomRight.x,l.bottomRight.y),s.quadtree(0,l.bottomLeft.x,u.topLeft.y,u.topLeft.x,l.bottomRight.y);for(var p=new e.BufferGeometry,c=new Float32Array(10*(3*s.buildings.length)),m=new Float32Array(10*(2*s.buildings.length)),f=new Float32Array(10*(2*s.buildings.length)),g=new Float32Array(10*(1*s.buildings.length)),y=new Float32Array(10*(1*s.buildings.length)),_=new Uint32Array(2*(5*(3*s.buildings.length))),w=0;w<s.buildings.length-1;w++){var i=s.buildings[w],b=i.x-i.w/2,S=i.x+i.w/2,M=0,C=i.h,D=i.z-i.d/2,k=i.z+i.d/2,P=10*w,I=20*w,A=30*w;c[A]=b,c[A+1]=C,c[A+2]=D,c[A+3]=S,c[A+4]=C,c[A+5]=D,c[A+6]=S,c[A+7]=M,c[A+8]=D,c[A+9]=b,c[A+10]=M,c[A+11]=D,c[A+12]=b,c[A+13]=C,c[A+14]=k,c[A+15]=b,c[A+16]=M,c[A+17]=k,c[A+18]=S,c[A+19]=C,c[A+20]=k,c[A+21]=S,c[A+22]=M,c[A+23]=k,c[A+24]=S,c[A+25]=C,c[A+26]=k,c[A+27]=S,c[A+28]=M,c[A+29]=k;var z=0,T=1;f[I]=.5,f[I+1]=T,f[I+2]=.25,f[I+3]=T,f[I+4]=.25,f[I+5]=z,f[I+6]=.5,f[I+7]=z,f[I+8]=.75,f[I+9]=T,f[I+10]=.75,f[I+11]=z,f[I+12]=1,f[I+13]=T,f[I+14]=1,f[I+15]=z,f[I+16]=0,f[I+17]=T,f[I+18]=0,f[I+19]=z,z=1-i.h/150,T=150<i.h?1:.98,m[I]=.5,m[I+1]=T,m[I+2]=.25,m[I+3]=T,m[I+4]=.25,m[I+5]=z,m[I+6]=.5,m[I+7]=z,m[I+8]=.75,m[I+9]=T,m[I+10]=.75,m[I+11]=z,m[I+12]=1,m[I+13]=T,m[I+14]=1,m[I+15]=z,m[I+16]=0,m[I+17]=T,m[I+18]=0,m[I+19]=z;var U=3*o(i.x*i.x+i.z*i.z)+200*Math.random();g[P]=U/1e3,g[P+1]=U/1e3,g[P+2]=U/1e3,g[P+3]=U/1e3,g[P+4]=U/1e3,g[P+5]=U/1e3,g[P+6]=U/1e3,g[P+7]=U/1e3,g[P+8]=U/1e3,g[P+9]=U/1e3,y[P]=i.h,y[P+1]=i.h,y[P+2]=i.h,y[P+3]=i.h,y[P+4]=i.h,y[P+5]=i.h,y[P+6]=i.h,y[P+7]=i.h,y[P+8]=i.h,y[P+9]=i.h,_[A]=0+P,_[A+1]=1+P,_[A+2]=2+P,_[A+3]=2+P,_[A+4]=3+P,_[A+5]=0+P,_[A+6]=4+P,_[A+7]=0+P,_[A+8]=3+P,_[A+9]=3+P,_[A+10]=5+P,_[A+11]=4+P,_[A+12]=1+P,_[A+13]=8+P,_[A+14]=9+P,_[A+15]=9+P,_[A+16]=2+P,_[A+17]=1+P,_[A+18]=6+P,_[A+19]=1+P,_[A+20]=0+P,_[A+21]=0+P,_[A+22]=4+P,_[A+23]=6+P,_[A+24]=4+P,_[A+25]=5+P,_[A+26]=6+P,_[A+27]=6+P,_[A+28]=5+P,_[A+29]=7+P}p.addAttribute("position",new e.BufferAttribute(c,3)),p.addAttribute("uv",new e.BufferAttribute(m,2)),p.addAttribute("uv2",new e.BufferAttribute(f,2)),p.addAttribute("aTime",new e.BufferAttribute(g,1)),p.addAttribute("height",new e.BufferAttribute(y,1)),p.setIndex(new e.BufferAttribute(_,1)),p.computeVertexNormals();var O=new e.RawShaderMaterial({vertexShader:a(345),fragmentShader:a(346),fog:!0,transparent:!0,uniforms:{time:{type:"f",value:0},transition:{type:"f",value:0},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1500*h.a.darkScale},fogFar:{type:"f",value:2e3*h.a.darkScale},fogColor:{value:null},map:{type:"f",value:v.a.getTexture()}}});return O.defines={USE_FOG:!0,FOG_EXP2:!1},s.cityMesh=new e.Mesh(p,O),s.cityMesh.frustumCulled=!1,s.cityMesh.renderOrder=1,s.material=O,s.add(s.cityMesh),s.scale.multiplyScalar(h.a.darkScale),s}return p()(n,t),n.prototype.quadtree=function(t,a,n,r,i){var l=r-a,d=i-n,u=(r+a)/2,p=(i+n)/2,c=o(u*u+p*p),m=Object(g.c)(50,150,c),s=50+20*(1-m*m*m);if(l<s&&d<s){var f=1+2*Math.random();return 1e3<c?void 0:void(Math.random()<.8&&this.makeRectangle(new e.Vector2(a+f,n+f),new e.Vector2(r-f,n+f),new e.Vector2(r-f,i-f),new e.Vector2(a+f,i-f)))}var v=.3*Math.random()+.4,h=.3*Math.random()+.4;t++,this.quadtree(t,a,n,a+l*v,n+d*h),this.quadtree(t,a+l*v,n,r,n+d*h),this.quadtree(t,a,n+d*h,a+l*v,i),this.quadtree(t,a+l*v,n+d*h,r,i)},n.prototype.makeRectangle=function(t,a,n,r){var i=a.x-t.x,s=r.y-t.y,l=t.x+i/2,u=t.y+s/2,p=new e.MeshBasicMaterial,c=o(l*l+u*u),m=5+20*Math.random();m+=250*(1-Object(g.c)(50,150,c)),m+=50*(1-Object(g.c)(200,400,c)),.02>Math.random()&&(m+=10),this.buildings.push({w:i,h:m,d:s,x:l,y:m/2,z:u})},n.prototype.getBorder=function(t,a){return{topLeft:new e.Vector2(-t,-a),topRight:new e.Vector2(t,-a),bottomLeft:new e.Vector2(-t,a),bottomRight:new e.Vector2(t,a)}},n.prototype.update=function(){},s()(n,[{key:"transition",set:function(e){this.material.uniforms.transition.value=e},get:function(){return this.material.uniforms.transition.value}}]),n})(e.Group);t.a=y}).call(t,a(28))},function(e,t,a){"use strict";(function(e){var t=a(0),o=a.n(t),n=a(75),r=a.n(n),i=a(76),s=a.n(i),l=function(e,t){for(var a=-100,o=0;3>o;o++)t[e+o]=Math.random()*(100-a)+a},d=(function(t){function a(e,n,i){o()(this,a);var s=r()(this,t.call(this));return s.copy(e),s.count=n,s.addAttributeFill("aPosition",3,i),s.drawRange.count=n,s.maxInstancedCount=n,s}return s()(a,t),a.prototype.addAttributeFill=function(t,a){for(var o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:l,n=new Float32Array(this.count*a),r=0,s=0;s<this.count;s++)r=s*a,o(r,n);this.addAttribute(t,new e.InstancedBufferAttribute(n,a)),this.attributes[t].needsUpdate=!0},a})(e.InstancedBufferGeometry)}).call(t,a(28))},function(e,t,a){"use strict";(function(e){var t=a(0),o=a.n(t),n=a(75),r=a.n(n),i=a(76),s=a.n(i),l=(function(e){function t(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};o()(this,t),n.fragmentShader=n.fragmentShader||a(339),n.vertexShader=n.vertexShader||a(340),n.uniforms=n.uniforms||{opacity:{value:1}};var i=r()(this,e.call(this,n));return i.type="InstancedMaterial",i}return s()(t,e),t})(e.RawShaderMaterial)}).call(t,a(28))},function(e){e.exports="precision highp float;\n\nvarying vec3 vColor;\nuniform float opacity;\n\nvoid main() {\n\tgl_FragColor = vec4( vColor, opacity );\n}\n"},function(e){e.exports="precision highp float;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nattribute vec3 position;\nattribute vec3 aPosition;\nattribute vec3 aScale;\nvarying vec3 vColor;\n\nvoid main() {\n\tvec3 pos = position*aScale + aPosition;\n\tvColor = normalize(pos)*min(1.,pos.y);\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( pos, 1.0 );\t\n}\n"},function(e,t,a){"use strict";(function(e){var t=a(87),o=a.n(t),n=a(0),r=a.n(n),i=a(75),s=a.n(i),l=a(76),d=a.n(l),u=(function(t){function n(i){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};r()(this,n);var d=a(342),u=a(343),p=s()(this,t.call(this,i));return l=l||{},p.uniforms=o()(e.ShaderLib.standard.uniforms,l),p.isMeshStandardMaterial=!0,p.setFlags(p,d,u),p.setValues(i),p}return d()(n,t),n.prototype.setFlags=function(e,t,a){e.vertexShader=a,e.fragmentShader=t,e.type="InstancedStandardMaterial"},n})(e.MeshStandardMaterial)}).call(t,a(28))},function(e){e.exports="\t#define PHYSICAL\n\tuniform vec3 diffuse;\n\tuniform vec3 emissive;\n\tuniform float roughness;\n\tuniform float metalness;\n\tuniform float opacity;\n\t#ifndef STANDARD\n\t\tuniform float clearCoat;\n\t\tuniform float clearCoatRoughness;\n\t#endif\n\tvarying vec3 vViewPosition;\n\t#ifndef FLAT_SHADED\n\t\tvarying vec3 vNormal;\n\t#endif\n\t#include <common>\n\t#include <packing>\n\t#include <color_pars_fragment>\n\t#include <uv_pars_fragment>\n\t#include <uv2_pars_fragment>\n\t#include <map_pars_fragment>\n\t#include <alphamap_pars_fragment>\n\t#include <aomap_pars_fragment>\n\t#include <lightmap_pars_fragment>\n\t#include <emissivemap_pars_fragment>\n\t#include <envmap_pars_fragment>\n\t#include <fog_pars_fragment>\n\t#include <bsdfs>\n\t#include <cube_uv_reflection_fragment>\n\t#include <lights_pars>\n\t#include <lights_physical_pars_fragment>\n\t#include <shadowmap_pars_fragment>\n\t#include <bumpmap_pars_fragment>\n\t#include <normalmap_pars_fragment>\n\t#include <roughnessmap_pars_fragment>\n\t#include <metalnessmap_pars_fragment>\n\t#include <logdepthbuf_pars_fragment>\n\t#include <clipping_planes_pars_fragment>\n\t\n\t// custom varying - uniforms here \n\t//------------------------ \n\tvarying vec3 vColor;\n\t//-------------------------\n\n\tvoid main() {\n\t\t#include <clipping_planes_fragment>\n\t\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t\n\t\t//Custom color here\n\t\t//------------------------ \n\t\tdiffuseColor.xyz = vColor;\n\t\t//------------------------ \n\t\n\t\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t\tvec3 totalEmissiveRadiance = emissive;\n\t\t#include <logdepthbuf_fragment>\n\t\n\t\t#ifdef USE_MAP\n\t\t\tvec4 texelColor = texture2D( map, vUv*2. );\n\t\t\ttexelColor = mapTexelToLinear( texelColor );\n\t\t\tdiffuseColor *= texelColor;\n\t\t#endif\n\t\n\t\t#include <color_fragment>\n\t\t#include <alphamap_fragment>\n\t\t#include <alphatest_fragment>\n\t\t#include <specularmap_fragment>\n\t\t#include <roughnessmap_fragment>\n\t\t#include <metalnessmap_fragment>\n\t\t\n\t\t// CUSTOM EXAMPLE metalness/ roughness\n\t\t// metalnessFactor -= .3;\n\t\t// roughnessFactor -= .3;\n\t\t\n\t\t#include <normal_fragment>\n\t\t#include <emissivemap_fragment>\n\t\t#include <lights_physical_fragment>\n\t\t#include <lights_template>\n\t\t#include <aomap_fragment>\n\t\t\n\t\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t\t\n\t\t// CUSTOM Possible\n\t\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t\n\t\t#include <dithering_fragment>\n\t\t#include <premultiplied_alpha_fragment>\n\t\t#include <tonemapping_fragment>\n\t\t#include <encodings_fragment>\n\t\t#include <fog_fragment>\n}\n"},function(e){e.exports="#define PHYSICAL\n\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nattribute vec3 aColor;\nattribute vec3 aPosition;\nattribute vec3 aScale;\nvarying vec3 vColor;\n\nmat4 rotationMatrix(vec3 axis, float angle) {\n\taxis = normalize(axis);\n\tfloat s = sin(angle);\n\tfloat c = cos(angle);\n\tfloat oc = 1.0 - c;\n\treturn mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n\t\t\t\toc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n\t\t\t\toc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n\t\t\t\t0.0,                                0.0,                                0.0,                                1.0);\n}\n\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\n\t#include <begin_vertex>\n\n\t// Custom transformed here\n\t//----------------------------------------\n\t\n\t// CUSTOM ROTATION\n\t// mat4 m = rotationMatrix( vec3(0.,1.,0.), aInfo.y );\n\t// transformed = (m*vec4(transformed,1.)).xyz;\n\n\t// CUSTOM SCALE\n\t// transformed *= 1. + vSpecial*3.;\n\t\n\t// CUSTOM POSITION\n\ttransformed = position*aScale + aPosition.xyz;\n\n\t//----------------------------------------\n\t// CUSTOM VARYING\n\tvColor = normalize(abs(transformed))+.5;\n\t//----------------------------------------\n\t\n\t#include <displacementmap_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n"},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(79),i=(function(){function t(){n()(this,t),this.w=1024,this.h=2048,this.canvas=document.createElement("canvas"),this.canvas.width=this.w,this.canvas.height=this.h,this.canvas.style.position="absolute",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.zIndex=1e6,this.ctx=this.canvas.getContext("2d")}return t.prototype.generate=function(){for(var e=1024/10,t=0;t<this.w;t+=e)this.drawFacade(t,e)},t.prototype.getTexture=function(){this.generate();var a=new e.Texture(this.canvas,e.UVMapping,e.MirroredRepeatWrapping,e.ClampToEdgeWrapping,e.LinearFilter,e.MipmapLinearFilter,e.RGBFormat,e.UnsignedByteType,r.a.renderer.capabilities.getMaxAnisotropy());return a.needsUpdate=!0,a},t.prototype.drawFacade=function(e,t){this.drawBackground(e,t,this.h);for(var a=0,o=0;a<this.h;)a=0==a?this.drawRoof(e,a,t):this.drawFloor(e,a,t),o++},t.prototype.drawBackground=function(e,t,a){var o=Math.floor(10*Math.random()+50);this.ctx.fillStyle="rgb(0,0,"+o+")",this.ctx.fillRect(e,0,t,a)},t.prototype.drawFloor=function(e,t,a){var o=10;if(300>t&&.3>Math.random())for(var n=e;n<e+a;n++)if(.5>Math.random()){this.ctx.fillStyle="rgba(255,255,255,"+(.2*Math.random()+.05)+")";var r=a;this.ctx.fillRect(n,t+1,r,o-4),n+=r}return t+o},t.prototype.drawSpecial=function(e,t,a){var o=50+50*Math.random();return this.ctx.fillStyle="rgba(255,255,255,"+(.25*Math.random()+.1)+")",this.ctx.fillRect(e,t,a,o),t+o},t.prototype.drawRoof=function(e,t,a){t=25,t=Math.round(t);var o=5;return this.ctx.fillStyle="rgb(255,255,255)",this.ctx.fillRect(e,t,a,o),2*t+o},t})();t.a=new i}).call(t,a(28))},function(e){e.exports="precision highp float;\n\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\nuniform float transition;\n\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\nattribute float aTime;\nattribute float height;\n\nvarying float vAlpha;\nvarying float vPy;\nvarying vec2 vUv;\nvarying vec2 vUv2;\nvarying vec3 vNormal;\nvarying float vPercent;\n\n#include <fog_pars_vertex>\n\nfloat quadraticInOut(float t) {\n  float p = 2.0 * t * t;\n  return t < 0.5 ? p : -p + (4.0 * t) - 1.0;\n}\n\nvoid main() {\n\tvUv = uv;\n\tvUv2 = uv2;\n\tvNormal = normal;\n\t\n\tvec3 pos = position;\n\tfloat p = quadraticInOut(1.-smoothstep(aTime,aTime+3.+height/350.,transition));\n\tpos.y -= height*p;\n\n\tvAlpha = 1.-clamp(p,0.,1.);\n\tvPy = pos.y;\n\tvPercent = quadraticInOut(smoothstep(aTime+1.4,aTime+4.4+height/350.,transition));\n\n\t//need for fog\n\tvec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );\n\n\t//modify from original threejs to also account position x\n\t#ifdef USE_FOG\n\tfogDepth = -mvPosition.z+abs(mvPosition.x)*.35;\n\t#endif\n\n\tgl_Position = projectionMatrix * mvPosition;\t\n}\n"},function(e){e.exports="precision highp float;\n\nvarying float vAlpha;\nvarying vec2 vUv;\nvarying vec2 vUv2;\nvarying float vPy;\n\nvarying vec3 vNormal;\nvarying float vPercent;\n\nuniform float opacity;\nuniform sampler2D map;\n\n#include <common>\n#include <fog_pars_fragment>\n\nvoid main() {\n\tif(vPy<=-0.01){\n\t\tdiscard;\n\t}\n\n\tgl_FragColor = vec4( texture2D(map,vUv) );\n\tgl_FragColor.rgb += max(0., 1.-vUv2.y ) * (vPercent+.15);\n\n\t// vec3 light = vec3(0.5, 0.2, 1.0);\n  // light = normalize(light);\n  // float dProd = max(0.0, dot(vNormal, light))*.7;\n\t// gl_FragColor += dProd;\n\n\tgl_FragColor.a = vAlpha;\n\t\n\t#include <fog_fragment>\n\tif(fogFactor>=0.99){\n\t\tdiscard;\n\t}\n\t\n\t// gl_FragColor = vec4(vAlpha);\n\t// gl_FragColor.a = 1.;\n\t// gl_FragColor = vec4( vec3(dProd), 1.);\n\t// gl_FragColor = vec4( vec3(vUv.y), 1.);\n}\n"},function(e,t,a){"use strict";(function(e){var o=a(0),n=a.n(o),r=a(75),i=a.n(r),s=a(76),l=a.n(s),d=a(30),u=a(29),p=a(86),c=(function(){var t=1,a=new e.CylinderGeometry(1,1,t,16,2,!0,Math.PI/4),o=a.clone(),n=a.clone(),r=new e.Matrix4().makeTranslation(0,t/2,0);return a.applyMatrix(r),a})(),m=(function(t){function o(r,s,l,m){n()(this,o);var f=new e.Texture(d.a.images.myst_mask2);f.needsUpdate=!0;var v=new e.Texture(d.a.images["001"],null,e.MirroredRepeatWrapping,e.MirroredRepeatWrapping);v.needsUpdate=!0;var g=new e.Texture(d.a.images["002"],null,e.MirroredRepeatWrapping,e.MirroredRepeatWrapping);g.needsUpdate=!0;var h=new e.Texture(d.a.images["002"],null,e.MirroredRepeatWrapping,e.MirroredRepeatWrapping);h.needsUpdate=!0;var y=new e.RawShaderMaterial({vertexShader:a(348),fragmentShader:a(349),depthWrite:!1,uniforms:{opacity:{type:"f",value:.3},time:{type:"f",value:0},tresh:{type:"f",value:0},mask:{type:"t",value:f},texture1:{type:"t",value:v},texture2:{type:"t",value:g},texture3:{type:"t",value:h}},transparent:!0,blending:e.AdditiveBlending,side:e.DoubleSide}),b=i()(this,t.call(this,c,y));return b.onStart=function(){},b.onDarknessChange=function(e){TweenLite.killTweensOf(b,!1),1==e?TweenLite.to(b,1.7,{delay:b.delayIn,globalOpacity:1,ease:Power2.easeIn}):TweenLite.to(b,.8,{delay:.2,globalOpacity:0,ease:Cubic.easeInOut})},b.renderOrder=3,b.frustumCulled=!1,b.opacity=m,b.globalOpacity=0,b.baseX=r,b.baseZ=s,b.baseY=l,b.scale.set(b.baseX,b.baseY,b.baseZ),p.a.add(b,"scale",0,8e3),b.delayIn=.05,u.a.onDarknessChange.add(b.onDarknessChange),u.a.onStart.add(b.onStart),b}return l()(o,t),o.prototype.update=function(e){this.visible=0!=this.globalOpacity,this.time+=e,this.material.uniforms.time.value+=e/1e3,this.material.uniforms.opacity.value=this.globalOpacity*this.opacity,this.material.uniforms.tresh.value=this.globalOpacity},o})(e.Mesh);t.a=m}).call(t,a(28))},function(e){e.exports="precision highp float;\nuniform mat4 projectionMatrix;\nuniform mat4 modelViewMatrix;\n\nattribute vec3 position;\nattribute vec2 uv;\n\nvarying vec2 vUv;\n\nvoid main(void) {\n\tvUv = uv;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n"},function(e){e.exports="precision highp float;\n\nuniform float opacity;\nuniform float tresh;\nuniform float time;\nuniform sampler2D mask;\nuniform sampler2D texture1;\nuniform sampler2D texture2;\nuniform sampler2D texture3;\n\nvarying vec2 vUv;\n\nvoid main(void) {\n\tvec3 color = texture2D(texture1,vec2(vUv.x,vUv.y-time)).rgb*.33;\n\tcolor += texture2D(texture2,vec2(vUv.x,vUv.y-time*0.3)).rgb*.33;\n\tcolor += texture2D(texture3,vec2(vUv.x,vUv.y-time*0.1)).rgb*.33;\n\tcolor *= texture2D(mask,vUv).rgb;\n\tfloat y = vUv.y+.4;\n\tgl_FragColor = vec4(color, smoothstep(y,y+.1,tresh)*opacity);\n}\n"},function(e,t,a){"use strict";var o=Math.PI;(function(e){var n=a(0),r=a.n(n),i=a(75),s=a.n(i),l=a(76),d=a.n(l),u=a(30),p=a(29),c=(function(){var t=1500,a=500,n=new e.PlaneGeometry(t,a),r=new e.PlaneGeometry(t,a),i=new e.PlaneGeometry(t,a),s=new e.Matrix4().makeTranslation(t/2,a/2,0),l=new e.Matrix4().makeRotationY(o/2);return n.applyMatrix(s),r.applyMatrix(new e.Matrix4().makeRotationX(o/3)),r.applyMatrix(s),i.applyMatrix(new e.Matrix4().makeRotationX(-o/3)),i.applyMatrix(s),n.applyMatrix(l),r.applyMatrix(l),i.applyMatrix(l),n.merge(r),n.merge(i),n})(),m=(function(t){function a(){r()(this,a);var o=s()(this,t.call(this));o.onStart=function(){TweenLite.to(o,2,{delay:.8,globalOpacity:1,ease:Cubic.easeOut})},o.onDarknessChange=function(e){TweenLite.killTweensOf(o,!1),1==e?TweenLite.to(o,1,{globalOpacity:0,ease:Cubic.easeIn}):TweenLite.to(o,2,{delay:2,globalOpacity:1,ease:Cubic.easeOut})};var n=new e.Texture(u.a.images.light);n.needsUpdate=!0;var i=new e.MeshBasicMaterial({depthWrite:!1,depthTest:!1,map:n,color:8947967,wireframe:!1,transparent:!0,blending:e.AdditiveBlending,side:e.DoubleSide});return o.mesh=new e.Mesh(c,i),o.add(o.mesh),o.frustumCulled=!1,o.time=1e4*Math.random(),o.randomOpacity=1556+750*Math.random(),o.randomScale=956+150*Math.random(),o.baseScale=.6+.4*Math.random(),o._opacity=.2,o.globalOpacity=0,p.a.onDarknessChange.add(o.onDarknessChange),p.a.onStart.add(o.onStart),o}return d()(a,t),a.prototype.update=function(e){this.mesh.visible=0!=this.globalOpacity,this.time+=e,this.mesh.material.opacity=(.1+Math.abs(Math.sin(this.time/this.randomOpacity))*this._opacity)*this.globalOpacity},a})(e.Group);t.a=m}).call(t,a(28))},function(e,t,a){"use strict";(function(e){var t=a(0),o=a.n(t),n=a(75),r=a.n(n),i=a(76),s=a.n(i),l=(function(t){function a(){o()(this,a);var n=new e.BoxBufferGeometry(100,600,20,10,60,2),i=new e.MeshBasicMaterial({wireframe:!0,transparent:!0,opacity:0}),s=r()(this,t.call(this,n,i));return s.frustumCulled=!1,s}return s()(a,t),a.prototype.update=function(){},a})(e.Mesh)}).call(t,a(28))}]));